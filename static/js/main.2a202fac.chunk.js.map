{"version":3,"sources":["types/theme.ts","style/theme.ts","style/globalStyle.ts","database/index.ts","store/theme.ts","types/player.ts","assets/logo.svg","components/Home/Logo.tsx","components/Global/Modal.tsx","components/Global/Button.tsx","components/Global/Input.tsx","util/hook/useGameRoomName.ts","util/generateUniqueId.ts","store/players.ts","types/card.ts","store/user.ts","util/hook/useFirebaseRoom.ts","components/Home/RoomDialog.tsx","util/hook/useUserName.ts","components/Global/NameFillIn.tsx","components/Global/ThemeToggler.tsx","store/modal.ts","store/deck.ts","store/bind.ts","components/WaitRoom/PlayerWindow.tsx","store/score.ts","store/game.ts","store/winTricks.ts","util/hook/useInitData.ts","views/Home/index.tsx","components/Global/ShareIcon/index.tsx","util/sleep.ts","components/WaitRoom/SendInviteLinkButton.tsx","components/Global/Radio.tsx","components/WaitRoom/TeamRadios.tsx","util/generateArray.ts","components/Global/Loading.tsx","views/WaitRoom/index.tsx","util/deck.ts","util/suit.ts","components/Global/Suit.tsx","components/GameRoom/ThinkingIcon.tsx","components/GameRoom/Modal/ModalBinding/PlayerList.tsx","util/isObjectEquivalent.ts","components/GameRoom/Modal/ModalBinding/OptionButton.tsx","components/GameRoom/Modal/ModalBinding/OptionList.tsx","components/GameRoom/Modal/ModalBinding/BindList.tsx","components/GameRoom/Modal/ModalBinding/index.tsx","assets/kanaheiclap.gif","components/GameRoom/Modal/ModalGiveUp/index.tsx","assets/bumpintowindow.gif","components/GameRoom/Modal/ModalConfirmLeave/index.tsx","components/GameRoom/Modal/ModalResult/index.tsx","components/GameRoom/Modal/ModalRoot/index.tsx","components/GameRoom/Card/index.tsx","types/navigator.ts","components/GameRoom/Cards/UserHandCards.tsx","components/GameRoom/Cards/OtherUserHandCards.tsx","components/GameRoom/Cards/index.tsx","components/GameRoom/CardTable/Nameplate.tsx","components/GameRoom/CardTable/PlayedCard.tsx","util/game.ts","components/GameRoom/CardTable/index.tsx","components/GameRoom/MainInfo/InfoBox.tsx","components/GameRoom/MainInfo/index.tsx","components/GameRoom/SideInfo.tsx","components/GameRoom/Settings/Content.tsx","components/GameRoom/Settings/index.tsx","components/GameRoom/WonTricks/Icon.tsx","components/GameRoom/WonTricks/Content.tsx","components/GameRoom/WonTricks/index.tsx","components/GameRoom/Navbar/index.tsx","views/GameRoom/index.tsx","views/InvitePage/index.tsx","App.tsx","reportWebVitals.js","index.tsx"],"names":["ThemeTypes","color","GlobalStyle","createGlobalStyle","db","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","TeamTypes","themeState","atom","key","default","existingChosenTheme","JSON","parse","localStorage","getItem","Light","defaultTheme","themeData","light","bg","fg","dark","StyledLogo","styled","div","theme","Logo","props","className","useRecoilState","src","LogoSVG","alt","backgroundColor","StyledModalPage","animated","ModalPage","active","children","onDeactive","useRecoilValue","transitions","useTransition","from","opacity","transform","enter","leave","item","style","onClick","StyledButton","button","getButtonStyle","themeType","Button","type","size","classnames","styledInput","value","placeholder","onChange","onFocus","maxLength","useGameRoomName","useState","gameRoomName","setRoomName","warnMessage","setWarnMessage","validateRoomName","test","generateUniqueId","Math","random","toString","substring","CardSuitType","SuitColorType","playersData","teamArray","selector","get","map","data","team","OrderedStartFromTeamOne","playerDataState","filter","player","TeamOne","TeamTwo","playerData","name","handleIndex","index","relationWithUser","user","userNameState","userIndex","indexOf","nextIndex","teammateIndex","previousIndex","teammate","nextPlayer","previousPlayer","userIDState","userRoomState","userIndexState","userName","findIndex","userTeamState","playerList","length","find","userReadyState","ready","navState","useFirebaseRoom","setUserID","useSetRecoilState","setLocalRoom","history","useHistory","updateDbRoomData","roomID","roomName","a","roomRef","database","ref","userID","current","Date","timestamp","userInfo","id","update","playersInfo","child","toPath","push","boxBorder","cancel_bg","cancel_fg","title_bg","title_fg","sub_title_fg","sub_title_bb","Content","box_border","CreateButton","isLengthValid","getButtonColor","e","RoomButton","RoomDialog","closeRoomList","roomList","userGameRoomName","Modal","stopPropagation","room","target","preventDefault","createRoom","useUserName","setUserName","validateUserName","isVaild","name_fg","border","button_color","NameForm","form","NameFillIn","onEnter","actionText","buttonText","Toggler","ThemeToggler","toggleTheme","setTheme","setItem","stringify","Dark","modalState","userDeckState","otherPlayerDeckState","badDeck","userDeck","card","number","reduce","b","responseToBadDeck","OKtoPlay","PlayerOrders","userPickBindState","nowBindState","suit","Club","userPassState","playersCalledListState","availibleTricksState","min","Spade","trick","teamShouldWinState","calledPlayer","team1","team2","calledTeam","p","anotherTeam","calledTeamShouldWin","anotherTeamShouldWin","teamScoresState","currentPlayerName","thisRoundSuitState","thisRoundCardsState","trumpState","isUserTurnState","nowPlayer","isUserLastPlayerState","isThisRoundEndState","isGameEndState","team1ShouldWin","team2ShouldWin","team1Score","team2Score","userWinTricksState","useInitData","initUserName","useResetRecoilState","initUserRoom","initUserID","initModalType","initUserDeck","initScore","initUserPickBind","initNowBind","initPassState","initRoundCards","initTrump","initCalledList","initWinTricks","initPlayerData","initGameRoomData","initGameData","HomePage","Home","showRoomDialog","toggleRoomDialog","setRoomList","React","useEffect","subscribeRooms","removeListeners","Firebase","on","roomsData","val","filterOutAbandonedRoom","Object","entries","obj","set","rooms","values","off","w_border","st_bg","st_border","cl_bg","cl_border","name_bg","name_st_fg","name_cl_fg","ready_fg","ready_bg","ready_border","Window","PlayerBox","order","playerName","defaultTeam","First","Fourth","playerTeam","PlayerWindow","playersOrder","Second","Third","Icon","span","iconColor","ShareIcon","sleep","ms","Promise","resolve","setTimeout","icon_color","modal_color","Toast","SuccessToast","SendInviteLinkButton","roomId","isCopied","setIsCopied","inviteLink","navigator","clipboard","writeText","then","copyInviteLink","StyledRadio","marginRight","Radio","default_f","st_fg","cl_fg","RadioArea","TeamOption","isChosen","teamIndex","getBorder","TeamRadios","userTeam","handleChooseTeam","generateArray","Array","_","x","dot","LoadingModal","Loading","text","countdown","noOpacity","action","cancelReady","timeLeft","setTimeLeft","dots","countdownInterval","setInterval","clearInterval","includes","Room","ReadyButton","buttonMessage","WaitRoom","setButtonMessage","setPlayerData","isUserReady","isAllReady","initWaitRoomData","detectUserDisConnect","once","userOrder","sort","userDefaultTeam","userData","sortedByTimestamp","enterGame","remove","prepareWaitRoom","onDisconnect","cancel","teamOneAmount","teamTwoAmount","setReady","isReady","dealCards","playerAmount","deck","players","i","cards","Heart","Diamond","cardAPoint","sortCards","shuffledDeck","floor","shuffle","j","buildNewDeck","suitColor","Black","Red","Suit","suitCode","getSuitHtmlCode","ThinkingIcon","t1_name_fg","t2_name_fg","t1_name_bg","t2_name_bg","binds_bg","red_suit_color","black_suit_color","pass_color","Player","teamColor","getUserTurnEffect","PlayInfo","calledList","isPlayerTurn","is_player_turn","called","isPassed","bind","PlayerList","setCalledList","calledBindsRef","allCalledBinds","isObjectEquivalent","aKeys","keys","bKeys","every","unable_color","OptionButton","isUnableBind","trickNumber","isPicked","number_c","OptionRow","Options","isUserTurn","suits","pickBindState","setPickBindState","nowBind","bindData","List","OptionList","tricks","Box","status_unable_bg","status_unable_fg","call_unable_bg","call_unable_fg","status_active_bg","status_active_fg","call_pass_bg","call_pass_fg","call_active_bg","call_active_fg","Hint","hint","BindList","userPickBind","setUserPickBind","isUserPass","setUserPass","setNowBind","trump","setTrump","availibleTricks","nowBindRef","nowBindData","detectTrumpDecided","useMemo","noBind","callBind","bindRef","userBindListRef","nextPlayerRef","userCalledBinds","calledBind","newUserBinds","bindListRef","binds","playerCalledList","some","getNextPlayer","playerIndex","content_bg","BindingBox","ModalBinding","yes_button_fg","yes_button_bg","no_button_fg","no_button_bg","AskBox","setResponseToBadDeck","Kanahei","ModalGiveUp","closeModal","leaveGame","ModalConfirmLeave","AninimationBox","Animations","delay","toggleDelay","setDelay","mainFireWorkData","loop","autoplay","animationData","mainFireWork","rendererSettings","preserveAspectRatio","subFireWorkData","subFireWork","thirdFireWorkData","thirdFireWork","options","height","width","win_fg","ResultBox","winTeam","isUserWin","toggleLoadingWindow","openConfirmLeaveModal","refreshGame","teamName","buttonColor","yellow_button","orange_button","green_button","listenOnOneMoreGame","removeOneMoreGameListener","readyToNextRound","ModalResult","Root","ModalRoot","isLoading","toggleLoading","isOKtoPlay","isGotWinner","modalType","setModalType","backToWaitRoom","NavigatorTypes","front_bg","back_bg","suit_red","suit_black","pattern","shadow","PokerCard","Card","hasDetail","nowPickSuit","numberOnCard","numberInPoker","sameSuit","isNotPicked","UserHandCards","thisRoundSuit","isUserLastPlayer","setUserDeck","setNowPickSuit","gameInfoRef","handlePickCard","isValidCard","playCard","removeCardFromDeck","switchToNextPlayer","pickedSuit","cardsRef","suitRef","userPlayData","d","newDeck","OtherUserHandCards","cardAmount","cardArray","CardGroup","Cards","otherPlayerDeck","orderedPlayers","fc","bw","highlight_color_team","Tag","PlayerNameTag","isCurrentPlayer","Names","Nameplate","currentPlayer","PlayedCard","currentSuit","thisRoundCards","updateThisRoundCards","teamScores","updateTeamScores","isThisRoundEnd","setOtherPlayerDeck","setUserWinTricks","orderCards","playedPlayer","pre","handleRoundEnded","currentPlayerRef","winner","getRoundWinner","updatePoints","collectThisTrick","initRoundData","thisRoundSuitRef","thisRoundCardsRef","allSettled","winnerIndex","point","countPoint","max","getBiggestCard","winnerTeam","Table","border_color","CardTable","InfoBox","title","Board","Point","team1color","team2color","StyledSuit","red","black","PointInfo","teamShouldWin","MainInfo","SideNav","SideInfo","renderIcon","content","nowNav","setNowNav","Item","b_bottom","SettingButton","exit_button","mail_button","line","button_bg","PlusIcon","isOpen","Settings","StyledCardIcon","CardIcon","Empty","userWinTricks","WonTricks","Background","nav","Navbar","GameRoom","setNowPlayerState","setThisRoundSuit","listenOnCurrentPlayer","listenOnThisRoundSuit","listenOnChangeRouteEvent","dealDeck","nowPlayerID","roundSuit","changeMateRef","leaveRef","restartRef","disconnectedRef","someoneLeaveGame","deckInfo","roundSuitRef","stripes_1","stripes_2","decoration_arrows","title_block_1","title_block_2","title_block_3","Page","InvitePage","match","params","setPlayers","roomData","currentPlayers","App","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2a202fac.chunk.js","sourcesContent":["\nexport enum ThemeTypes {\n\tLight = 'light',\n\tDark = 'dark',\n}\n\nexport interface ThemeDataDetail {\n    [key: string]: string;\n}\n\nexport interface ThemeData {\n    [ThemeTypes.Light]: ThemeDataDetail;\n    [ThemeTypes.Dark]: ThemeDataDetail;\n}\n\nexport type Theme = ThemeTypes.Light | ThemeTypes.Dark;","export const color = {\n    $theme_background: '#F6F3EB',\n    $title_font_color: '#965735',\n    $brown_color: '#8c6954',\n    $pink_color: '#f29c9b',\n    $green_color: '#a3c07e',\n    $warn_red_color: '#BF3131',\n    $red_suit_color: '#AF3C3C',\n    $black_suit_color: '#323232',\n    $shadow: 'rgba(124, 124, 124, 0.4)',\n    $highlight_color: '#f5db8f',\n    $pass_color: '#a5dc6e',\n    $unable_color: '#dcdcdc',\n    $unable_font_color: '#C4C4C4',\n    $orange_color: '#f5ab57',\n    $under_line_color: '#E3E1E1',\n    $default_font_color: '#323232',\n    $fluorescent_pink_color: '#FFC2C0',\n    $fluorescent_yellow_color: '#FEEE95',\n    $fluorescent_green_color: '#0FFF50',\n    $fluorescent_orange_color: '#FF5F1F',\n\n    $dark_border_color: '#E5D3D2',\n    $dark_default_font_color: '#F3F3F3',\n    $dark_dim_border_color: '#767675',\n    $dark_black_suit_color: '#E5D3D2',\n    $dark_red_suit_color: '#F7274F',\n    $dark_bg_color: '#2B2C2A',\n    $dark_dim_bg_color: '#333332',\n    $light_pink_color: '#FFE9E8',\n    $dark_unable_color: '#484545'\n}","import { createGlobalStyle } from \"styled-components\";\nimport { color } from \"style/theme\";\n\nexport const GlobalStyle = createGlobalStyle`\n    * {\n    font-family: 'Kosugi Maru', sans-serif;\n    user-select: none;\n    }\n    \n    body,\n    html {\n    font-weight: 400;\n    background-color: ${color.$theme_background};\n    box-sizing: border-box;\n    overflow: hidden;\n    overflow-x: hidden;\n    height: 100%;\n    width: 100%;\n    transform: translate3d(0, 0, 0);\n    padding: 0;\n    margin: auto;\n    color: ${color.$default_font_color};\n    }\n\n    #root {\n    height: 100%;\n    overflow: hidden;\n\n        & > div {\n            padding: 5vw;\n            height: 100%;\n            box-sizing: border-box;\n        }\n    }\n\n    div {\n        padding: 0;\n        margin: 0;\n    }\n\n    button {\n        border: none;\n        margin: 0;\n        padding: 0;\n        \n        &:active,\n        &:focus {\n            outline: none;\n        }\n    }\n\n    p {\n        margin: 0;\n    }\n`;","import firebase from \"firebase/app\";\nimport \"firebase/database\";\n\nconst firebaseConfig = {\n    apiKey: process.env.REACT_APP_APIKEY,\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n    databaseURL: process.env.REACT_APP_DATABASE_URL,\n    projectId: process.env.REACT_APP_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n    appId: process.env.REACT_APP_APP_ID,\n};\n\nconst db = firebase.initializeApp(firebaseConfig);\nexport default db;","import {\n    atom\n} from 'recoil';\nimport { Theme, ThemeTypes } from 'types/theme';\n\nconst defaultTheme = () => {\n    const existingChosenTheme = JSON.parse(localStorage.getItem('cake-and-bridge-theme') || '{}');\n    if(typeof existingChosenTheme !== 'string') {\n        return ThemeTypes.Light;\n    }   \n    return existingChosenTheme;\n}\n\nexport const themeState = atom({\n    key: 'themeState',\n    default: defaultTheme() as Theme,\n});","export enum TeamTypes {\n\tTeamOne = 'team1',\n\tTeamTwo = 'team2',\n}\n\nexport type Team = TeamTypes.TeamOne | TeamTypes.TeamTwo;\n\nexport interface PlayerData {\n    name: string;\n    team: TeamTypes;\n    timestamp: number;\n    id: string;\n    ready?: boolean;\n}","export default __webpack_public_path__ + \"static/media/logo.ba38e50a.svg\";","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilState } from \"recoil\";\nimport { themeState } from 'store/theme';\nimport { color } from \"style/theme\";\nimport LogoSVG from 'assets/logo.svg';\n\nconst themeData = {\n    light: { \n\t\tbg: 'white',\n        fg: color.$title_font_color,\n\t},\n    dark: { \n\t\tbg: color.$dark_dim_bg_color,\n        fg: color.$fluorescent_pink_color,\n\t},\n}\n\nconst StyledLogo = styled.div`\n    margin: 30px auto 0;\n    border-radius: 100%;\n    text-align: center;\n    width: 270px;\n    height: 270px;\n    padding: 30px;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    transition: .3s all;\n    background-color: ${({theme}) => theme.bg };\n\n    .image {\n        width: 60%;\n        margin-bottom: 20px;\n    }\n\n    .name {\n        font-size: 18px;\n        letter-spacing: 2px;\n        line-height: 28px;\n        color:  ${({theme}) => theme.fg };\n    }\n`\n\ninterface LogoProperty {\n    className: string;\n}\n\nconst Logo = (props: LogoProperty) => {\n    const { className } = props;\n    const [theme] = useRecoilState(themeState);\n    return (\n        <StyledLogo \n            theme={themeData[theme]}\n            className={className}>\n                <img className=\"image\" src={LogoSVG} alt=\"logo\" />\n                <p className=\"name\">\n                    Cake-Bridge\n                    <br/>\n                    for-Life\n                </p>\n        </StyledLogo>\n    );\n}\n\nexport default Logo;","import React from \"react\";\nimport { useTransition, animated } from \"react-spring\";\nimport { useRecoilValue } from 'recoil';\nimport { color } from 'style/theme';\nimport { themeState } from 'store/theme';\nimport styled from 'styled-components';\n\nconst themeData = {\n    light: { backgroundColor: '#f3e9e9' },\n    dark: { backgroundColor: color.$dark_bg_color },\n}\n\nconst StyledModalPage = styled(animated.div)`\n    background-color: rgba(0, 0, 0, 0.25);\n\twidth: 100%;\n\theight: 100%;\n    top: 0;\n    left: 0;\n\tposition: absolute;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n    z-index: 20;\n\n    &.no-opacity {\n        background-color: ${({ theme }) => theme.backgroundColor};\n    }\n\n\n    &.result_modal {\n        background-color: rgba(0, 0, 0, 0.5);\n    }\n\n    & > div {\n        min-width: 65vw;\n    }\n`\ninterface ModalPageProperty {\n    className?: string;\n    active: Boolean;\n    children: React.ReactNode;\n    onDeactive?: (e: React.MouseEvent<HTMLElement>) => void,\n}\n\nconst ModalPage = (props: ModalPageProperty) => {\n    const { active, children, className, onDeactive } = props;\n    const theme = useRecoilValue(themeState);\n\n    const transitions = useTransition(active, {\n        from: { opacity: 0, transform: \"translateY(-15px)\" },\n        enter: { opacity: 1, transform: \"translateY(0px)\" },\n        leave: { opacity: 0, transform: \"translateY(-15px)\" }\n    });\n\n    return (\n        <>\n            {transitions((props, item) => item && (\n                <StyledModalPage\n                    style={props}\n                    onClick={onDeactive}\n                    theme={themeData[theme]}\n                    className={className}\n                >\n                    {children}\n                </StyledModalPage>))\n            }\n        </>\n    )\n}\n\nexport default ModalPage","import React from 'react';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { Theme } from 'types/theme';\nimport { themeState  } from 'store/theme';\n\nconst getButtonStyle = (theme: string, color: string) => {\n    switch(theme){\n        case 'light':\n        default:\n            return `\n                background-color: ${color};\n                color: white;\n            `\n        case 'dark':\n            return `\n                background-color: transparent;\n                color: ${color};\n                border: 1px solid ${color};\n            `\n    }\n}\n\ninterface StyledButtonProperty extends ButtonProperty {\n    themeType: Theme;\n}\n\nconst StyledButton = styled.button<StyledButtonProperty>`\n    cursor: pointer;\n    border-radius: 50px;\n    padding: 10px 20px;\n    margin: 0;\n    letter-spacing: 1px;\n    text-align: center;\n    transition: 0.3s all;\n    font-size: 13px;\n    ${({themeType, color}) => getButtonStyle(themeType, color)}\n\n    &.small {\n        padding: 5px 8px;\n    }\n`\n\ninterface ButtonProperty {\n    className?: string;\n    onClick: (e: React.MouseEvent<HTMLElement>) => void;\n    children: React.ReactNode;\n    color: string;\n    type?: 'submit' | 'button';\n    size?: 'normal' | 'small';\n}\n\nconst Button = (props: ButtonProperty ) => {\n    const [theme] = useRecoilState(themeState);\n    const { \n        className, \n        children, \n        onClick = () => {},\n        color,\n        type = 'button',\n        size = 'normal'\n    } = props\n\n    return (\n    <StyledButton\n        type={type}\n        themeType={theme}\n        color={color}\n        className={classnames(className, size)}\n        onClick={onClick}\n    >\n        {children}\n    </StyledButton>\n    )\n}\n\nexport default Button;","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from \"style/theme\";\n\ninterface InputProperty  {\n    className: string;\n    value: string;\n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n    maxLength: number;\n    onFocus?: () => void;\n    placeholder?: string;\n}\nconst Input = (props: InputProperty) => {\n    const {\n        className,\n        value,\n        placeholder,\n        onChange = () => {},\n        onFocus = () => {},\n        maxLength = 10\n    } = props;\n\n    return (\n        <input\n            className={className}\n            maxLength={maxLength}\n            placeholder={placeholder}\n            onChange={onChange}\n            onFocus={onFocus}\n            value={value}\n            type=\"text\" />\n    )\n}\n\nconst styledInput = styled(Input)`\n    user-select: auto;\n    width: 50%;\n    display: block;\n    font-size: 13px;\n    text-align: center;\n    color: ${color.$title_font_color};\n    background-color: transparent;\n    border: none;\n    border-radius: 0;\n\n    &:active,\n    &:focus {\n        outline: none;\n    }\n`\n\nexport default styledInput;","import { useState } from 'react';\n\ntype Values = {\n    gameRoomName: string;\n    warnMessage: string;\n}\n\ntype Handlers = {\n    setRoomName: React.Dispatch<React.SetStateAction<string>>;\n    setWarnMessage: React.Dispatch<React.SetStateAction<string>>\n    validateRoomName: () => boolean;\n}\n\nconst useGameRoomName = (): [Values, Handlers] => {\n    const [gameRoomName, setRoomName] = useState('');\n    const [warnMessage, setWarnMessage] = useState('');\n\n    const validateRoomName = () => {\n        const regex = /^[^.]*$/g;\n        const isVaild = regex.test(gameRoomName);\n\n\t\tif (!isVaild) {\n\t\t\tsetWarnMessage('請勿輸入 . 作為房間名');\n\t\t\treturn false;\n\t\t}\n\n\t\tsetWarnMessage('');\n\t\treturn true;\n\t};\n\n    return [\n        { gameRoomName, warnMessage },\n        { setRoomName, setWarnMessage, validateRoomName }\n    ]\n}\n\nexport default useGameRoomName;\n","const generateUniqueId = () => Math.random().toString(36).substring(5,11);\n\nexport default generateUniqueId;","import {\n    atom, selector,\n} from 'recoil';\nimport { PlayerData, TeamTypes } from 'types/player';\n\nimport { userNameState } from './user';\n\nexport const playersData = atom({\n    key: 'playersData',\n    default: [] as PlayerData[],\n})\n\nexport const teamArray = selector({\n    key: 'teamState',\n    get: ({get}) => {\n        const team = get(playersData);\n        return team.map(data=>data.team);\n    }\n})\n\nexport const OrderedStartFromTeamOne = selector({\n    key: 'OrderedStartFromTeamOne',\n    get: ({get}) => {\n        const playerDataState = get(playersData);\n        const firstPlayer = playerDataState.filter(player=>player.team === TeamTypes.TeamOne)[0];\n        const secondPlayer = playerDataState.filter(player=>player.team === TeamTypes.TeamTwo)[0];\n        const thirdPlayer = playerDataState.filter(player=>player.team === TeamTypes.TeamOne)[1];\n        const lastPlayer = playerDataState.filter(player=>player.team === TeamTypes.TeamTwo)[1];\n        const result = [firstPlayer,secondPlayer,thirdPlayer,lastPlayer]\n            .map(playerData=>playerData.name);\n        return result\n    }\n})\n\nconst handleIndex = (index: number) => {\n    if(index > 3) {\n        return index - 4\n    } else {\n        return index\n    }\n}\n\nexport const relationWithUser = selector({\n    key: 'relationWithUser',\n    get: ({get}) => {\n        const playerDataState = get(OrderedStartFromTeamOne);\n        const user = get(userNameState);\n        const userIndex = playerDataState.indexOf(user);\n        const nextIndex = handleIndex(userIndex + 1);\n        const teammateIndex = handleIndex(userIndex + 2);\n        const previousIndex = handleIndex(userIndex + 3);\n        return {\n            user,\n            teammate: playerDataState[teammateIndex],\n            nextPlayer: playerDataState[nextIndex],\n            previousPlayer: playerDataState[previousIndex],\n        }\n    }\n})","export enum CardSuitType {\n\tSpade = 'spade',\n\tHeart = 'heart',\n\tDiamond = 'diamond',\n\tClub = 'club',\n}\n\nexport enum SuitColorType {\n\tRed = 'red',\n\tBlack = 'black',\n}\n\nexport type SuitColor =  SuitColorType.Black | SuitColorType.Red;\n\nexport type Suits = CardSuitType.Spade | CardSuitType.Heart | CardSuitType.Diamond | CardSuitType.Club;\n\nexport type OtherPlayerDeck = {\n\t[key: string]: number;\n}\n\nexport interface Card {\n\tsuit: CardSuitType;\n\tnumber: number;\n}","import {\n    atom, selector,\n} from 'recoil';\n\nimport { playersData } from './players';\nimport { TeamTypes } from 'types/player';\n\nexport const userNameState = atom({\n    key: 'userNameState',\n    default: '' as string,\n});\n\nexport const userIDState = atom({\n    key: 'userIDState',\n    default: '' as string,\n});\n\nexport const userRoomState = atom({\n    key: 'userRoomState',\n    default: '' as string,\n});\n\nexport const userIndexState = selector({\n    key: 'userIndexState',\n    get: ({get}) => {\n        const userName = get(userNameState);\n        const playerList = get(playersData);\n        return playerList.findIndex(data=>data.name===userName) as number;\n    }\n})\n\nexport const userTeamState = selector({\n    key: 'userTeamState',\n    get:  ({get}) => {\n        const userName = get(userNameState);\n        const playerList = get(playersData);\n        if(!playerList.length) return null\n        return playerList.find(data=>data.name===userName)?.team as TeamTypes | null;\n    }\n})\n\nexport const userReadyState = selector({\n    key: 'userReadyState',\n    get:  ({get}) => {\n        const userName = get(userNameState);\n        const playerList = get(playersData);\n        if(!playerList.length) return false;\n        return playerList.find(data=>data.name===userName)?.ready as boolean;\n    }\n})\n\nexport const navState = atom({\n    key: 'navState',\n    default: null as string | null,\n})","import { useRecoilValue, useSetRecoilState } from \"recoil\";\nimport db from \"database\";\nimport { useHistory } from \"react-router-dom\";\nimport generateUniqueId from \"util/generateUniqueId\";\nimport { userIDState, userNameState, userRoomState } from \"store/user\";\n\ntype Values = {}\n\ntype Handlers = {\n    updateDbRoomData: (roomID: string, roomName?: string) => Promise<void>;\n}\n\nconst useFirebaseRoom = (): [Values, Handlers] => {\n    const setUserID = useSetRecoilState(userIDState);\n    const userName = useRecoilValue(userNameState);\n\tconst setLocalRoom = useSetRecoilState(userRoomState);\n    const history = useHistory();\n    \n\tconst updateDbRoomData = async (roomID: string, roomName?: string) => {\n\t\tconst roomRef = db.database().ref(`/${roomID}`);\n\t\tconst userID = generateUniqueId() as string;\n\t\tconst current = new Date();\n\t\tconst timestamp = Date.parse(current.toString()) as number;\n        const userInfo = { timestamp, id: userID, name: userName };\n\t\tsetLocalRoom(roomID);\n\t\tsetUserID(userID);\n\n\t\tif (roomName) {\n\t\t\tawait roomRef.update({ \n\t\t\t\troomName,\n\t\t\t\tplayersInfo: {\n\t\t\t\t\t[userID]: userInfo\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tawait roomRef.child('playersInfo')\n\t\t\t.child(userID)\n\t\t\t.update(userInfo);\n\t\t}\n\n\t\tconst toPath = `/w/${roomID}/${userID}`\n\t\thistory.push(toPath);\n\t}\n\n    return [\n        {},\n        { updateDbRoomData }\n    ]\n}\n\nexport default useFirebaseRoom;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/theme'\nimport { useSetRecoilState, useRecoilState } from \"recoil\";\n\nimport Modal from \"components/Global/Modal\";\nimport Button from 'components/Global/Button';\nimport Input from 'components/Global/Input';\n\nimport { RoomList } from 'types/room';\nimport userGameRoomName from \"util/hook/useGameRoomName\";\nimport useFirebaseRoom from \"util/hook/useFirebaseRoom\";\nimport generateUniqueId from \"util/generateUniqueId\";\nimport { userRoomState } from \"store/user\";\nimport { themeState } from 'store/theme';\n\nconst themeData = {\n\tlight: {\n\t\tbg: 'white',\n\t\tfg: color.$brown_color,\n\t\tboxBorder: 'none',\n\t\tcancel_bg: color.$warn_red_color,\n\t\tcancel_fg: 'white',\n\t\ttitle_bg: color.$pink_color,\n\t\ttitle_fg: 'white',\n\t\tsub_title_fg: '#888',\n\t\tsub_title_bb: color.$under_line_color,\n\t},\n\tdark: {\n\t\tbg: color.$dark_bg_color,\n\t\tfg: color.$fluorescent_pink_color,\n\t\tboxBorder: '1px solid' + color.$fluorescent_pink_color,\n\t\tcancel_bg: color.$dark_bg_color,\n\t\tcancel_fg: color.$fluorescent_pink_color,\n\t\ttitle_bg: color.$dark_bg_color,\n\t\ttitle_fg: color.$fluorescent_pink_color,\n\t\tsub_title_fg: '#E5D5D5',\n\t\tsub_title_bb: color.$dark_dim_border_color,\n\t},\n}\n\n\nconst Content = styled.div`\n\twidth: 80vw;\n\tposition: absolute;\n\tborder-radius: 10px;\n\toverflow: hidden;\n\tposition: relative;\n\tborder: ${({ theme }) => theme.boxBorder};\n\tbackground-color: ${({ theme }) => theme.bg};\n\n\t.cancel_button {\n\t\tfont-size: 14px;\n\t\tposition: absolute;\n\t\tcursor: pointer;\n\t\tborder-radius: 50%;\n\t\tpadding: 3px;\n\t\tright: 5px;\n\t\ttop: 5px;\n\t\tcolor: ${({ theme }) => theme.cancel_fg};\n\t\tborder: ${({ theme }) => theme.boxBorder};\n\t\tbackground-color: ${({ theme }) => theme.cancel_bg};\n\t}\n\n\t& > .title {\n\t\tpadding: 15px;\n\t\ttext-align: center;\n\t\tfont-size: 20px;\n\t\tletter-spacing: 2px;\n\t\tcolor: ${({ theme }) => theme.title_fg};\n\t\tbackground-color: ${({ theme }) => theme.title_bg};\n\t\tborder-bottom: ${({ theme }) => theme.box_border};\n\t}\n\n\t.block {\n\t\tpadding: 15px 15px 5px;\n\n\t\t.title {\n\t\t\tmargin: 0;\n\t\t\ttext-align: center;\n\t\t\tpadding-bottom: 5px;\n\t\t\tfont-size: 14px;\n\t\t\tletter-spacing: 1px;\n\t\t\tcolor: ${({ theme }) => theme.sub_title_fg};;\n\t\t\tborder-bottom: 1.5px solid ${({ theme }) => theme.sub_title_bb};\n\t\t}\n\n\t\t&.join_exist_room {\n\t\t\t.room_list {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tmargin-top: 10px;\n\t\t\t\tmax-height: 150px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\n\t\t\t.no_room {\n\t\t\tmargin-top: 15px;\n\t\t\tcolor: ${color.$unable_color};\n\t\t\ttext-align: center;\n\t\t\tfont-size: 14px;\n\t\t\tletter-spacing: 1px;\n\t\t\t}\n\n\t\t\t.room {\n\t\t\tmargin-bottom: 10px;\n\t\t\tfont-size: 16px;\n\t\t\tletter-spacing: 1px;\n\t\t\t}\n\t\t}\n\n\t\t&.create_room {\n\t\t\t.content {\n\t\t\tpadding: 10px;\n\t\t\tbox-sizing: border-box;\n\n\t\t\t\tform {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\n\t\t\t\t\t.room_name {\n\t\t\t\t\t\tmargin-right: 20px;\n\t\t\t\t\t\ttext-align: left;\n\t\t\t\t\t\tfont-size: 18px;\n\t\t\t\t\t\tletter-spacing: 2px;\n\t\t\t\t\t\tcolor: ${({ theme }) => theme.fg};\n\t\t\t\t\t\tborder-bottom: 2px solid ${color.$unable_color};\n\n\t\t\t\t\t\t&::placeholder {\n\t\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\t\tcolor: ${color.$unable_color};\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\tmargin: 10px 0 0;\n\t\t\t\t\t\t\tletter-spacing: 2px;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.warn_message {\n\t\t\t\t\tmargin: 10px 0 0;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tletter-spacing: 1px;\n\t\t\t\t\tcolor: ${color.$warn_red_color};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\ninterface CreateButtonProperty {\n\tonClick: (e: React.MouseEvent<HTMLElement>) => void;\n\tclassName: string;\n\tisLengthValid: boolean;\n\tchildren: React.ReactNode;\n}\nconst CreateButton = (props: CreateButtonProperty) => {\n\tconst { onClick, className, isLengthValid } = props;\n\tconst [theme] = useRecoilState(themeState);\n\tconst getButtonColor = () => {\n\t\tswitch (theme) {\n\t\t\tcase 'light':\n\t\t\tdefault:\n\t\t\t\treturn isLengthValid ? color.$highlight_color : color.$unable_color;\n\t\t\tcase 'dark':\n\t\t\t\treturn isLengthValid ? color.$fluorescent_pink_color : color.$dark_dim_border_color;\n\t\t}\n\t};\n\treturn (\n\t\t<Button\n\t\t\tcolor={getButtonColor()}\n\t\t\tonClick={(e) => {\n\t\t\t\tif (!isLengthValid) return;\n\t\t\t\tonClick(e)\n\t\t\t}}\n\t\t\tclassName={className}\n\t\t>建立</Button>\n\t)\n};\n\ninterface RoomButtonProperty {\n\tonClick: () => void;\n\tclassName: string;\n\troomName: string;\n}\n\nconst RoomButton = (props: RoomButtonProperty) => {\n\tconst { onClick, className, roomName } = props;\n\tconst [theme] = useRecoilState(themeState);\n\tconst getButtonColor = () => {\n\t\tswitch (theme) {\n\t\t\tcase 'light':\n\t\t\tdefault:\n\t\t\t\treturn color.$green_color\n\t\t\tcase 'dark':\n\t\t\t\treturn color.$fluorescent_pink_color\n\t\t}\n\t}\n\n\treturn (\n\t\t<Button\n\t\t\tclassName={className}\n\t\t\tonClick={onClick}\n\t\t\tcolor={getButtonColor()}>\n\t\t\t{roomName}\n\t\t</Button>)\n}\n\ninterface RoomDialogProperty {\n\tclassName: string;\n\tactive: Boolean;\n\troomList: RoomList;\n\tcloseRoomList: (e: React.MouseEvent<HTMLElement>) => void;\n}\nconst RoomDialog = (props: RoomDialogProperty) => {\n\tconst { active, className, closeRoomList, roomList } = props;\n\tconst [theme] = useRecoilState(themeState);\n\tconst [\n\t\t{ gameRoomName, warnMessage },\n\t\t{ setRoomName, validateRoomName, setWarnMessage }\n\t] = userGameRoomName();\n\tconst [,{ updateDbRoomData }] = useFirebaseRoom();\n\tconst setLocalRoom = useSetRecoilState(userRoomState);\n\n\tconst createRoom = (e: React.MouseEvent<HTMLElement>) => {\n\t\te.preventDefault();\n\t\tconst isValid = validateRoomName();\n\n\t\tif (isValid) {\n\t\t\tconst roomID = generateUniqueId();\n\t\t\tsetLocalRoom(roomID);\n\t\t\tupdateDbRoomData(roomID, gameRoomName);\n\t\t}\n\t}\n\n\tconst pickExistRoom = (roomID: string) => {\n\t\tsetLocalRoom(roomID);\n\t\tupdateDbRoomData(roomID);\n\t}\n\n\treturn (\n\t\t<Modal\n\t\t\tactive={active}\n\t\t\tonDeactive={(e: React.MouseEvent<HTMLElement>) => {\n\t\t\t\tcloseRoomList(e);\n\t\t\t}}\n\t\t\tclassName={className}>\n\t\t\t<Content\n\t\t\t\ttheme={themeData[theme]}\n\t\t\t\tonClick={e => e.stopPropagation()}\n\t\t\t\tclassName=\"content\">\n\t\t\t\t<button\n\t\t\t\t\tonClick={(e) => closeRoomList(e)}\n\t\t\t\t\tclassName=\"cancel_button\">×</button>\n\t\t\t\t<div className=\"title\">選擇或創建房間</div>\n\t\t\t\t<div className=\"room_choose\">\n\t\t\t\t\t<div className=\"block join_exist_room\">\n\t\t\t\t\t\t<p className=\"title\">選擇已經存在的房間</p>\n\t\t\t\t\t\t{!roomList.length\n\t\t\t\t\t\t\t? <p className=\"no_room\">目前尚無空房</p>\n\t\t\t\t\t\t\t: <div className=\"room_list\">\n\t\t\t\t\t\t\t\t{roomList.map(room => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<RoomButton\n\t\t\t\t\t\t\t\t\t\t\tkey={room.roomID}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => pickExistRoom(room.roomID)}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"room\"\n\t\t\t\t\t\t\t\t\t\t\troomName={room.roomName} />)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"block create_room\">\n\t\t\t\t\t\t<p className=\"title\">建立一個房間</p>\n\t\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tclassName=\"room_name\"\n\t\t\t\t\t\t\t\t\tvalue={gameRoomName}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tsetWarnMessage('');\n\t\t\t\t\t\t\t\t\t\tsetRoomName(e.target.value)\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tmaxLength={20}\n\t\t\t\t\t\t\t\t\tplaceholder=\"請輸入3-20字元\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<CreateButton\n\t\t\t\t\t\t\t\t\tclassName='create_button'\n\t\t\t\t\t\t\t\t\tisLengthValid={gameRoomName.length > 2}\n\t\t\t\t\t\t\t\t\tonClick={e => createRoom(e)}\n\t\t\t\t\t\t\t\t>建立</CreateButton>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t{warnMessage && <p className='warn_message'>{warnMessage}</p>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div >\n\t\t\t</Content >\n\t\t</Modal >\n\t);\n}\n\nexport default RoomDialog;","import { useState } from 'react';\nimport { useRecoilState } from \"recoil\";\nimport { userNameState } from \"store/user\";\n\ntype Values = {\n    userName: string;\n    warnMessage: string;\n}\n\ntype Handlers = {\n    setUserName: React.Dispatch<React.SetStateAction<string>>;\n    setWarnMessage: React.Dispatch<React.SetStateAction<string>>\n    validateUserName: () => boolean;\n}\n\nconst useUserName = (): [Values, Handlers] => {\n    const [userName, setUserName] = useRecoilState(userNameState);\n    const [warnMessage, setWarnMessage] = useState('');\n\n    const validateUserName = () => {\n        const regex = /^[^.]*$/g;\n        const isVaild = regex.test(userName);\n\n        if (!userName) {\n            setWarnMessage('請輸入至少一個字');\n\t\t\treturn false;\n        }\n\n\t\tif (!isVaild) {\n\t\t\tsetWarnMessage('請勿輸入 . 作為名字');\n\t\t\treturn false;\n\t\t}\n\n\t\tsetWarnMessage('');\n\t\treturn true;\n\t};\n\n    return [\n        { userName, warnMessage },\n        { setUserName, setWarnMessage, validateUserName }\n    ]\n}\n\nexport default useUserName;\n","import React from \"react\";\nimport { useRecoilValue } from \"recoil\";\n\nimport Input from \"components/Global/Input\";\nimport Button from \"components/Global/Button\";\n\nimport useUserName from \"util/hook/useUserName\";\nimport { themeState } from 'store/theme';\nimport styled from \"styled-components\";\nimport { color } from \"style/theme\";\n\nconst themeData = {\n\tlight: {\n\t\tfg: color.$title_font_color,\n\t\tname_fg: color.$title_font_color,\n\t\tborder: color.$title_font_color,\n\t\tbutton_color: color.$pink_color,\n\t},\n\tdark: {\n\t\tfg: color.$dark_default_font_color,\n\t\tname_fg: color.$fluorescent_pink_color,\n\t\tborder: color.$dark_border_color,\n\t\tbutton_color: color.$fluorescent_pink_color,\n\t},\n}\n\nconst NameForm = styled.form`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\n\tp {\n\t\tfont-size: 22px;\n\t\tletter-spacing: 3px;\n\t\tmargin: 0 0 25px 0;\n\t\ttransition: .3s all;\n\t\tcolor: ${({ theme }) => theme.fg};\n\t}\n\n\t.name_space{\n\t\tpadding: 5px;\n\t\tfont-size: 22px;\n\t\tline-height: 25px;\n\t\tletter-spacing: 2px;\n\t\tcolor: ${({ theme }) => theme.name_fg};\n\t\tborder-bottom: 2px solid ${({ theme }) => theme.border};\n\t}\n\n\t.warn_message {\n\t\tmargin-top: 10px;\n\t\tcolor: ${({ theme }) => theme.name_fg};\n\t\topacity: 0.6;\n\t\tletter-spacing: 1px;\n\t}\n\n\t.enter_button {\n\t\tmargin-top: 20px;\n        min-width: 50%;\n        font-size: 18px;\n        letter-spacing: 3px;\n\t}\n`;\n\ninterface NameFillInProperty {\n\tonEnter: () => void;\n    buttonText: string;\n    actionText?: string;\n}\n\nconst NameFillIn = (props: NameFillInProperty) => {\n\tconst { onEnter, actionText, buttonText } = props;\n\tconst [\n\t\t{ userName, warnMessage },\n\t\t{ setUserName, validateUserName, setWarnMessage }\n\t] = useUserName();\n\n\tconst theme = useRecoilValue(themeState);\n\tconst handleButtonClick = (e: React.MouseEvent<HTMLElement>) => {\n\t\te.preventDefault();\n\t\tconst isValid = validateUserName();\n\n\t\tif (isValid) {\n\t\t\tonEnter();\n\t\t}\n\t};\n\n\treturn (\n\t\t<NameForm theme={themeData[theme]} id=\"name\" className=\"user_input\">\n\t\t\t{actionText && <p>{actionText}</p>}\n\t\t\t<Input\n\t\t\t\tclassName=\"name_space\"\n\t\t\t\tonFocus={() => setWarnMessage('')}\n\t\t\t\tmaxLength={8}\n\t\t\t\tonChange={(e) => setUserName(e.target.value)}\n\t\t\t\tvalue={userName}\n\t\t\t/>\n\t\t\t{warnMessage && <span className=\"warn_message\">{warnMessage}</span>}\n\t\t\t<Button\n\t\t\t\tclassName=\"enter_button\"\n\t\t\t\tcolor={themeData[theme].button_color}\n\t\t\t\tonClick={handleButtonClick}\n\t\t\t\ttype=\"submit\"\n\t\t\t>\n\t\t\t\t{buttonText}\n\t\t\t</Button>\n\t\t</NameForm>\n\t);\n};\n\nexport default NameFillIn","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/theme';\nimport classnames from 'classnames';\nimport { themeState } from 'store/theme';\nimport { Theme, ThemeTypes } from 'types/theme';\nimport { useRecoilState } from 'recoil';\n\n\nconst Toggler = styled.div`\n    display: flex;\n    align-items: center;\n    width: 40px;\n    height: 17px;\n    padding: 2px;\n    border-radius: 40px;\n    transition: 0.3s all;\n    cursor: pointer;\n\n    .toggle_button {\n        background-color: white;\n        width: 17px;\n        height: 17px;\n        border-radius: 100%;\n        transition: 0.3s all;\n        cursor: pointer;\n        padding: 0;\n    }\n\n    &.on_page {\n\t\tposition: absolute;\n\t\ttop: 20px;\n\t\tright: 20px;\n\t}\n\n    &.light_mode {\n        background-color: ${color.$pink_color};\n        border: 1px solid transparent;\n        justify-content: flex-start;\n        .toggle_button {\n            margin-left: 0;\n        }\n    }\n\n    &.dark_mode {\n        background-color: ${color.$dark_dim_bg_color};\n        border: 1px solid ${color.$dark_border_color};\n        .toggle_button {\n            margin-left: calc( 40px - 17px);\n        }\n    }\n`\ninterface ThemeTogglerProperty {\n    className?: string;\n}\n\nconst ThemeToggler = (props: ThemeTogglerProperty) => {\n    const { className } = props;\n    const [theme, toggleTheme] = useRecoilState(themeState);\n\n    const setTheme = (theme: Theme) => {\n        toggleTheme(theme);\n        localStorage.setItem('cake-and-bridge-theme', JSON.stringify(theme));\n    }\n\n    const handleToggleTheme = () => {\n        theme === ThemeTypes.Light\n            ? setTheme(ThemeTypes.Dark)\n            : setTheme(ThemeTypes.Light);\n    };\n\n    return (\n        <Toggler\n            onClick={handleToggleTheme}\n            className={classnames(\"theme_toggler\", className, {\n                'light_mode': theme === ThemeTypes.Light,\n                'dark_mode': theme === ThemeTypes.Dark,\n            })}>\n            <button\n                className=\"toggle_button\" />\n        </Toggler>\n    )\n}\n\nexport default ThemeToggler;","import {\n    atom\n} from 'recoil';\n\nexport const modalState = atom({\n    key: 'modalState',\n    default: null as string | null,\n});","import {\n    atom, selector,\n} from 'recoil';\n\nimport { Card, OtherPlayerDeck } from 'types/card';\n\nexport const userDeckState = atom({\n    key: 'userDeckState',\n    default: [] as Card[],\n});\n\n\n\nexport const otherPlayerDeckState = atom({\n    key: 'otherPlayerDeckState',\n    default: {} as OtherPlayerDeck,\n});\n\nexport const badDeck = selector({\n    key: 'backDeck',\n    get: ({ get }) => {\n        const userDeck = get(userDeckState);\n        if (userDeck.length === 13) {\n            const deckPoint = userDeck\n                .map((card) => card.number)\n                .reduce((a, b) => {\n                    const point = b > 9 ? b - 9 : 0;\n                    return a + point;\n                }, 0);\n            return deckPoint > 3 ? false : true;\n        } else {\n            return false;\n        }\n    }\n});\n\nexport const responseToBadDeck = atom({\n    key: 'responseToBadDeck',\n    default: null as Boolean | null,\n})\n\nexport const OKtoPlay = selector({\n    key: 'OKtoPlay',\n    get: ({ get }) => {\n        const isBadLuck = get(badDeck);\n        if(!isBadLuck) {\n            return true;\n        } else {\n            const isOKtoPlayWithBadDeck = get(responseToBadDeck);\n            if(isOKtoPlayWithBadDeck){\n                return true\n            } else {\n                return false\n            }\n        }\n    }\n});","import {\n    atom, selector\n} from 'recoil';\n\nimport { CardSuitType, Card } from 'types/card';\nimport { CalledBind } from 'types/bind';\nimport { playersData } from './players';\nimport { TeamTypes } from 'types/player';\n\nexport const userPickBindState = atom({\n    key: 'userPickBind',\n    default: null as null | Card,\n});\n\nexport const nowBindState = atom({\n    key: 'nowBindState',\n    default: { player: null, number:0, suit: CardSuitType.Club },\n});\n\nexport const userPassState = atom({\n    key: 'userPassState',\n    default: false as Boolean,\n});\n\nexport const playersCalledListState = atom({\n    key: 'playersCalledListState',\n    default: {} as { [key: string]: CalledBind[] },\n});\n\nexport const availibleTricksState = selector({\n    key: 'availibleTricksState',\n    get: ({get}) => {\n        const { number, suit} = get(nowBindState);\n        const tricks = [1, 2, 3, 4, 5, 6]\n        let min: number;\n        if(suit === CardSuitType.Spade) {\n            min =  number + 1;\n        } else {\n            min =  number;\n        }\n        const tricksArray = tricks.filter(trick => trick >= min)\n        return tricksArray;\n    }},\n);\n\nexport const teamShouldWinState = selector({\n    key: 'teamShouldWinState',\n    get: ({get}) => {\n        const {player: calledPlayer, number} = get(nowBindState);\n        if(!number || number === 1 ){\n            return {\n                team1: 7,\n                team2: 7,\n            }\n        }\n        const players = get(playersData);\n        const calledTeam = players.find(p => p.name === calledPlayer)?.team || TeamTypes.TeamOne;\n        const anotherTeam = [TeamTypes.TeamOne,TeamTypes.TeamTwo].filter(team=> team !== calledTeam)[0];\n        const calledTeamShouldWin = 6 + number;\n        const anotherTeamShouldWin = 14 - calledTeamShouldWin;\n        return {\n            [calledTeam]: calledTeamShouldWin,\n            [anotherTeam]: anotherTeamShouldWin\n        }\n    }},\n);","import React from 'react';\nimport classnames from 'classnames'\nimport styled from 'styled-components';\nimport { color } from 'style/theme'\nimport { TeamTypes, PlayerData } from 'types/player';\nimport { playersData } from 'store/players';\nimport { useRecoilValue, useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\n\nconst themeData = {\n    light: {\n        w_border: 'none',\n        st_bg: 'rgb(241, 224, 224)',\n        st_border: 'none',\n        cl_bg: 'rgb(206, 190, 180)',\n        cl_border: 'none',\n        name_bg: 'white',\n        name_st_fg: color.$title_font_color,\n        name_cl_fg: color.$title_font_color,\n        ready_fg: color.$title_font_color,\n        ready_bg: '#F3DE93',\n        ready_border: '2px solid white',\n    },\n    dark: {\n        w_border: '1px solid' + color.$dark_dim_border_color,\n        st_bg: color.$dark_dim_bg_color,\n        st_border: '1px solid' + color.$fluorescent_pink_color,\n        cl_bg: color.$dark_dim_bg_color,\n        cl_border: '1px solid' + color.$fluorescent_yellow_color,\n        name_bg: 'transparent',\n        name_st_fg: color.$fluorescent_pink_color,\n        name_cl_fg: color.$fluorescent_yellow_color,\n        ready_fg: color.$title_font_color,\n        ready_bg: 'transparent',\n        ready_border: '2px solid white',\n    },\n}\n\nconst Window = styled.div`\n    border-radius: 5px;\n    overflow: hidden;\n    display: flex;\n    flex-wrap: wrap;\n    width: 90vw;\n    height: 90vw;\n    background-color: ${({ theme }) => theme.st_bg};\n    border: ${({ theme }) => theme.w_border};\n    margin-bottom: 10px;\n\n    .player {\n        flex-basis: 50%;\n        height: 45vw;\n        display: flex;\n        flex-direction: column;\n        letter-spacing: 1px;\n        justify-content: flex-end;\n        align-items: stretch;\n        transition: all 0.3s;\n        position: relative;\n        padding: 15px;\n        box-sizing: border-box;\n\n        &:nth-child(1) {\n            border-right: ${({ theme }) => theme.w_border};\n            border-bottom: ${({ theme }) => theme.w_border};\n        }\n\n        &:nth-child(2) {\n            border-bottom: ${({ theme }) => theme.w_border};\n        }\n\n        &:nth-child(3) {\n            border-right: ${({ theme }) => theme.w_border};\n        }\n\n        &.strawberry_team {\n            background-color: ${({ theme }) => theme.st_bg};\n            \n            .player__name {\n                color: ${({ theme }) => theme.name_st_fg};\n                border: ${({ theme }) => theme.st_border};\n            }\n        }\n\n        &.canele_team {\n            background-color: ${({ theme }) => theme.cl_bg};\n            .player__name {\n                color: ${({ theme }) => theme.name_cl_fg};\n                border: ${({ theme }) => theme.cl_border};\n            }\n        }\n\n        &__name {\n            text-align: center;\n            flex: 0 1 auto;\n            border: 2px solid transparent;\n            border-radius: 20px;\n            font-size: 20px;\n            padding: 7px 10px;\n            margin: 0;\n            position: relative;\n            transition: 0.3s all;\n            background-color: ${({ theme }) => theme.name_bg};\n        }\n    }    \n`\n\ninterface PlayerBoxProperty {\n    order: PlayerOrders.First | PlayerOrders.Second | PlayerOrders.Third | PlayerOrders.Fourth;\n    playerData: PlayerData;\n}\n\nenum PlayerOrders {\n    First,\n    Second,\n    Third,\n    Fourth\n}\nconst PlayerBox = (props: PlayerBoxProperty) => {\n    const { order, playerData } = props;\n    const playerName = playerData ? playerData.name : '';\n\n    const defaultTeam =\n        order === PlayerOrders.First || order === PlayerOrders.Fourth\n            ? TeamTypes.TeamOne\n            : TeamTypes.TeamTwo;\n    const playerTeam = playerData ? playerData.team : defaultTeam\n\n    return (\n        <div\n            className={classnames(\n                'player',\n                `player__${order}`, {\n                'strawberry_team': playerTeam === TeamTypes.TeamOne,\n                'canele_team': playerTeam === TeamTypes.TeamTwo,\n            })}>\n            {playerName &&\n                <p className={classnames('player__name', { 'ready_to_go': playerData.ready })}>\n                    {playerName}\n                </p>\n            }\n        </div>\n    )\n}\n\nconst PlayerWindow = () => {\n    const [theme] = useRecoilState(themeState);\n    const playerList = useRecoilValue(playersData);\n    const playersOrder = [PlayerOrders.First, PlayerOrders.Second, PlayerOrders.Third, PlayerOrders.Fourth];\n    return (\n        <Window\n            theme={themeData[theme]}\n            className=\"player_window\">\n            {playersOrder.map((order, index) => (\n                <PlayerBox \n                    key={order} \n                    order={order}\n                    playerData={playerList[index]} \n                />))}\n        </Window >\n    )\n};\n\nexport default PlayerWindow;","import {\n    atom\n} from 'recoil';\n\nimport { ScoreData } from 'types/score';\n\nconst defaultState: ScoreData = { team1: 0, team2: 0}\n\nexport const teamScoresState = atom({\n    key: 'teamScoresState',\n    default: defaultState\n});","import {\n    atom, selector,\n} from 'recoil';\nimport { Suits, Card } from 'types/card'\nimport { userNameState } from './user';\nimport { teamShouldWinState } from './bind';\nimport { teamScoresState } from './score';\nimport { TeamTypes } from 'types/player';\n\nexport const currentPlayerName = atom({\n    key: 'currentPlayerName',\n    default: '' as string,\n});\n\nexport const thisRoundSuitState = atom({\n    key: 'thisRoundSuit',\n    default: null as null | Suits,\n});\n\nexport const thisRoundCardsState = atom({\n    key: 'thisRoundCardsState',\n    default: [] as Card[],\n});\n\nexport const trumpState = atom({\n    key: 'trumpState',\n    default: null as null | Card,\n})\n\nexport const isUserTurnState = selector({\n    key: 'isUserTurnState',\n    get: ({get}) => {\n        const nowPlayer = get(currentPlayerName);\n        const userName = get(userNameState);\n        return userName === nowPlayer;\n    }\n})\n\nexport const isUserLastPlayerState = selector({\n    key: 'isUserLastPlayerState',\n    get: ({get}) => {\n        const thisRoundCards = get(thisRoundCardsState);\n        if(thisRoundCards.filter(card => typeof card === 'object').length === 3) {\n            return true\n        } else {\n            return false\n        }\n    }\n});\n\nexport const isThisRoundEndState = selector({\n    key: 'isThisRoundEndState',\n    get: ({get}) => {\n        const thisRoundCards = get(thisRoundCardsState);\n        if(thisRoundCards.filter(card => typeof card === 'object').length === 4) {\n            return true\n        } else {\n            return false\n        }\n    }\n})\n\nexport const isGameEndState = selector({\n    key: 'isGameEndState',\n    get: ({ get }) => {\n        const { team1: team1ShouldWin, team2: team2ShouldWin } = get(teamShouldWinState);\n        const { team1: team1Score, team2: team2Score } = get(teamScoresState);\n\n        if(team1ShouldWin === team1Score){\n            return TeamTypes.TeamOne;\n        } else if (team2ShouldWin === team2Score) {\n            return TeamTypes.TeamTwo;\n        } else {\n            return null;\n        }\n    }\n})\n","import { atom } from 'recoil';\nimport { Card } from 'types/card';\n\nexport const userWinTricksState = atom({\n    key: 'userWinTricksState',\n    default: [] as Card[][],\n});\n","import { useResetRecoilState } from \"recoil\";\nimport { userNameState, userRoomState, userIDState } from 'store/user';\nimport { modalState } from 'store/modal';\nimport { userDeckState } from 'store/deck';\nimport { thisRoundCardsState, trumpState } from 'store/game';\nimport { playersData } from 'store/players';\nimport { teamScoresState } from 'store/score';\nimport { userWinTricksState } from 'store/winTricks';\nimport {  userPickBindState, nowBindState, userPassState, playersCalledListState } from 'store/bind';\n\n\nconst useInitData = () => {\n    const initUserName = useResetRecoilState(userNameState);\n\tconst initUserRoom = useResetRecoilState(userRoomState);\n\tconst initUserID = useResetRecoilState(userIDState);\n    const initModalType = useResetRecoilState(modalState);\n    const initUserDeck = useResetRecoilState(userDeckState);\n    const initScore = useResetRecoilState(teamScoresState);\n    const initUserPickBind = useResetRecoilState(userPickBindState);\n    const initNowBind = useResetRecoilState(nowBindState);\n    const initPassState = useResetRecoilState(userPassState);\n    const initRoundCards = useResetRecoilState(thisRoundCardsState);\n    const initTrump = useResetRecoilState(trumpState);\n    const initCalledList = useResetRecoilState(playersCalledListState);\n    const initWinTricks = useResetRecoilState(userWinTricksState);\n    const initPlayerData = useResetRecoilState(playersData);\n\n    const initUserData = () => {\n        initUserName();\n\t\tinitUserRoom();\n        initUserID();\n    }\n\n    const initGameRoomData = () => {\n        initUserDeck();\n        initModalType();\n        initScore();\n        initUserPickBind();\n        initNowBind();\n        initPassState();\n        initCalledList();\n        initRoundCards();\n        initTrump();\n        initWinTricks();\n    }\n\n    const initGameData = () => {\n        initUserData();\n        initGameRoomData();\n        initPlayerData();\n    }\n\n    return [{ initGameData, initGameRoomData }]\n}\n\nexport default useInitData;","import React, { useState } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport db from \"database\";\n\nimport Logo from \"components/Home/Logo\";\nimport RoomDialog from \"components/Home/RoomDialog\";\nimport NameFillIn from \"components/Global/NameFillIn\";\nimport ThemeToggler from 'components/Global/ThemeToggler';\n\nimport { RoomList, FirebaseRoomsData } from 'types/room';\n\nimport useInitData from \"util/hook/useInitData\";\nimport { themeState } from 'store/theme';\nimport styled from \"styled-components\";\nimport { color } from \"style/theme\";\n\nconst themeData = {\n\tlight: {\n\t\tbg: color.$theme_background,\n\t},\n\tdark: {\n\t\tbg: color.$dark_bg_color,\n\t},\n}\n\nconst HomePage = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-around;\n\ttransition: .3s background-color;\n    background-color: ${({ theme }) => theme.bg};\n`;\n\nconst Home = () => {\n\tconst [showRoomDialog, toggleRoomDialog] = useState<boolean>(false);\n\tconst [roomList, setRoomList] = useState<RoomList>([]);\n\tconst [{ initGameData }] = useInitData();\n\tconst theme = useRecoilValue(themeState);\n\n\tReact.useEffect(() => {\n\t\tinitGameData();\n\t\tsubscribeRooms();\n\t\treturn () => removeListeners();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n\n\tconst subscribeRooms = () => {\n\t\tconst Firebase = db.database().ref(\"/\");\n\t\tFirebase.on(\"value\", async (data) => {\n\t\t\tconst roomsData = data.val() as FirebaseRoomsData;\n\t\t\tif (!roomsData) {\n\t\t\t\tsetRoomList([]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst filterOutAbandonedRoom = Object.entries(roomsData)\n\t\t\t\t.filter(data => data[1].playersInfo)\n\t\t\t\t.reduce((obj, data) => ({\n\t\t\t\t\t...obj,\n\t\t\t\t\t[data[0]]: data[1]\n\t\t\t\t}), {});\n\n\t\t\tawait Firebase.set(filterOutAbandonedRoom);\n\t\n\t\t\tconst rooms = Object.entries(roomsData)\n\t\t\t\t.map(room => ({\n\t\t\t\t\troomID: room[0],\n\t\t\t\t\t...room[1]\n\t\t\t\t}))\n\t\t\t\t.filter(room => {\n\t\t\t\t\treturn room.playersInfo && Object.values(room.playersInfo).length < 4;\n\t\t\t\t});\n\n\t\t\tsetRoomList(rooms as RoomList);\n\t\t});\n\t};\n\n\tconst removeListeners = () => {\n\t\tconst Firebase = db.database().ref(\"/\");\n\t\tFirebase.off();\n\t};\n\n\treturn (\n\t\t<HomePage theme={themeData[theme]}>\n\t\t\t<ThemeToggler className=\"on_page\" />\n\t\t\t<Logo className=\"logo\" />\n\t\t\t<NameFillIn\n\t\t\t\tactionText=\"請輸入名字\"\n\t\t\t\tbuttonText=\"加入遊戲\"\n\t\t\t\tonEnter={() => toggleRoomDialog(true)}\n\t\t\t/>\n\t\t\t<RoomDialog\n\t\t\t\tactive={showRoomDialog}\n\t\t\t\troomList={roomList}\n\t\t\t\tclassName=\"room_list_dialog\"\n\t\t\t\tcloseRoomList={() => toggleRoomDialog(false)}\n\t\t\t/>\n\t\t</HomePage>\n\t);\n};\n\nexport default Home;\n","import React from 'react';\nimport styled from 'styled-components';\n\n\n\nconst Icon = styled.span<ShareIconProperty>`\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n    border-radius: 10px;\n    background-color: ${props=>props.backgroundColor};\n\n    .outer {\n        display: flex;\n        justify-content: center;\n        width: 14px;\n        height: 7px;\n        box-sizing: border-box;\n        border-radius: 7px;\n        border: 1px solid ${props=>props.iconColor};\n        position: relative;\n\n        &::before {\n            content: '';\n            display: block;\n            height: calc(100% + 4px);\n            width: 3px;\n            background-color: ${props=>props.backgroundColor};\n            position: absolute;\n            top: -2px;\n            left: 50%;\n            transform: translateX(-50%);\n        }\n\n        .inner {\n            width: 6px;\n            height: 1px;\n            margin: auto;\n            background-color: ${props=>props.iconColor};\n            z-index: 2;\n        }\n    }\n\n`\n\ninterface ShareIconProperty {\n    backgroundColor?: string;\n    iconColor?: string;\n}\n\nconst ShareIcon = (props: ShareIconProperty) => {\n    const { backgroundColor = 'white', iconColor = 'black' } = props;\n    return (\n        <Icon\n            backgroundColor={backgroundColor}\n            iconColor={iconColor}\n        >\n            <span className=\"outer\">\n                <span className=\"inner\" />\n            </span>\n        </Icon>\n    )\n};\n\nexport default ShareIcon;\n","const sleep = (ms: number) => {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport default sleep;","import React from \"react\";\nimport { useTransition, animated } from \"react-spring\";\nimport styled from 'styled-components';\nimport { useRecoilValue } from 'recoil';\n\nimport { themeState } from 'store/theme';\nimport { userRoomState } from 'store/user';\nimport ShareIcon from \"components/Global/ShareIcon\";\nimport Button from \"components/Global/Button\";\nimport { color } from 'style/theme';\nimport { useState } from \"react\";\nimport { ThemeTypes } from \"types/theme\";\nimport sleep from \"util/sleep\";\n\nconst themeData = {\n    light: {\n        button_color: '#F0E7CF',\n        icon_color: color.$brown_color,\n        fg: color.$brown_color,\n        modal_color: '#D4EFA8',\n    },\n    dark: {\n        button_color: color.$highlight_color,\n        icon_color: color.$highlight_color,\n        fg: color.$highlight_color,\n        modal_color: color.$fluorescent_green_color,\n    },\n}\n\nconst Toast = styled(animated.div)`\n    z-index: 20;\n    position: absolute;\n    top: 50%;\n    left: 0;\n    transform: translateY(-50%);\n    width: 100%;\n    text-align: center;\n    padding: 10px 0;\n    background-color: ${({ theme }) => theme.modal_color};\n    color: white;\n    font-weight: 600;\n    letter-spacing: 1px;\n`\n\ninterface SuccessToastProperty {\n    active: boolean;\n    theme: ThemeTypes;\n}\n\nconst SuccessToast = (props: SuccessToastProperty) => {\n    const { active, theme } = props;\n    const transitions = useTransition(active, {\n        from: { opacity: 0 },\n        enter: { opacity: 1 },\n        leave: { opacity: 0 }\n    });\n\n    return (\n        <>\n            {transitions((props, item) => item && (\n                <Toast\n                    style={props}\n                    theme={themeData[theme]}\n                >\n                    COPIED!\n                </Toast>))\n            }\n        </>\n    )\n}\n\nconst Content = styled.span`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    span:first-child {\n        margin-right: 2px;\n    }\n\n    span:last-child {\n        font-size: 12px;\n        color: ${({ theme }) => theme.fg}\n    }\n`\n\ninterface SendInviteLinkButtonProperty {\n    className: string;\n}\n\nconst SendInviteLinkButton = (props: SendInviteLinkButtonProperty) => {\n    const { className } = props;\n    const theme = useRecoilValue(themeState);\n    const roomId = useRecoilValue(userRoomState);\n    const [isCopied, setIsCopied] = useState(false);\n\n    const copyInviteLink = (id: string) => {\n        const inviteLink = `https://jyun1desu.github.io/cake-and-bridge-for-life/#/i/${id}`\n        navigator.clipboard.writeText(inviteLink).then(async () => {\n            setIsCopied(true);\n            await sleep(2000);\n            setIsCopied(false);\n        })\n    }\n\n    return (\n        <>\n            <SuccessToast theme={theme} active={isCopied} />\n            <Button\n                className={className}\n                size=\"small\"\n                onClick={() => copyInviteLink(roomId)}\n                color={themeData[theme].button_color}\n            >\n                <Content\n                    theme={themeData[theme]}\n                    className=\"button_content\"\n                >\n                    <ShareIcon\n                        backgroundColor={theme === ThemeTypes.Light ? themeData[theme].button_color : color.$dark_bg_color}\n                        iconColor={themeData[theme].icon_color}\n                    />\n                    <span>複製邀請連結</span>\n                </Content>\n            </Button>\n        </>\n    )\n}\n\nexport default SendInviteLinkButton","import React from \"react\";\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        border: '#dcdcdc',\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        border: color.$dark_dim_border_color,\n    },\n}\n\nconst StyledRadio = styled.span<RadioProperty>`\n    vertical-align: middle;\n    display: inline-block;\n    cursor: pointer;\n    position: relative;\n    display: inline-block;\n    border-radius: 100%;\n    width: ${(props) => (`${props.size}px`)};\n    height: ${(props) => (`${props.size}px`)};\n    margin-right: ${(props) => (`${props.marginRight}px`)};\n    transition: 0.3s all;\n    background-color: ${({ theme }) => theme.bg};\n    border: ${({ border }) => border};\n\n    &::after {\n        content: \"\";\n        display: block;\n        width: 70%;\n        height: 70%;\n        border-radius: 50%;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n    }\n`\n\ninterface RadioProperty {\n    className?: string;\n    size: number;\n    marginRight: number;\n    border: string;\n}\n\nconst Radio = (props: RadioProperty) => {\n    const { className, size, marginRight, border } = props;\n    const [theme] = useRecoilState(themeState);\n    return (\n        <StyledRadio\n            theme={themeData[theme]}\n            border={border}\n            size={size}\n            marginRight={marginRight}\n            className={className}\n        ></StyledRadio>\n    )\n}\n\nexport default Radio;","import React from \"react\";\nimport classnames from 'classnames'\nimport styled from 'styled-components';\nimport db from \"database\";\nimport { useRecoilValue, useRecoilState } from 'recoil';\n\nimport { Team, TeamTypes } from 'types/player';\nimport { themeState } from 'store/theme';\nimport { userTeamState } from 'store/user';\nimport { color } from 'style/theme';\nimport Radio from 'components/Global/Radio'\n\nconst themeData = {\n    light: {\n        default_f: '#A7A7A7',\n        st_fg: color.$pink_color,\n        cl_fg: color.$brown_color,\n    },\n    dark: {\n        default_f: '#787878',\n        st_fg: color.$fluorescent_pink_color,\n        cl_fg: color.$fluorescent_yellow_color,\n    },\n}\n\nconst StyledRadio = styled.div`\n    display: flex;\n    align-items: center;\n    font-size: 18px;\n    letter-spacing: 1px;\n    transition: 0.3s all;\n    color: ${({ theme }) => theme.default_f};\n\n    &.chosen {\n        &.team1 {\n            color: ${({ theme }) => theme.st_fg};\n\n            .radio::after {\n                transition: 0.3s all;\n                background-color: ${({ theme }) => theme.st_fg};\n            }\n        }\n\n        &.team2 {\n            color: ${({ theme }) => theme.cl_fg};\n\n            .radio::after {\n                transition: 0.3s all;\n                background-color: ${({ theme }) => theme.cl_fg};\n            }\n        }\n    }\n`\nconst RadioArea = styled.div`\n    align-self: flex-start;\n    width: 100%;\n\n    .options {\n        display: flex;\n        width: 100%;\n        justify-content: space-around;\n        font-size: 0;\n    }\n`\n\ninterface TeamOptionProperty {\n    team: '草莓糕' | '可麗露';\n    isChosen: boolean;\n    teamIndex: Team;\n    onClick: () => void;\n}\n\nconst TeamOption = (props: TeamOptionProperty) => {\n    const { team, isChosen, onClick = () => { }, teamIndex } = props;\n    const [theme] = useRecoilState(themeState);\n    const getBorder = () => {\n        switch (theme) {\n            case 'light':\n            default:\n                return 'none'\n            case 'dark':\n                if (isChosen) {\n                    return `1px solid ${teamIndex === TeamTypes.TeamOne \n                        ? themeData[theme].st_fg \n                        : themeData[theme].cl_fg}`\n                } else {\n                    return `1px solid ${color.$dark_dim_border_color}`\n                }\n        }\n    }\n    return (\n        <StyledRadio\n            theme={themeData[theme]}\n            onClick={onClick}\n            className={classnames('option', teamIndex, {\n                'chosen': isChosen,\n            })}>\n            <Radio\n                border={getBorder()}\n                className=\"radio\"\n                size={15}\n                marginRight={8} />\n            <span>{team}</span>\n        </StyledRadio>\n    )\n}\n\ninterface TeamRadiosProperty {\n    roomName: string;\n    userID: string;\n}\n\nconst TeamRadios = (props: TeamRadiosProperty) => {\n    const { roomName, userID } = props;\n    const userTeam = useRecoilValue(userTeamState);\n    const team = ['草莓糕', '可麗露'] as ['草莓糕', '可麗露'];\n\n    const handleChooseTeam = (team: Team) => {\n        const roomRef = db.database().ref(`/${roomName}`);\n        const userInfo = roomRef.child('playersInfo').child(`${userID}`);\n        userInfo.update({ team });\n    };\n\n    return (\n        <RadioArea className=\"choose_team\">\n            <div className=\"options\">\n                {team.map((team, index) => {\n                    const teamIndex = `team${index + 1}` as Team;\n                    return (\n                        <TeamOption\n                            onClick={() => handleChooseTeam(teamIndex)}\n                            isChosen={userTeam === teamIndex}\n                            key={index}\n                            team={team}\n                            teamIndex={teamIndex}\n                        />\n                    )\n                })}\n            </div >\n        </RadioArea >\n    )\n}\n\nexport default TeamRadios","const generateArray = (number: number) => {\n    if(!number) return [];\n    return Array.from(Array(number), (_, x) => x);\n}\n\nexport default generateArray;","import React, { useEffect, useState } from 'react';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport { useRecoilState } from \"recoil\";\nimport Modal from \"components/Global/Modal\";\nimport Button from 'components/Global/Button';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\nimport { ThemeData } from 'types/theme';\nimport generateArray from 'util/generateArray';\n\nconst themeData: ThemeData = {\n    light: {\n        bg: 'white',\n        border: 'none',\n        fg: color.$title_font_color,\n        dot: color.$pink_color,\n        button_color: color.$green_color\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        border: '1px solid' + color.$dark_border_color,\n        fg: color.$dark_default_font_color,\n        dot: color.$fluorescent_pink_color,\n        button_color: color.$dark_border_color\n    },\n}\n\n\nconst LoadingModal = styled.div`\n    width: 50vw;\n    min-height: 50vw;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    align-items: center;\n    border-radius: 10px;\n    padding: 20px;\n    background-color: ${({ theme }) => theme.bg};\n    border: ${({ theme }) => theme.border};\n\n    .text,\n    .countdown {\n        margin: 0;\n        font-size: 15px;\n        letter-spacing: 1px;\n        color: ${({ theme }) => theme.fg};\n    }\n\n    .text {\n        margin: 12px 0;\n    }\n\n    .lds-default {\n        display: inline-block;\n        position: relative;\n        width: 80px;\n        height: 80px;\n\n        &>div {\n            position: absolute;\n            width: 6px;\n            height: 6px;\n            border-radius: 50%;\n            animation: lds-default 1.3s linear infinite;\n            background: ${({ theme }) => theme.dot};\n\n            &:nth-child(1) {\n                animation-delay: 0s;\n                top: 37px;\n                left: 66px;\n            }\n\n            &:nth-child(2) {\n                animation-delay: -0.1s;\n                top: 22px;\n                left: 62px;\n            }\n\n            &:nth-child(3) {\n                animation-delay: -0.3s;\n                top: 11px;\n                left: 52px;\n            }\n\n            &:nth-child(4) {\n                animation-delay: -0.3s;\n                top: 7px;\n                left: 37px;\n            }\n\n            &:nth-child(5) {\n                animation-delay: -0.4s;\n                top: 11px;\n                left: 22px;\n            }\n\n            &:nth-child(6) {\n                animation-delay: -0.3s;\n                top: 22px;\n                left: 11px;\n            }\n\n            &:nth-child(7) {\n                animation-delay: -0.6s;\n                top: 37px;\n                left: 7px;\n            }\n\n            &:nth-child(8) {\n                animation-delay: -0.7s;\n                top: 52px;\n                left: 11px;\n            }\n\n            &:nth-child(9) {\n                animation-delay: -0.8s;\n                top: 62px;\n                left: 22px;\n            }\n\n            &:nth-child(10) {\n                animation-delay: -0.9s;\n                top: 66px;\n                left: 37px;\n            }\n\n            &:nth-child(11) {\n                animation-delay: -1s;\n                top: 62px;\n                left: 52px;\n            }\n\n            &:nth-child(12) {\n                animation-delay: -1.1s;\n                top: 52px;\n                left: 62px;\n            }\n        }\n    }\n\n    @keyframes lds-default {\n        0%,\n        20%,\n        80%,\n        100% {\n            transform: scale(1);\n        }\n\n        50% {\n            transform: scale(1.5);\n        }\n    }\n`\ninterface LoadingProperty {\n    active: Boolean;\n    type?: string | null;\n    cancelReady?: ()=>void;\n    actionText?: string;\n    countdown?: number;\n    noOpacity?: Boolean;\n    action?: ()=>void;\n    text?: string;\n    className?: string;\n}\n\nconst Loading = (props: LoadingProperty) => {\n    const {\n        active,\n        type = 'ready',\n        text = '等待其他玩家開始',\n        actionText,\n        countdown = 0,\n        noOpacity = false,\n        action = () => {},\n        cancelReady = () => {},\n    } = props;\n\n    const [theme] = useRecoilState(themeState);\n    const [timeLeft, setTimeLeft] = useState(countdown);\n    const dots = generateArray(12);\n\n    useEffect(() => {\n        if(!active) return;\n\n        if (!timeLeft) {\n            action();\n            return;\n        };\n\n        const countdownInterval = setInterval(() => {\n            setTimeLeft(timeLeft - 1);\n        }, 1000);\n\n        return () => clearInterval(countdownInterval);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [timeLeft, active])\n\n    return (\n        <Modal \n            active={active}\n            className={classnames('loading-modal',{\n                'no-opacity': noOpacity,\n            })}\n        >\n            <LoadingModal\n                theme={themeData[theme]}\n                className=\"loading\">\n                <div className=\"lds-default\">\n                    {dots.map((dot)=>(<div key={`dot${dot}`}></div>))}\n                </div>\n                <p className=\"text\">{text}</p>\n                {type && type.includes('countdown') &&\n                    <p className=\"countdown\">{timeLeft} 秒後{actionText}</p>\n                }\n                {type === 'ready' &&\n                    <Button\n                        color={themeData[theme].button_color}\n                        onClick={cancelReady}\n                        className=\"cancel_ready\"\n                    >取消</Button>\n                }\n            </LoadingModal>\n        </Modal>\n    )\n};\n\nexport default Loading;","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport db from \"database\";\nimport { useHistory } from \"react-router-dom\";\nimport { color } from 'style/theme'\nimport styled from 'styled-components';\n\nimport { playersData, teamArray } from \"store/players\";\nimport { userReadyState, userIDState, userRoomState, userTeamState, userNameState } from \"store/user\";\nimport { themeState } from 'store/theme';\nimport { useRecoilValue, useSetRecoilState, useRecoilState } from \"recoil\";\n\nimport { TeamTypes, PlayerData } from 'types/player';\n\nimport PlayerWindow from 'components/WaitRoom/PlayerWindow';\nimport SendInviteLinkButton from 'components/WaitRoom/SendInviteLinkButton';\nimport TeamRadios from 'components/WaitRoom/TeamRadios';\nimport Button from 'components/Global/Button';\nimport Loading from 'components/Global/Loading';\n\nconst themeData = {\n    light: {\n        bg: color.$theme_background,\n    },\n    dark: {\n        bg: color.$dark_bg_color,\n    },\n}\n\nconst Room = styled.div`\n        padding: 5vw;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: space-around;\n        transition: .3s background-color;\n        background-color: ${({ theme }) => theme.bg};\n        position: relative;\n\n        .start_game {\n            letter-spacing: 2px;\n            font-size: 16px;\n        }\n\n        .copy_link_button {\n            margin-left: auto;\n        }\n`\ninterface ReadyButtonProperty {\n    className: string;\n    buttonMessage: string;\n    onClick: () => void;\n}\nconst ReadyButton = (props: ReadyButtonProperty) => {\n    const { onClick, className, buttonMessage } = props;\n    const [theme] = useRecoilState(themeState);\n\n    const getButtonColor = () => {\n        switch (theme) {\n            case 'light':\n            default:\n                return buttonMessage === '開打！'\n                    ? `${color.$pink_color}`\n                    : `${color.$unable_color}`;\n            case 'dark':\n                return buttonMessage === '開打！'\n                    ? `${color.$fluorescent_pink_color}`\n                    : `${color.$dark_dim_border_color}`;\n        }\n    }\n\n    return (\n        <Button\n            className={className}\n            onClick={onClick}\n            color={getButtonColor()}\n        >\n            {buttonMessage}\n        </Button>\n    )\n}\n\nconst WaitRoom = () => {\n    const history = useHistory();\n    const [theme] = useRecoilState(themeState);\n    const [buttonMessage, setButtonMessage] = useState('');\n    const setPlayerData = useSetRecoilState(playersData);\n    const userID = useRecoilValue(userIDState);\n    const userName = useRecoilValue(userNameState);\n    const userTeam = useRecoilValue(userTeamState);\n    const roomName = useRecoilValue(userRoomState);\n    const team = useRecoilValue(teamArray);\n    const isUserReady = useRecoilValue(userReadyState);\n    const roomRef = db.database().ref(`/${roomName}`);\n    const playersInfo = roomRef.child('playersInfo');\n    const isAllReady = roomRef.child('enterGame');\n\n    useEffect(() => {\n        const prepareWaitRoom = async () => {\n            await initWaitRoomData();\n            detectUserDisConnect();\n            await playersInfo.once(\"value\", (data) => {\n                const playersData = Object.values(data.val()) as PlayerData[];\n                const sortedByTimestamp = playersData.sort((a, b) => a.timestamp - b.timestamp);\n                const userOrder = sortedByTimestamp.findIndex(data => data.id === userID);\n                const userDefaultTeam = userOrder === 0 || userOrder === 3\n                    ? TeamTypes.TeamOne\n                    : TeamTypes.TeamTwo;\n\n                let userData: {ready: boolean; team?: TeamTypes} = { ready: false };\n                if (!userTeam) {\n                    userData = {\n                        ...userData,\n                        team: userDefaultTeam,\n                    }\n                }\n                playersInfo.child(userID).update(userData)\n            });\n\n            playersInfo.on(\"value\", async (data) => {\n                if (!data.val()) return;\n                const playersData = Object.values(data.val()) as PlayerData[];\n                const sortedByTimestamp = playersData.sort((a, b) => a.timestamp - b.timestamp);\n                setPlayerData(sortedByTimestamp);\n            });\n\n            // 監聽四人都ready時進入遊戲\n            isAllReady.on(\"value\", async data => {\n                if (data.val()) {\n                    await enterGame();\n                    isAllReady.remove();\n                }\n            });\n        }\n\n        prepareWaitRoom();\n\n        return () => {\n            playersInfo.off();\n            roomRef\n                .child('playersInfo')\n                .child(userID)\n                .onDisconnect()\n                .cancel();\n        }\n    }, []);\n\n    useEffect(() => {\n        if (team.length < 4) {\n            return setButtonMessage('人數不足⋯⋯');;\n        };\n        const teamOneAmount = team.filter(team => team === TeamTypes.TeamOne).length;\n        const teamTwoAmount = team.filter(team => team === TeamTypes.TeamTwo).length;\n        if (teamOneAmount !== teamTwoAmount) {\n            return setButtonMessage('人數不一樣怎麼打！');\n        }\n        return setButtonMessage('開打！');\n    }, [team])\n\n    const detectUserDisConnect = () => {\n        roomRef\n            .child('playersInfo')\n            .child(userID)\n            .onDisconnect()\n            .remove();\n    };\n\n    const initWaitRoomData = async () => {\n        const playersInfo = roomRef.child('playersInfo');\n        await playersInfo.child(userID).update({ ready: false })\n    }\n\n    const enterGame = async () => {\n        await initWaitRoomData();\n        history.push(`/g/${roomName}/${userID}`);\n    }\n\n    const setReady = async (isReady: boolean) => {\n        if (buttonMessage !== '開打！') return;\n        const roomRef = db.database().ref(`/${roomName}`);\n        const userInfo = roomRef.child('playersInfo').child(userID);\n        await userInfo.update({ ready: isReady });\n        if (isReady) {\n            await roomRef.child('playersInfo').once(\"value\", async (data) => {\n                const playersData = Object.values(data.val()) as PlayerData[];\n                const allReady = playersData.filter(data => data.ready).length === 4;\n                if (allReady) {\n                    await roomRef.child('currentPlayer').set(userName);\n                    await roomRef.child('enterGame').set(true);\n                    roomRef.child('playersInfo').off();\n                }\n            })\n        }\n    }\n\n    return (\n        <Room\n            theme={themeData[theme]}>\n            <SendInviteLinkButton className=\"copy_link_button\"/>   \n            <PlayerWindow />\n            <TeamRadios roomName={roomName} userID={userID} />\n            <ReadyButton\n                className=\"start_game\"\n                buttonMessage={buttonMessage}\n                onClick={() => setReady(true)}\n            />\n            <Loading\n                active={isUserReady}\n                cancelReady={() => setReady(false)}\n            />\n        </Room>\n    )\n}\n\nexport default WaitRoom;","import { CardSuitType, Card} from 'types/card';\nconst buildNewDeck = () => {\n    const suit = [CardSuitType.Spade, CardSuitType.Heart, CardSuitType.Diamond, CardSuitType.Club];\n    const number = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13];\n    const deck: Card[] = [];\n    for (let i = 0; i < suit.length; i++) {\n        let card: Card;\n        for (let j = 0; j < number.length; j++) {\n            card = {\n                suit: suit[i],\n                number: number[j],\n            };\n            deck.push(card);\n        }\n    }\n    return deck;\n};\n\nconst shuffle = (deck: Card[]) => {\n    let i = deck.length;\n    while (i > 1) {\n        let index = Math.floor(Math.random() * i--);\n        [deck[i], deck[index]] = [deck[index], deck[i]];\n    }\n    return deck;\n};\n\nconst sortCards = (cards: Card[]) => {\n    const sorted = cards.sort((a: Card, b: Card) => {\n        const order = [CardSuitType.Spade, CardSuitType.Heart, CardSuitType.Club, CardSuitType.Diamond];\n        const cardAPoint = 100 * (4 - order.indexOf(a.suit)) + 13 - a.number;\n        const cardBPoint = 100 * (4 - order.indexOf(b.suit)) + 13 - b.number;\n        return cardBPoint - cardAPoint;\n    });\n    return sorted;\n};\n\nconst dealCards = (playerAmount: number, deck: Card[]) => {\n    const players: Array<Card[]> = [];\n    for (let i = 0; i < playerAmount; i++) {\n        const eachPlayer: [] = [];\n        players.push(eachPlayer);\n    }\n\n    for (let i = 0; i < deck.length; i++) {\n        const playerIndex = i % playerAmount;\n        players[playerIndex].push(deck[i]);\n    }\n    const sorted = players.map((cards) => sortCards(cards));\n    return sorted;\n};\n\nconst shuffledDeck = () => shuffle(buildNewDeck());\n\nexport const generateNewDeck = () => {\n    return dealCards(4, shuffledDeck());\n};\n","import { CardSuitType, Suits, SuitColorType } from 'types/card';\nexport const suitColor = (suit: Suits | undefined | null) => {\n    switch (suit) {\n        case CardSuitType.Spade:\n        case CardSuitType.Club:\n        default:\n            return SuitColorType.Black;\n        case CardSuitType.Heart:\n        case CardSuitType.Diamond:\n            return SuitColorType.Red;\n    }\n}\n\nexport const suitInPoker = (suit: Suits | undefined) => {\n    switch (suit) {\n        case CardSuitType.Spade:\n            return \"♠\";\n        case CardSuitType.Heart:\n            return \"♥\";\n        case CardSuitType.Diamond:\n            return \"♦\";\n        case CardSuitType.Club:\n        default:\n            return \"♣\";\n    }\n}","import React from 'react';\nimport { CardSuitType } from 'types/card';\n\nconst getSuitHtmlCode = (suit: CardSuitType | null | undefined) => {\n    switch (suit) {\n        case null:\n            return (<></>)\n        case CardSuitType.Spade:\n            return (<>&#9824;&#xFE0E;</>)\n        case CardSuitType.Heart:\n            return (<>&#9829;&#xFE0E;</>)\n        case CardSuitType.Diamond:\n            return (<>&#9830;&#xFE0E;</>)\n        case CardSuitType.Club:\n        default:\n            return (<>&#9827;&#xFE0E;</>);\n    }\n}\n\ninterface SuitProperty {\n    suit: CardSuitType | null | undefined;\n    className?: string;\n}\n\nconst Suit = (props: SuitProperty) => {\n    const { suit, className } = props;\n    const suitCode = getSuitHtmlCode(suit);\n    return (\n        <span className={className}>\n            {suitCode}\n        </span>\n    )\n};\n\nexport default Suit;","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/theme';\n\nconst Icon = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: #fff;\n    border-radius: 3px;\n    padding: 8px;\n    filter: drop-shadow(0px 0px 2px rgb(170, 170, 170));\n    z-index: 1;\n    &::after {\n        content: \"\";\n        position: absolute;\n        display: block;\n        background-color: #fff;\n        width: 6px;\n        height: 6px;\n        transform-origin: top right;\n        transform: rotate(45deg);\n        top: 100%;\n    }\n    &.on_table {\n        position: absolute;\n        transform: translate(-50%, -150%);\n        left: 50%;\n        top: 0;\n    }\n    &.on_bind_list {\n        position: absolute;\n        transform: translate(-50%);\n        left: 50%;\n        bottom: 99%;\n        z-index: 500;\n    }\n\n    .dots {\n        display: flex;\n\n        .dot {\n            height: 4px;\n            width: 4px;\n            border-radius: 50%;\n            background-color: ${color.$black_suit_color};\n\n            animation: animateDot 2s cubic-bezier(0.69, 0.76, 0.58, 1);\n            animation-iteration-count: infinite;\n\n            &:nth-child(1) {\n                animation-delay: 0s;\n            }\n\n            &:nth-child(2) {\n                margin: 0 4px;\n                animation-delay: 0.3s;\n            }\n\n            &:nth-child(3) {\n                animation-delay: 0.3s;\n            }\n        }\n    }\n\n    @keyframes animateDot {\n        0% {\n            transform: translate3d(0);\n        }\n\n        25% {\n            transform: translate3d(0, -1.5px, 0);\n        }\n\n        50% {\n            transform: translate3d(0, 0.5px, 0);\n        }\n\n        65%,\n        100% {\n            transform: translate3d(0, 0, 0);\n        }\n    }\n`\ninterface ThinkingIconProperty {\n    className: string;\n}\n\nconst ThinkingIcon = (props: ThinkingIconProperty) => {\n    const { className } = props;\n    return (\n        <Icon className={`thinking ${className}`}>\n            <div className=\"dots\">\n                <div className=\"dot\"></div>\n                <div className=\"dot\"></div>\n                <div className=\"dot\"></div>\n            </div>\n        </Icon>\n    )\n};\n\nexport default ThinkingIcon","import React, { useEffect } from 'react';\nimport classnames from 'classnames';\nimport db from \"database\";\nimport styled from 'styled-components';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\nimport { suitColor } from 'util/suit';\nimport { OrderedStartFromTeamOne } from 'store/players';\nimport { currentPlayerName } from 'store/game';\nimport { playersCalledListState } from 'store/bind';\nimport { userRoomState } from 'store/user';\nimport Suit from 'components/Global/Suit';\nimport ThinkingIcon from 'components/GameRoom/ThinkingIcon';\nimport { TeamTypes } from 'types/player';\nimport { CalledBind } from 'types/bind';\nimport { ThemeTypes } from 'types/theme';\nimport { CardSuitType } from 'types/card';\n\nconst themeData = {\n    light: {\n        t1_name_fg: 'white',\n        t2_name_fg: 'white',\n        t1_name_bg: color.$pink_color,\n        t2_name_bg: color.$brown_color,\n        binds_bg: 'white',\n        border: 'none',\n        red_suit_color: color.$red_suit_color,\n        black_suit_color: color.$black_suit_color,\n        pass_color: color.$pass_color\n    },\n    dark: {\n        t1_name_fg: color.$fluorescent_pink_color,\n        t2_name_fg: color.$fluorescent_yellow_color,\n        t1_name_bg: color.$dark_dim_bg_color,\n        t2_name_bg: color.$dark_dim_bg_color,\n        binds_bg: color.$dark_dim_bg_color,\n        border: \"1px solid\" + color.$dark_dim_border_color,\n        red_suit_color: color.$dark_red_suit_color,\n        black_suit_color: 'white',\n        pass_color: color.$fluorescent_green_color\n    },\n}\n\ninterface getUserTurnEffectProperty {\n    team: TeamTypes;\n    theme: ThemeTypes;\n}\n\nconst getUserTurnEffect = (props: getUserTurnEffectProperty) => {\n    const { theme, team } = props\n    switch (theme) {\n        case 'light':\n        default:\n            return `box-shadow: 0px 0px 0px 2px ${color.$highlight_color};`\n        case 'dark':\n            const teamColor = team === TeamTypes.TeamOne\n                ? color.$fluorescent_pink_color\n                : color.$fluorescent_yellow_color\n            return `\n            border: none;\n            box-shadow: 0 0 2px 1px ${teamColor};\n            `\n    }\n}\n\ninterface PlayIProperty {\n    team: TeamTypes;\n}\n\nconst Player = styled.div<PlayIProperty>`\n    position: relative;\n    flex:  0 1 25%;\n    font-size: 13px;\n    border-radius: 4px;\n    background-color: ${({ theme }) => theme.binds_bg};\n    border: ${({ theme }) => theme.border};\n\n    &.is_player_turn {\n        ${({ theme, team }) => getUserTurnEffect({ theme, team })};\n    }\n\n    & + div {\n        margin-left: 6px;\n    }\n\n    .name {\n        position: relative;\n        border-radius: 4px 4px 0 0;\n        max-width: calc(85vw/4 - 38px/4);\n        text-align: center;\n        line-height: 20px;\n        padding: 6px;\n        box-sizing: border-box;\n        letter-spacing: 1px;\n        transition: 0.3s all;\n        border-bottom: ${({ theme }) => theme.border};\n\n        &  > p {\n            overflow: hidden;\n            white-space: nowrap;\n        }\n    }\n\n    &:nth-child(2n+1) {\n        .name {\n            background-color: ${({ theme }) => theme.t1_name_bg};\n            color: ${({ theme }) => theme.t1_name_fg};\n        }   \n    }\n\n    &:nth-child(2n+2) {\n        .name {\n            background-color: ${({ theme }) => theme.t2_name_bg};\n            color: ${({ theme }) => theme.t2_name_fg};\n        }   \n    }\n\n\n    .called_bind {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        padding: 5px;\n        box-sizing: border-box;\n        min-height: 8vh;\n        .bind {\n            & + .bind {\n                margin-top: 3px;\n            }\n            &.red {\n                color: ${({ theme }) => theme.red_suit_color};\n            }\n            &.black {\n                color: ${({ theme }) => theme.black_suit_color};\n            }\n            &.pass {\n                letter-spacing: 1px;\n                color: ${({ theme }) => theme.pass_color};\n            }\n        }\n    }\n`\n\ninterface PlayInfoProperty {\n    name: string;\n    team: TeamTypes;\n    calledList: CalledBind[];\n}\nconst PlayInfo = (props: PlayInfoProperty) => {\n    const { name, team, calledList } = props;\n    const [theme] = useRecoilState(themeState);\n    const nowPlayer = useRecoilValue(currentPlayerName);\n    const isPlayerTurn = nowPlayer === name;\n\n    return (\n        <Player\n            theme={themeData[theme]}\n            team={team}\n            className={classnames(\"player\", { is_player_turn: isPlayerTurn })}\n        >\n            {isPlayerTurn && <ThinkingIcon className=\"on_bind_list\" />}\n            <div className=\"name\">\n                <p>{name}</p>\n            </div>\n            <div className=\"called_bind\">\n                {calledList.map((called, index) => {\n                    const isPassed = called === 'pass';\n                    const bind = called === 'pass' ? { number: 0, suit: CardSuitType.Club } : called;\n                    if (isPassed) {\n                        return (<span key={'pass' + index} className={classnames(\"bind\", \"pass\")}>PASS</span>)\n                    }\n                    return (\n                        <span\n                            key={'called' + index}\n                            className={classnames(\"bind\", suitColor(bind.suit))}\n                        >\n                            <span>{bind.number}</span> \n                            <Suit suit={bind.suit} />\n                        </span>\n                    )\n                })\n                }\n            </div>\n        </Player>\n    )\n};\n\ninterface PlayerListProperty {\n    className: string;\n}\nconst PlayerList = (props: PlayerListProperty) => {\n    const { className } = props;\n    const playerList = useRecoilValue(OrderedStartFromTeamOne);\n    const roomId = useRecoilValue(userRoomState);\n    const [calledList, setCalledList] = useRecoilState(playersCalledListState);\n\n    useEffect(() => {\n        const calledBindsRef = db.database().ref(`/${roomId}`)\n            .child('gameInfo')\n            .child('calledBinds');\n        calledBindsRef.on(\"value\", (data) => {\n            const allCalledBinds = data.val();\n            setCalledList(allCalledBinds || {});\n        })\n        return () => {\n            calledBindsRef.off();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    return (\n        <div className={className}>\n            {playerList.map((player, index) => {\n                const team = 'team' + (index % 2) + 1 as TeamTypes;\n                return (\n                    <PlayInfo\n                        key={player + index}\n                        name={player}\n                        team={team}\n                        calledList={calledList[player] || []} />\n                )\n            })}\n        </div>\n    )\n}\n\nexport default PlayerList;","type Object = { [key: string]: any };\n\nconst isObjectEquivalent = (a: Object | null, b: Object | null) => {\n    if(!a || !b) return false;\n    const aKeys = Object.keys(a);\n    const bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) return false;\n\n    return aKeys.every(key => {\n        return a[key] === b[key]\n    })\n}\n\nexport default isObjectEquivalent","import React from 'react';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport Suit from 'components/Global/Suit';\nimport { themeState } from 'store/theme';\nimport { ThemeTypes } from 'types/theme';\nimport { color } from 'style/theme';\nimport { suitColor } from 'util/suit';\nimport Radio from 'components/Global/Radio';\nimport { CardSuitType } from 'types/card';\n\nconst themeData = {\n    light: {\n        red_suit_color: color.$red_suit_color,\n        black_suit_color: color.$black_suit_color,\n        unable_color: color.$unable_color,\n    },\n    dark: {\n        red_suit_color: color.$dark_red_suit_color,\n        black_suit_color: 'white',\n        unable_color: color.$dark_unable_color\n    },\n}\n\nconst Button = styled.div`\n    display: flex;\n    align-items: center;\n\n    .pattern {\n        font-size: 16px;\n        line-height: 16px;\n\n        &.red {\n            color: ${({ theme }) => theme.red_suit_color};\n        }\n\n        &.black {\n            color: ${({ theme }) => theme.black_suit_color};\n        }\n    }\n\n    &.is_unable {\n        .pattern {\n            color: ${({ theme }) => theme.unable_color};\n        }\n    }\n\n    &.chosen {\n        .radio {\n            &::after {\n                background-color: #dcdcdc;\n            }\n        }\n    }\n`\n\ninterface OptionButtonProperty {\n    isUnableBind: boolean;\n    trickNumber: number;\n    suit: CardSuitType;\n    onClick: () => void;\n    isPicked: boolean;\n}\n\nconst OptionButton = (props: OptionButtonProperty) => {\n    const {\n        isUnableBind,\n        trickNumber,\n        suit,\n        onClick = () => { },\n        isPicked\n    } = props;\n    const [theme] = useRecoilState(themeState);\n    const getBorder = () => {\n        switch (theme) {\n            case ThemeTypes.Light:\n            default:\n                return `1px solid ${color.$under_line_color}`;\n            case ThemeTypes.Dark:\n                return `1px solid ${color.$dark_dim_border_color}`;\n        }\n    }\n    return (\n        <Button\n            theme={themeData[theme]}\n            key={trickNumber + suit}\n            className={classnames(\"option\", { \"chosen\": isPicked, \"is_unable\": isUnableBind })}\n            onClick={onClick}>\n            <Radio\n                className=\"radio\"\n                border={getBorder()}\n                size={12}\n                marginRight={5}\n            />\n            <Suit \n                className={classnames(\"pattern\", suitColor(suit))}\n                suit={suit}\n            />\n        </Button>\n    )\n}\n\nexport default OptionButton;","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport { color } from 'style/theme';\nimport { ThemeTypes } from 'types/theme';\nimport { userPickBindState, nowBindState  } from 'store/bind';\nimport isObjectEquivalent from 'util/isObjectEquivalent';\nimport OptionButton from './OptionButton';\nimport { Card, CardSuitType } from 'types/card';\n\nconst themeData = {\n    light: { \n        number_c: color.$default_font_color,\n        border: color.$under_line_color\n    },\n    dark: {\n        number_c: 'white',\n        border: color.$dark_dim_border_color\n    },\n}\n\nconst OptionRow = styled.div`\n    display: flex;\n    justify-content: space-between;\n    padding: 10px;\n\n    &:not(:last-child) {\n        transition: 0.3s all;\n        border-bottom: 1px solid ${({theme}) => theme.border };\n    }\n\n    .number {\n        flex: 0 1 25%;\n        margin-right: 15px;\n        transition: 0.3s all;\n        color: ${({theme}) => theme.number_c };\n    }\n    .suits {\n        display: flex;\n        justify-content: space-between;\n        flex: 1 0 auto;\n    }\n`\n\ninterface OptionsProperty  {\n    trickNumber: number;\n    isUserTurn: boolean;\n    theme: ThemeTypes;\n}\n\nconst Options = (props: OptionsProperty) => {\n    const { trickNumber, isUserTurn, theme } = props;\n    const suits = [CardSuitType.Club, CardSuitType.Diamond, CardSuitType.Heart, CardSuitType.Spade];\n    const [pickBindState,setPickBindState] = useRecoilState(userPickBindState);\n    const nowBind = useRecoilValue(nowBindState);\n\n    const isUnableBind = (card: Card) => {\n        const {suit, number} = card;\n        if(nowBind.number > number) return true;\n        if(nowBind.number === number) {\n            return !(suits.indexOf(suit) > suits.indexOf(nowBind.suit))\n        }\n        return false;\n    }\n\n    const handlePickBind = (bindData: Card) => {\n        if(!isUserTurn) return;\n        if(isUnableBind(bindData)) return;\n        if(isObjectEquivalent(bindData, pickBindState as Card)){\n            setPickBindState(null);\n        } else {\n            setPickBindState(bindData);\n        }\n    }\n\n    return (\n        <OptionRow \n            theme={themeData[theme]}\n            className=\"option_row\">\n            <span className=\"number\">{trickNumber}</span>\n            <div className=\"suits\">\n                {suits.map((suit)=>{\n                    const called = {suit, number: trickNumber} as Card;\n                    return(\n                    <OptionButton \n                        key={trickNumber+suit}\n                        onClick={()=>handlePickBind(called)}\n                        trickNumber={trickNumber}\n                        isUnableBind={isUnableBind(called)}\n                        isPicked={isObjectEquivalent(called,pickBindState as Card)}\n                        suit={suit}\n                    />\n                )})}\n            </div>\n        </OptionRow>\n    )\n}\n\nconst List = styled.div`\n    max-height: 25vh;\n    padding: 0 10px;\n    overflow-y: scroll;\n`\n\ninterface OptionListProperty  {\n    tricks: number[];\n    isUserTurn: boolean;\n    theme: ThemeTypes;\n}\n\nconst OptionList = (props: OptionListProperty) => {\n    const { tricks = [], isUserTurn, theme }  = props;\n    \n    return (\n    <List \n        theme={themeData[theme]}\n        className=\"bind_options\">\n        {tricks.map(trickNumber => (\n            <Options         \n                theme={theme}\n                key={'trick'+trickNumber}\n                trickNumber={trickNumber}\n                isUserTurn={isUserTurn}\n            />\n        ))}\n    </List>\n)};\n\nexport default OptionList;","import React, { useEffect, useMemo } from 'react';\nimport db from \"database\";\nimport classnames from 'classnames';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport styled from 'styled-components';\nimport Suit from 'components/Global/Suit';\nimport { color } from 'style/theme';\nimport { ThemeTypes } from 'types/theme';\nimport { CalledBind } from 'types/bind';\nimport { userPickBindState, nowBindState, availibleTricksState, userPassState } from 'store/bind';\nimport { isUserTurnState, trumpState } from 'store/game';\nimport { relationWithUser, OrderedStartFromTeamOne } from 'store/players';\nimport { userNameState, userRoomState } from 'store/user';\nimport OptionList from './OptionList';\n\ninterface BoxProperty {\n    themeType: ThemeTypes;\n}\n\nconst Box = styled.div<BoxProperty>`\n    border-radius: 4px;\n    margin-top: 8px;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    transition: 0.3s all;\n    background-color: ${({ theme }) => theme.bg};\n    border-width: ${({ themeType }) => themeType === ThemeTypes.Light ? 0 : '1px'};\n    border-style: solid;\n    border-color: ${({ theme }) => theme.border};\n\n    & > p {\n        padding: 8px 0;\n        font-size: 16px;\n        text-align: center;\n        letter-spacing: 1px;\n        margin-bottom: 5px;\n        transition: 0.3s all;\n        border-bottom: 1px solid ${({ theme }) => theme.border};\n        background-color: ${({ theme }) => theme.status_unable_bg};\n        color: ${({ theme }) => theme.status_unable_fg};\n    }\n\n    & > button {\n        padding: 8px 0;\n        margin-top: 5px;\n        font-size: 16px;\n        line-height: 16px;\n        letter-spacing: 2px;\n        transition: 0.3s all;\n        border-top: 1px solid ${({ theme }) => theme.border};\n        background-color: ${({ theme }) => theme.call_unable_bg};\n        color: ${({ theme }) => theme.call_unable_fg};\n    }\n\n    &.is_user_turn{\n        & > p {\n            background-color: ${({ theme }) => theme.status_active_bg};\n            color: ${({ theme }) => theme.status_active_fg};\n        }\n        & > button {\n            background-color: ${({ theme }) => theme.call_pass_bg};\n            color: ${({ theme }) => theme.call_pass_fg};;\n\n            &.has_pick_bind {\n                background-color: ${({ theme }) => theme.call_active_bg};\n                color: ${({ theme }) => theme.call_active_fg};\n            }\n        }\n    }\n`\n\nconst Hint = styled.p`\n    text-align: center;\n    margin-top: 4px;\n    letter-spacing: 1px;\n    font-size: 12px;\n    transition: 0.3s all;\n    color: ${({ theme }) => theme.hint};\n`\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        status_unable_bg: color.$unable_color,\n        status_active_bg: color.$highlight_color,\n        status_unable_fg: color.$unable_font_color,\n        status_active_fg: color.$title_font_color,\n        call_unable_bg: color.$unable_color,\n        call_unable_fg: color.$unable_font_color,\n        call_pass_bg: color.$pass_color,\n        call_pass_fg: 'white',\n        call_active_bg: color.$pink_color,\n        call_active_fg: 'white',\n        border: 'transparent',\n        hint: color.$default_font_color,\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        status_unable_bg: color.$dark_dim_bg_color,\n        status_unable_fg: color.$unable_font_color,\n        status_active_bg: color.$dark_dim_bg_color,\n        status_active_fg: color.$fluorescent_yellow_color,\n        call_unable_bg: color.$dark_dim_bg_color,\n        call_unable_fg: '#7B7B7B',\n        call_pass_bg: color.$dark_dim_bg_color,\n        call_pass_fg: color.$fluorescent_green_color,\n        call_active_bg: color.$dark_dim_bg_color,\n        call_active_fg: color.$fluorescent_pink_color,\n        border: color.$dark_dim_border_color,\n        hint: 'white',\n    },\n}\n\ninterface BindListProperty  {\n    theme: ThemeTypes;\n}\n\nconst BindList = (props: BindListProperty) => {\n    const { theme } = props;\n    const [userPickBind, setUserPickBind] = useRecoilState(userPickBindState);\n    const [isUserPass, setUserPass] = useRecoilState(userPassState);\n    const [nowBind, setNowBind] = useRecoilState(nowBindState);\n    const playerList = useRecoilValue(OrderedStartFromTeamOne);\n    const [trump, setTrump] = useRecoilState(trumpState);\n    const { nextPlayer } = useRecoilValue(relationWithUser);\n    const availibleTricks = useRecoilValue(availibleTricksState);\n    const isUserTurn = useRecoilValue(isUserTurnState);\n    const roomId = useRecoilValue(userRoomState);\n    const userName = useRecoilValue(userNameState);\n    const roomRef = db.database().ref(`/${roomId}`);\n\n    useEffect(() => {\n        const nowBindRef = roomRef.child('gameInfo').child('nowBind');\n        nowBindRef.on(\"value\", (data) => {\n            const nowBindData = data.val();\n            if (nowBindData) {\n                setNowBind(nowBindData);\n            }\n        });\n        detectTrumpDecided();\n        return () => {\n            nowBindRef.off();\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[]);\n\n    useEffect(() => {\n        if (isUserTurn && isUserPass && !trump) {\n            roomRef.child('currentPlayer').set(nextPlayer);\n        }\n    }, [isUserTurn, isUserPass, nextPlayer, roomRef, trump]);\n\n    const buttonMessage = useMemo(() => {\n        const noBind = nowBind.number === 0;\n        if (isUserTurn) {\n            if (noBind && !userPickBind) return '不能PASS!';\n            if (userPickBind) {\n                return (\n                    <>\n                    {`喊${userPickBind.number}`}\n                    <Suit suit={userPickBind.suit} />\n                    </>\n                )\n            } else {\n                return 'PASS';\n            }\n        } else {\n            return 'PASS';\n        }\n    }, [isUserTurn, userPickBind, nowBind])\n\n    const callBind = async () => {\n        if (!isUserTurn || buttonMessage === '不能PASS!') return;\n        const bindRef = roomRef.child('gameInfo').child('nowBind');\n        const userBindListRef = roomRef.child('gameInfo').child('calledBinds').child(userName);\n        const nextPlayerRef = roomRef.child('currentPlayer');\n\n        await userBindListRef.once(\"value\", (data) => {\n            const userCalledBinds = data.val();\n            const calledBind = userPickBind || 'pass';\n            if (!userCalledBinds) {\n                userBindListRef.set([calledBind]);\n            } else {\n                const newUserBinds = [...userCalledBinds, calledBind];\n                userBindListRef.set(newUserBinds);\n            }\n\n            if (userPickBind) {\n                bindRef.set({ ...userPickBind , player: userName });\n            } else {\n                setUserPass(true);\n            }\n        });\n\n        await nextPlayerRef.set(nextPlayer);\n        setUserPickBind(null);\n    };\n\n    const detectTrumpDecided = () => {\n        const bindListRef = roomRef.child('gameInfo').child('calledBinds');\n        const nextPlayerRef = roomRef.child('currentPlayer');\n        bindListRef.on(\"value\", (data) => {\n            const binds = data.val();\n            if(!binds) return;\n            const playersCalledList =  Object.values(binds) as CalledBind[][]\n            const passAmount = playersCalledList\n                .filter(playerCalledList => {\n                    return playerCalledList.some(bind => bind === 'pass');\n                }).length;\n\n            if(passAmount === 3) {\n                const nowBindRef = roomRef.child('gameInfo').child('nowBind');\n                nowBindRef.once(\"value\", (data) => {\n                    const { suit, number, player } = data.val();\n                    setTrump({suit, number});\n                    nextPlayerRef.set(getNextPlayer(player));\n                });\n                bindListRef.off();\n            }\n        });\n    }\n\n    const getNextPlayer = (playerName: string) => {\n        const playerIndex = playerList.indexOf(playerName);\n        const nextPlayerIndex = playerIndex + 1 > 3 ? playerIndex - 3 : playerIndex + 1;\n        return playerList[nextPlayerIndex];\n    }\n\n    return (\n        <>\n            <Box\n                theme={themeData[theme]}\n                themeType={theme}\n                className={classnames(\"bind_list\", { \"is_user_turn\": isUserTurn })}>\n                <p>{isUserTurn ? '' : 'NOT '}YOUR TURN</p>\n                <OptionList\n                    theme={theme}\n                    isUserTurn={isUserTurn}\n                    tricks={availibleTricks} />\n                <button\n                    onClick={callBind}\n                    className={classnames({ \"has_pick_bind\": userPickBind })}>\n                        {buttonMessage}\n                </button>\n            </Box>\n            { userPickBind && <Hint theme={themeData[theme]}>再次點擊相同選項可以取消選擇</Hint>}\n        </>\n    )\n}\n\nexport default BindList;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/theme';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\n\nimport Modal from 'components/Global/Modal';\nimport PlayerList from './PlayerList'\nimport BindList from './BindList'\n\n\nconst Box = styled.div`\n    width: 85vw;\n    align-self: flex-start;\n    margin-top: 5vh;\n    display: flex;\n    flex-direction: column;\n    justify-content: stretch;\n    border-radius: 6px;\n    overflow: hidden;\n    transition: 0.3s all;\n    border: ${({theme}) => theme.border };\n\n    .title {\n        margin: 0;\n        padding: 10px 0;\n        text-align: center;\n        font-size: 18px;\n        letter-spacing: 2px;\n        color: white;\n        transition: 0.3s all;\n        border-bottom: ${({theme}) => theme.border };\n        background-color: ${({theme}) => theme.title_bg };\n    }\n\n    .content {\n        padding: 10px;\n        transition: 0.3s all;\n        background-color: ${({theme}) => theme.content_bg };\n\n        .player_list {\n            display: flex;\n        }\n    }\n`\n\nconst themeData = {\n    light: { \n        title_bg: color.$green_color, \n        content_bg: color.$theme_background,\n        border: `1px solid transparent`,\n    },\n    dark: { \n        title_bg: color.$dark_bg_color, \n        content_bg: color.$dark_dim_bg_color,\n        border: `1px solid ${color.$dark_dim_border_color}`,\n    },\n}\n\nconst BindingBox = () => {\n    const [theme] = useRecoilState(themeState);\n    return (\n        <Box\n            theme={themeData[theme]}\n            className=\"box\">\n            <p className=\"title\">BINDING</p>\n            <div className=\"content\">\n                <PlayerList className=\"player_list\" />\n                <BindList theme={theme} />\n            </div>\n        </Box>\n    )\n}\n\ninterface ModalBindingProperty {\n    active: boolean\n}\n\nconst ModalBinding = (props: ModalBindingProperty) => {\n    const { active } = props;\n    return (\n        <Modal\n            active={active}\n            className=\"binding_modal\">\n            <BindingBox />\n        </Modal>\n    )\n}\n\nexport default ModalBinding;","export default __webpack_public_path__ + \"static/media/kanaheiclap.23b0e19f.gif\";","import React from 'react';\nimport db from \"database\";\nimport styled from 'styled-components';\nimport { useRecoilState, useSetRecoilState, useRecoilValue } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { userRoomState } from 'store/user';\nimport { responseToBadDeck } from 'store/deck';\nimport { color } from 'style/theme';\nimport Modal from 'components/Global/Modal';\nimport Kanahei from 'assets/kanaheiclap.gif';\n\nconst themeData = {\n    light: { \n        bg: 'white',\n        border: 'none',\n        fg: color.$default_font_color,\n        yes_button_fg: 'white',\n        yes_button_bg: color.$pink_color,\n        no_button_fg: 'white',\n        no_button_bg: color.$green_color,\n    },\n    dark: { \n        bg: color.$dark_dim_bg_color,\n        border: `1px solid ${color.$dark_dim_border_color}`,\n        fg: color.$dark_default_font_color,\n        yes_button_fg: color.$fluorescent_pink_color,\n        yes_button_bg: 'transparent',\n        no_button_fg: color.$fluorescent_green_color,\n        no_button_bg: 'transparent',\n    },\n}\n\nconst AskBox = styled.div`\n    display:  flex;\n    flex-direction: column;\n    justify-content: center;\n    border-radius: 5px;\n    overflow: hidden;\n    transition: .3s all;\n    background-color: ${({theme}) => theme.bg };\n    border: ${({theme}) => theme.border };\n\n    .content {\n        display:  flex;\n        flex-direction: column;\n        align-items: center;\n        padding: 25px 15px 15px;\n\n        img {\n        width: 80px;\n        margin-bottom: 20px;\n        }\n\n        p {\n            letter-spacing: 1px;\n            transition: .3s all;\n            color: ${({theme}) => theme.fg };\n        }\n    }\n\n    .button_area {\n        display: flex;\n        & > button {\n            padding: 8px 0;\n            font-size: 15px;\n            letter-spacing: 2px;\n            flex: 1 1 50%;\n            transition: .3s all;\n\n            &:first-child {\n                background-color: ${({theme}) => theme.yes_button_bg };\n                color: ${({theme}) => theme.yes_button_fg };\n                border-top: ${({theme}) => theme.border };\n                border-right: ${({theme}) => theme.border };\n            }\n\n            &:last-child {\n                background-color: ${({theme}) => theme.no_button_bg };\n                color: ${({theme}) => theme.no_button_fg };\n                border-top: ${({theme}) => theme.border };\n            }\n        }\n    }\n`\n\nconst Content = () => {\n    const [theme] = useRecoilState(themeState);\n    const roomId = useRecoilValue(userRoomState);\n    const setResponseToBadDeck = useSetRecoilState(responseToBadDeck);\n\n    const restartGame = () => {\n        const roomRef = db.database().ref(`/${roomId}`);\n        roomRef.child('restart').set(true);\n    }\n\n    return (\n        <AskBox theme={themeData[theme]} >\n            <div className=\"content\">\n                <img alt=\"icon\" className=\"icon\" src={Kanahei}></img>\n                <p>好像可以倒牌捏</p>\n            </div >\n            <div className=\"button_area\">\n                <button onClick={restartGame}>倒爆</button>\n                <button onClick={()=>setResponseToBadDeck(true)}>不倒</button>\n            </div>\n        </AskBox >\n    )\n}\n\ninterface ModalGiveUpProperty  {\n    active: boolean;\n}\n\nconst ModalGiveUp = (props: ModalGiveUpProperty) => {\n    const {active} = props;\n    return (\n        <Modal\n            active={active}\n            className=\"give_up_modal\">\n            <Content />\n        </Modal >\n    );\n}\n\nexport default ModalGiveUp","export default __webpack_public_path__ + \"static/media/bumpintowindow.fd5eab02.gif\";","import React from 'react';\nimport db from \"database\";\nimport { useHistory } from \"react-router-dom\";\nimport { useRecoilValue} from 'recoil';\nimport { userRoomState, userIDState } from 'store/user';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\nimport styled from 'styled-components';\nimport Modal from 'components/Global/Modal';\nimport Kanahei from 'assets/bumpintowindow.gif';\n\nconst themeData = {\n    light: { \n        bg: 'white',\n        border: 'none',\n        fg: color.$default_font_color,\n        yes_button_fg: 'white',\n        yes_button_bg: color.$pink_color,\n        no_button_fg: 'white',\n        no_button_bg: color.$green_color,\n    },\n    dark: { \n        bg: color.$dark_dim_bg_color,\n        border: `1px solid ${color.$dark_dim_border_color}`,\n        fg: color.$dark_default_font_color,\n        yes_button_fg: color.$fluorescent_pink_color,\n        yes_button_bg: 'transparent',\n        no_button_fg: color.$fluorescent_green_color,\n        no_button_bg: 'transparent',\n    },\n}\n\nconst AskBox = styled.div`\n    display:  flex;\n    flex-direction: column;\n    justify-content: center;\n    border-radius: 5px;\n    overflow: hidden;\n    transition: .3s all;\n    background-color: ${({theme}) => theme.bg };\n    border: ${({theme}) => theme.border };\n\n    .title {\n        padding: 10px 0;\n        text-align: center;\n        letter-spacing: 1px;\n        color: white;\n        background-color: ${color.$pink_color};\n    }\n\n    .content {\n        display:  flex;\n        flex-direction: column;\n        align-items: center;\n        padding: 25px 15px 15px;\n\n        img {\n        width: 80px;\n        margin-bottom: 20px;\n        }\n\n        p {\n            transition: .3s all;\n            color: ${({theme}) => theme.fg };\n        }\n    }\n\n    .button_area {\n        display: flex;\n        & > button {\n            padding: 8px 0;\n            font-size: 15px;\n            letter-spacing: 2px;\n            flex: 1 1 50%;\n            transition: .3s all;\n\n            &:first-child {\n                background-color: ${({theme}) => theme.yes_button_bg };\n                color: ${({theme}) => theme.yes_button_fg };\n                border-top: ${({theme}) => theme.border };\n                border-right: ${({theme}) => theme.border };\n            }\n\n            &:last-child {\n                background-color: ${({theme}) => theme.no_button_bg };\n                color: ${({theme}) => theme.no_button_fg };\n                border-top: ${({theme}) => theme.border };\n            }\n        }\n    }\n`\n\ninterface ContentProperty  {\n    closeModal: () => void;\n}\nconst Content = (props: ContentProperty) => {\n    const { closeModal } = props;\n    const history = useHistory();\n    const theme = useRecoilValue(themeState);\n    const userID = useRecoilValue(userIDState);\n    const roomId = useRecoilValue(userRoomState);\n    const roomRef = db.database().ref(`/${roomId}`);\n\n    const leaveGame = async() => {\n        await roomRef.child('playersInfo').child(userID).remove();\n        await roomRef.child('someoneLeaveGame').set(true);\n        history.push('/');\n    }\n\n    return (\n        <AskBox theme={themeData[theme]}>\n            <div className=\"content\">\n                <img alt=\"celebrate-icon\" className=\"icon\" src={Kanahei}></img>\n                <p>確定要離開嗎？</p>\n            </div >\n            <div className=\"button_area\">\n                <button onClick={leaveGame}>離開</button>\n                <button onClick={closeModal}>繼續玩</button>\n            </div>\n        </AskBox >\n    )\n}\n\ninterface ModalConfirmLeaveProperty  {\n    active: boolean;\n    closeModal: () => void;\n}\nconst ModalConfirmLeave = (props: ModalConfirmLeaveProperty) => {\n    const { active, closeModal } = props;\n    return (\n        <Modal\n            active={active}\n            className=\"confirm_leave_modal\"\n        >\n            <Content closeModal={closeModal} />\n        </Modal >\n    );\n}\n\nexport default ModalConfirmLeave","import React, { useEffect, useState } from 'react';\nimport db from \"database\";\nimport Lottie from 'react-lottie';\nimport styled from 'styled-components';\nimport { useHistory } from \"react-router-dom\";\nimport { useRecoilValue, useResetRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { modalState } from 'store/modal';\nimport { userTeamState, userRoomState, userIDState, userNameState } from 'store/user';\nimport { color } from 'style/theme';\nimport { PlayerData, TeamTypes } from 'types/player';\nimport Modal from 'components/Global/Modal';\nimport Button from 'components/Global/Button';\nimport mainFireWork from 'assets/fireworks/16764-firework-animaiton.json';\nimport subFireWork from 'assets/fireworks/14438-fireworks.json';\nimport thirdFireWork from 'assets/fireworks/lf30_editor_he0cup9w.json';\nimport sleep from 'util/sleep';\n\nconst AninimationBox = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n\n    & > div {\n        &:nth-child(1) {\n            position: absolute;\n            left: -30px;\n            top: -100px;\n        }\n        &:nth-child(2) {\n            position: absolute;\n            left: 30px;\n            top: 300px;\n        }\n        &:nth-child(3) {\n            position: absolute;\n            left: -10px;\n            top: 20px;\n        }\n        &:nth-child(4) {\n            position: absolute;\n            left: 100px;\n            top: 20px;\n        }\n        &:nth-child(5) {\n            position: absolute;\n            left: 50px;\n            top: 400px;\n        }\n        &:nth-child(6) {\n            position: absolute;\n            left: -80px;\n            top: -20px;\n        }\n        &:nth-child(7) {\n            position: absolute;\n            left: -50%;\n            top: 25%;\n        }\n        &:nth-child(8) {\n            position: absolute;\n            left: 20%;\n            top: 60%;\n        }\n        &:nth-child(9) {\n            position: absolute;\n            left: -30%;\n            bottom: 10%;\n        }\n        &:nth-child(10) {\n            position: absolute;\n            left: 0;\n            bottom: 10%;\n        }\n        &:nth-child(11) {\n            position: absolute;\n            left: -30%;\n            top: 10%;\n        }\n        &:nth-child(12) {\n            position: absolute;\n            left: -50%;\n            top: 60%;\n        }\n    }\n`\n\nconst Animations = () => {\n    const [delay, toggleDelay] = useState(false);\n\n    const setDelay = async () => {\n        await sleep(600);\n        toggleDelay(true)\n    }\n\n    useEffect(() => {\n        setDelay()\n    }, [])\n\n    const mainFireWorkData = {\n        loop: true,\n        autoplay: true,\n        animationData: mainFireWork,\n        rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n        }\n    };\n\n    const subFireWorkData = {\n        loop: true,\n        autoplay: true,\n        animationData: subFireWork,\n        rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n        }\n    };\n\n    const thirdFireWorkData = {\n        loop: true,\n        autoplay: true,\n        animationData: thirdFireWork,\n        rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n        }\n    };\n\n    return (\n        <AninimationBox>\n            {delay && <Lottie options={thirdFireWork}\n                height={500}\n                width={500}\n            />}\n            {delay && <Lottie options={mainFireWorkData}\n                height={600}\n                width={600}\n            />}\n            {delay && <Lottie options={thirdFireWork}\n                height={500}\n                width={500}\n            />}\n            <Lottie options={mainFireWorkData}\n                height={300}\n                width={300}\n            />\n            {delay && <Lottie options={thirdFireWork}\n                height={250}\n                width={300}\n            />}\n            <Lottie options={subFireWorkData}\n                height={300}\n                width={300}\n            />\n            <Lottie options={thirdFireWorkData}\n                height={300}\n                width={300}\n            />\n            {delay && <Lottie options={thirdFireWorkData}\n                height={300}\n                width={300}\n            />}\n            <Lottie options={subFireWorkData}\n                height={200}\n                width={500}\n            />\n            <Lottie options={subFireWorkData}\n                height={400}\n                width={400}\n            />\n            <Lottie options={mainFireWorkData}\n                height={500}\n                width={500}\n            />\n            <Lottie options={thirdFireWorkData}\n                height={400}\n                width={400}\n            />\n        </AninimationBox>\n    )\n};\n\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        title_bg: color.$pink_color,\n        border: 'none',\n        title_fg: 'white',\n        win_fg: color.$default_font_color,\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        title_bg: 'transparent',\n        border: `1px solid ${color.$fluorescent_pink_color}`,\n        title_fg: color.$fluorescent_pink_color,\n        win_fg: color.$fluorescent_yellow_color,\n    },\n}\n\nconst ResultBox = styled.div`\n    z-index: 100;\n    display:  flex;\n    flex-direction: column;\n    justify-content: center;\n    background-color: white;\n    border-radius: 5px;\n    overflow: hidden;\n    background-color: ${({ theme }) => theme.bg};\n    border: ${({ theme }) => theme.border};\n\n    .title {\n        font-size: 20px;\n        letter-spacing: 5px;\n        text-align: center;\n        color: white;\n        padding: 5px 0;\n        color: ${({ theme }) => theme.title_fg};\n        background-color: ${({ theme }) => theme.title_bg};\n        border-bottom: ${({ theme }) => theme.border};\n    }\n\n    .content {\n        box-sizing: border-box;\n        padding: 15px;\n\n        .text {\n            text-align: center;\n            letter-spacing: 3px;\n            margin-bottom: 25px;\n            color: ${({ theme }) => theme.win_fg};\n\n            .hint {\n                margin-top: 5px;\n                letter-spacing: 1px;\n                font-size: 12px;\n                color: ${color.$unable_font_color};\n            }\n        }\n    }\n\n    .button_area {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        z-index: 100;\n\n        & > button {\n            width: 80%;\n            & + button {\n                margin-top: 10px;\n            }\n        }\n    }\n`\n\ninterface ContentProperty {\n    isUserWin: boolean;\n    refreshGame: () => void;\n    winTeam: TeamTypes | null;\n    toggleLoadingWindow: React.Dispatch<React.SetStateAction<boolean>>;\n    openConfirmLeaveModal: () => void;\n}\n\nconst Content = (props: ContentProperty) => {\n    const { winTeam, isUserWin, toggleLoadingWindow, openConfirmLeaveModal, refreshGame } = props;\n    const theme = useRecoilValue(themeState);\n    const userID = useRecoilValue(userIDState);\n    const userName = useRecoilValue(userNameState);\n    const roomId = useRecoilValue(userRoomState);\n    const teamName = winTeam === TeamTypes.TeamOne ? '草莓糕' : '可麗露';\n    const initModalType = useResetRecoilState(modalState);\n    const history = useHistory();\n    const roomRef = db.database().ref(`/${roomId}`);\n    const buttonColor = {\n        light: {\n            yellow_button: color.$highlight_color,\n            orange_button: color.$orange_color,\n            green_button: color.$green_color,\n        },\n        dark: {\n            yellow_button: color.$fluorescent_orange_color,\n            orange_button: color.$fluorescent_yellow_color,\n            green_button: color.$fluorescent_green_color,\n        }\n    }\n\n    useEffect(()=>{\n        listenOnOneMoreGame();\n        return () => removeOneMoreGameListener();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[]);\n\n    const startNewGame = () => {\n        refreshGame();\n        roomRef.child('playersInfo').child(userID).update({ ready: false });\n        toggleLoadingWindow(false);\n    }\n\n    const listenOnOneMoreGame = () => {\n        const oneMoreGameRef = roomRef.child('oneMoreGame');\n\n        oneMoreGameRef.on(\"value\", async data => {\n            const isTrigger = data.val();\n            if (isTrigger) {\n                startNewGame();\n            }\n        });\n    }\n\n    const removeOneMoreGameListener = () => {\n        const oneMoreGameRef = roomRef.child('oneMoreGame');\n        oneMoreGameRef.off();\n    }\n\n    const backToWaitRoom = () => {\n        const toPath = `/w/${roomId}/${userID}`;\n        history.push(toPath);\n        initModalType();\n        roomRef.child('changeMate').set(true);\n    }\n\n    const setReady = async (isReady: boolean) => {\n        const userInfo = roomRef.child('playersInfo').child(userID);\n        await userInfo.update({ ready: isReady });\n\n        if (isReady) {\n            await roomRef.child('playersInfo').once(\"value\", async (data) => {\n                const playersData = Object.values(data.val()) as PlayerData[];\n                const allReady = playersData.filter(data => data.ready).length === 4;\n                if (allReady) {\n                    await roomRef.child('currentPlayer').set(userName);\n                    await roomRef.child('oneMoreGame').set(true);\n                }\n            })\n        }\n    }\n\n    const readyToNextRound = async () => {\n        setReady(true);\n        toggleLoadingWindow(true);\n    }\n\n    return (\n        <ResultBox\n            theme={themeData[theme]}\n            className=\"result_box\">\n            <p className=\"title\">勝負揭曉</p>\n            <div className=\"content\">\n                <div className=\"text\">\n                    {isUserWin\n                        ? (\n                            <>\n                                <p>🎉恭喜<span>{teamName}</span>贏惹🎉</p>\n                                <p className=\"hint\">(請享受贏家才有的煙火)</p>\n                            </>\n                        )\n                        : (\n                            <>\n                                <p>🥲NO～<span>{teamName}</span>贏惹🥲</p>\n                                <p className=\"hint\">(別氣餒！努力獲勝就能看煙火！)</p>\n                            </>\n                        )\n                    }\n                </div>\n                <div className=\"button_area\">\n                    <Button\n                        onClick={backToWaitRoom}\n                        color={buttonColor[theme].yellow_button}>更換隊友</Button>\n                    <Button\n                        onClick={readyToNextRound}\n                        color={buttonColor[theme].orange_button}>再玩一局</Button>\n                    <Button\n                        onClick={openConfirmLeaveModal}\n                        color={buttonColor[theme].green_button}>翻桌不玩</Button>\n                </div>\n            </div >\n        </ResultBox >\n    )\n};\n\ninterface ModalResultProperty {\n    active: boolean;\n    winTeam: TeamTypes | null;\n    refreshGame: () => void;\n    toggleLoadingWindow: React.Dispatch<React.SetStateAction<boolean>>;\n    openConfirmLeaveModal: () => void;\n}\n\nconst ModalResult = (props: ModalResultProperty) => {\n    const { active, winTeam, toggleLoadingWindow, openConfirmLeaveModal, refreshGame } = props;\n    const userTeam = useRecoilValue(userTeamState);\n    const isUserWin = winTeam === userTeam;\n    \n    return (\n        <Modal\n            active={active}\n            className=\"result_modal\">\n            <Content\n                winTeam={winTeam}\n                isUserWin={isUserWin}\n                refreshGame={refreshGame}\n                toggleLoadingWindow={toggleLoadingWindow}\n                openConfirmLeaveModal={openConfirmLeaveModal}\n            />\n            {isUserWin && <Animations />}\n        </Modal >\n    );\n}\n\nexport default ModalResult","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { useHistory } from \"react-router-dom\";\nimport db from \"database\";\nimport ModalBinding from 'components/GameRoom/Modal/ModalBinding';\nimport ModalGiveUp from 'components/GameRoom/Modal/ModalGiveUp';\nimport ModalConfirmLeave from 'components/GameRoom/Modal/ModalConfirmLeave';\nimport ModalResult from 'components/GameRoom/Modal/ModalResult';\nimport Loading from 'components/Global/Loading';\nimport { trumpState, isGameEndState } from 'store/game';\nimport { userRoomState, userIDState } from 'store/user';\nimport { modalState } from 'store/modal';\nimport { OKtoPlay } from 'store/deck';\nimport { useRecoilState, useRecoilValue, useResetRecoilState } from 'recoil';\n\nconst Root = styled.div`\n`\n\ninterface ModalRootProperty {\n    initGameData: () => void;\n}\n\nconst ModalRoot = (props: ModalRootProperty) => {\n    const { initGameData } = props;\n    const history = useHistory();\n    const [isLoading, toggleLoading] = useState(false);\n    const trump = useRecoilValue(trumpState);\n    const userID = useRecoilValue(userIDState);\n    const roomId = useRecoilValue(userRoomState);\n    const isOKtoPlay = useRecoilValue(OKtoPlay);\n    const isGotWinner = useRecoilValue(isGameEndState);\n    const [modalType, setModalType] = useRecoilState(modalState);\n    const initModalType = useResetRecoilState(modalState);\n    const roomRef = db.database().ref(`/${roomId}`);\n\n    const backToWaitRoom = () => {\n        const toPath = `/w/${roomId}/${userID}`;\n        history.push(toPath);\n        initGameData();\n        initModalType();\n        roomRef.child('changeMate').remove();\n        roomRef.child('someoneLeaveGame').remove();\n    }\n\n    const refreshGame = async (type: 'restart'|'oneMoreGame' = 'restart') => {\n        await initGameData();\n        roomRef.child(type).remove();\n    }\n\n    const closeModal = () => initModalType();\n\n    return (\n        <Root className=\"modal_root\">\n            <ModalBinding active={!trump && isOKtoPlay} />\n            <ModalGiveUp active={!isOKtoPlay} />\n            <ModalResult\n                active={!!isGotWinner}\n                refreshGame={()=>refreshGame('oneMoreGame')}\n                openConfirmLeaveModal={()=>setModalType('cofirm-leave')}\n                toggleLoadingWindow={toggleLoading}\n                winTeam={isGotWinner}\n            />\n            <ModalConfirmLeave \n                active={modalType === 'cofirm-leave'} \n                closeModal={closeModal} />\n            <Loading\n                active={modalType === 'countdown-leave'}\n                type={modalType}\n                countdown={3}\n                action={backToWaitRoom}\n                actionText=\"回到等待室\"\n                text=\"有人離開嚕！\"\n                noOpacity\n            />\n            <Loading\n                active={modalType === 'countdown-change-mate'}\n                type={modalType}\n                countdown={3}\n                action={backToWaitRoom}\n                actionText=\"回到等待室\"\n                text=\"有人要換隊友唷！\"\n                noOpacity\n            />\n            <Loading\n                active={modalType === 'countdown-restart'}\n                type={modalType}\n                countdown={3}\n                action={()=>refreshGame('restart')}\n                actionText=\"重新牌局\"\n                text=\"倒牌啦！\"\n                noOpacity\n            />\n            <Loading\n                active={isLoading}\n                cancelReady={() => toggleLoading(false)}\n            />\n        </Root>\n    )\n}\n\nexport default ModalRoot;\n","import React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport Suit from 'components/Global/Suit';\nimport { suitColor } from 'util/suit'\nimport { SuitColor, CardSuitType } from 'types/card';\nimport { color } from \"style/theme\";\nimport { themeState } from 'store/theme';\n\nfunction numberInPoker(number: number) {\n    const poker = [\n        \"2\",\n        \"3\",\n        \"4\",\n        \"5\",\n        \"6\",\n        \"7\",\n        \"8\",\n        \"9\",\n        \"10\",\n        \"J\",\n        \"Q\",\n        \"K\",\n        \"A\",\n    ];\n    return poker[number - 1];\n};\n\ninterface PokerCardProperty {\n    suitColor: SuitColor;\n}\n\nconst themeData = {\n    light: {\n        front_bg: '#FAF9F8',\n        back_bg: '#eaeaea',\n        border: 'white',\n        suit_red: color.$red_suit_color,\n        suit_black: color.$black_suit_color,\n        pattern: 'white',\n        shadow: color.$shadow,\n    },\n    dark: {\n        front_bg: color.$dark_bg_color,\n        back_bg: '#312D28',\n        border: color.$dark_dim_border_color,\n        suit_red: color.$dark_red_suit_color,\n        suit_black: color.$dark_black_suit_color,\n        pattern: color.$dark_dim_bg_color,\n        shadow: 'transparent',\n    },\n}\n\nconst PokerCard = styled.div<PokerCardProperty>`\n    z-index: 1;\n    display: flex;\n    justify-content: space-between;\n    border-radius: 3px;\n    box-sizing: border-box;\n    padding: 2px;\n    transition: all .3s;\n    border: 1px solid ${({ theme }) => theme.border};\n    background-color: ${({ theme }) => theme.front_bg};\n\n    .card_info {\n        display: flex;\n        flex: 0 1 auto;\n        flex-direction: column;\n\n        &.reverse {\n            transform: rotate(180deg);\n        }\n\n        .number,\n        .suit {\n            font-size: 12px;\n            text-align: center;\n            transition: all .3s;\n            color: ${({ suitColor, theme }) => theme[`suit_${suitColor}`]};\n\n            &.suit {\n                margin-top: 1px;\n            }\n        }\n    }\n\n    .pattern {\n        flex: 1 1 100%;\n        margin: 10px 4px;\n        transition: all .3s;\n        background-color: ${({ theme }) => theme.pattern};\n    }\n\n    &.group {\n        width: 16vw;\n        height: 23vw;\n        & + .group {\n            margin-left: -11vw;\n        }\n\n        &.other_player_card{\n            background-color: ${({ theme }) => theme.back_bg};;\n        }\n    }\n\n    &.played_card {\n        width: 12.5vw;\n        height: 15.5vw;\n        box-shadow: 1px 1px 2px 1px ${({ theme }) => theme.shadow};\n    }\n\n    &.isPicked{\n        flex: 0 0 auto;\n        transform: translateY(-30%) scale(1.1);\n\n        &:not(:first-child){\n            margin-left: -7vw !important;\n        }\n    }\n\n    &.isNotPicked{\n        &:last-child {\n            flex: 0 0 auto;\n        }\n    }\n`\n\nexport interface CardProperty {\n    number?: number;\n    suit?: CardSuitType;\n    className?: string;\n    onClick?: (e: React.MouseEvent<HTMLElement>) => void;\n    hasDetail?: Boolean;\n    nowPickSuit?: CardSuitType | null;\n}\n\nconst Card = (props: CardProperty) => {\n    const { number, suit, className, hasDetail = false, onClick = () => { }, nowPickSuit } = props;\n    const theme = useRecoilValue(themeState);\n    const numberOnCard = number ? numberInPoker(number) : null;\n    const sameSuit = nowPickSuit && (suit === nowPickSuit);\n    const isNotPicked = nowPickSuit && (suit !== nowPickSuit);\n\n    return (\n        <PokerCard\n            theme={themeData[theme]}\n            onClick={onClick}\n            className={classnames(className, \"poker_card\",\n                {\n                    'isPicked': sameSuit,\n                    'isNotPicked': isNotPicked,\n                })}\n            suitColor={suitColor(suit)}\n        >\n            {hasDetail && (\n                <>\n                    <div className=\"card_info\">\n                        <span className=\"number\">{numberOnCard}</span>\n                        <Suit className=\"suit\" suit={suit} />\n                    </div>\n                    <div className=\"pattern\"></div>\n                    <div className=\"card_info reverse\">\n                        <span className=\"number\">{numberOnCard}</span>\n                        <Suit className=\"suit\" suit={suit} />\n                    </div>\n                </>\n            )}\n        </PokerCard>\n    )\n\n}\n\nexport default Card","export enum NavigatorTypes {\n\tWonTricks = 'wintricks',\n\tSettings = 'settings',\n}","import React from 'react';\nimport db from \"database\";\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport { userDeckState } from 'store/deck';\nimport { isUserTurnState, thisRoundSuitState, isUserLastPlayerState } from 'store/game';\nimport { userNameState, userRoomState } from 'store/user';\nimport { relationWithUser } from 'store/players';\nimport { Card, Suits } from 'types/card';\nimport CardLayout from '../Card'\n\ninterface UserHandCardsProperty {\n    className: string;\n}\nconst UserHandCards = (props: UserHandCardsProperty) => {\n    const { className } = props;\n    const roomId = useRecoilValue(userRoomState);\n    const userName = useRecoilValue(userNameState);\n    const isUserTurn = useRecoilValue(isUserTurnState);\n    const thisRoundSuit = useRecoilValue(thisRoundSuitState);\n    const isUserLastPlayer = useRecoilValue(isUserLastPlayerState);\n    const { nextPlayer } = useRecoilValue(relationWithUser);\n    const [userDeck, setUserDeck] = useRecoilState(userDeckState);\n    const [nowPickSuit, setNowPickSuit] = React.useState<Suits | null>(null);\n    const roomRef = db.database().ref(`/${roomId}`);\n    const gameInfoRef = roomRef.child('gameInfo');\n\n    const handlePickCard = async (e: React.MouseEvent<HTMLElement>, card: Card) => {\n        e.stopPropagation();\n        const { suit, number } = card\n        if (!isUserTurn) return;\n        if (!isValidCard(suit)) return setNowPickSuit(null);\n        if (suit === nowPickSuit) {\n            // 出牌\n            await playCard({ number, suit });\n            removeCardFromDeck({ number, suit });\n            setNowPickSuit(null);\n            if (!isUserLastPlayer) {\n                await switchToNextPlayer();\n            }\n        } else {\n            setNowPickSuit(suit);\n        }\n    }\n\n    const isValidCard = (pickedSuit: Suits) => {\n        if (!thisRoundSuit) return true;\n        if (thisRoundSuit && pickedSuit !== thisRoundSuit) {\n            if (userDeck.some(card => card.suit === thisRoundSuit)) {\n                return false\n            } else {\n                return true\n            }\n        } else {\n            return true\n        }\n    }\n\n    const playCard = async (card: Card) => {\n        const { suit, number } = card;\n        const cardsRef = gameInfoRef.child('thisRoundCards');\n        const suitRef = gameInfoRef.child('thisRoundSuit');\n        const userPlayData = {\n            player: userName,\n            card: { number, suit },\n        }\n        await cardsRef.once(\"value\", d => {\n            const cards = d.val() || [];\n            if (!cards.length) {\n                suitRef.set(suit);\n            }\n            cardsRef.set([...cards, userPlayData]);\n        });\n    }\n\n    const removeCardFromDeck = (card: Card) => {\n        const { suit, number } = card;\n        const newDeck = userDeck.filter(card => {\n            const isCard = card.number === number && card.suit === suit;\n            return !isCard;\n        })\n        setUserDeck(newDeck);\n    };\n\n    const switchToNextPlayer = async () => {\n        const nextPlayerRef = roomRef.child('currentPlayer');\n        await nextPlayerRef.set(nextPlayer);\n    }\n\n    return (\n        <div className={className}>\n            {userDeck.map(({ number, suit }) => (\n            <CardLayout\n                nowPickSuit={nowPickSuit}\n                onClick={(e) => handlePickCard(e, { number, suit })}\n                className=\"group user_card\"\n                key={number + suit}\n                number={number}\n                suit={suit}\n                hasDetail\n            />))}\n        </div>\n    )\n\n}\n\nexport default UserHandCards","import React from 'react';\nimport Card from '../Card';\nimport generateArray from 'util/generateArray';\n\ninterface OtherUserHandCardsProperty  {\n    className: string;\n    cardAmount: number;\n}\nconst OtherUserHandCards = (props: OtherUserHandCardsProperty) => {\n    const { className, cardAmount } = props;\n    const cardArray = generateArray(cardAmount);\n    return (\n        <div className={className}>\n            {cardArray.map(card=>(\n                <Card key={card} className=\"group other_player_card\" />\n            ))}\n        </div>\n    )\n}\n\nexport default OtherUserHandCards;","import React from 'react';\nimport classnames from 'classnames';\nimport { useRecoilValue } from 'recoil';\nimport styled from 'styled-components';\nimport { relationWithUser } from 'store/players';\nimport { otherPlayerDeckState } from 'store/deck';\nimport UserHandCards from './UserHandCards';\nimport OtherUserHandCards from './OtherUserHandCards';\n\nconst CardGroup = styled.div`\n\tposition: absolute;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\twidth: 100%;\n\theight: 100%;\n\n\t.cards {\n\t\tdisplay: flex;\n\n\t\t&__user {\n\t\t\tmargin-top: auto;\n\t\t\tmargin-bottom: 10px;\n\t\t\tmax-width: 90vw;\n\t\t}\n\n\t\t&__left {\n\t\t\tposition: absolute;\n\t\t\ttransform-origin: left top;\n\t\t\ttransform: rotate(90deg) translate(-50%, -50%);\n\t\t\ttop: 50%;\n\t\t\tleft: 0;\n\t\t}\n\n\t\t&__right {\n\t\t\tposition: absolute;\n\t\t\ttransform-origin: right top;\n\t\t\ttransform: rotate(-90deg) translate(50%, -50%);\n\t\t\ttop: 50%;\n\t\t\tright: 0;\n\t\t}\n\n\t\t&__cross {\n\t\t\tmargin-top: -15px;\n\t\t}\n\n\t}\n`\n\nconst Cards = () => {\n\tconst order = ['cross', 'left', 'right', 'user'];\n\tconst { teammate, nextPlayer, previousPlayer} = useRecoilValue(relationWithUser);\n\tconst otherPlayerDeck = useRecoilValue(otherPlayerDeckState);\n\tconst orderedPlayers = [teammate, nextPlayer, previousPlayer];\n\n\treturn (\n\t\t<CardGroup className=\"card_group\">\n\t\t\t{order.map((order, index) => (\n\t\t\t\torder === 'user'\n\t\t\t\t\t? <UserHandCards key={order} className={classnames(\"cards\", `cards__${order}`)} />\n\t\t\t\t\t: <OtherUserHandCards \n\t\t\t\t\t\tkey={order} \n\t\t\t\t\t\tclassName={classnames(\"cards\", `cards__${order}`)} \n\t\t\t\t\t\tcardAmount={otherPlayerDeck[orderedPlayers[index]]}/>\n\t\t\t))}\n\t\t</CardGroup >\n\t)\n}\n\nexport default Cards;","import React from 'react';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport { useRecoilValue } from 'recoil';\nimport { TeamTypes } from 'types/player';\nimport { ThemeTypes } from 'types/theme';\nimport { themeState } from 'store/theme';\nimport { relationWithUser } from 'store/players';\nimport { userNameState, userTeamState } from 'store/user';\nimport { currentPlayerName, trumpState } from 'store/game';\nimport ThinkingIcon from 'components/GameRoom/ThinkingIcon';\nimport { color } from 'style/theme'\n\nconst themeData = {\n    light: {\n        name_bg: 'white',\n        fc: color.$title_font_color,\n        bw: '0px',\n        border: 'transparent',\n        team: {\n            team1: color.$pink_color,\n            team2: color.$brown_color,\n        },\n        highlight_color_team: {\n            team1: color.$highlight_color,\n            team2: color.$highlight_color,\n        },\n\n    },\n    dark: {\n        name_bg: color.$dark_dim_bg_color,\n        fc: color.$light_pink_color,\n        bw: '1px',\n        team: {\n            team1: color.$fluorescent_pink_color,\n            team2: color.$fluorescent_yellow_color\n        },\n        highlight_color_team: {\n            team1: color.$fluorescent_pink_color,\n            team2: color.$fluorescent_yellow_color\n        },\n    },\n}\n\ninterface TagProperty {\n    themeType: ThemeTypes;\n    team: TeamTypes;\n}\n\nconst Tag = styled.div<TagProperty>`\n    position: absolute;\n\n    &.is_player_turn {\n        .player_info {\n            border-width: 2px;\n            border-color: ${({ theme, team }) => theme.highlight_color_team[team]};\n        }\n    }\n\n    &.tag {\n        &_cross {\n            top: 0;\n            transform: translate(-50%, -50%);\n            left: 50%;\n        }\n        &_left {\n            transform-origin: left top;\n            transform: rotate(-90deg) translate(-50%, -50%);\n            top: 50%;\n            left: 0;\n        }\n        &_right {\n            transform: rotate(90deg) translate(50%, -50%);\n            transform-origin: right top;\n            top: 50%;\n            right: 0;\n        }\n        &_user {\n            bottom: 0px;\n            left: 50%;\n            transform: translate(-50%, 50%);\n        }\n    }\n\n    .player_info {\n        display: flex;\n        vertical-align: middle;\n        border-radius: 5px;\n        font-size: 14px;\n        line-height: 26px;\n        background-color: white;\n        overflow: hidden;\n        padding-right: 10px;\n        border-style: solid;\n        border-width: ${({ theme }) => theme.bw};\n        border-color: ${({ themeType, theme, team }) => (themeType === ThemeTypes.Light ? 'transparent' : theme.team[team])};\n        background-color: ${({ theme }) => theme.name_bg};\n        color: ${({ theme }) => theme.fc};\n\n        .team {\n            padding: 5px 10px;\n            transition: .3s all;\n            background-color: ${({ theme, team }) => theme.team[team]};\n        }\n\n        .name {\n            max-width: 32vw;\n            letter-spacing: 1px;\n            padding-left: 10px;\n            white-space: nowrap;\n            overflow: hidden;\n        }\n    }\n`\n\ninterface PlayerNameTagProperty {\n    className: string;\n    player: string;\n    team: TeamTypes;\n    isCurrentPlayer: boolean;\n}\n\nconst PlayerNameTag = (props: PlayerNameTagProperty) => {\n    const { className, isCurrentPlayer = false, player, team } = props;\n    const theme = useRecoilValue(themeState);\n    return (\n        <Tag\n            theme={themeData[theme]}\n            themeType={theme}\n            team={team}\n            className={classnames(className, { \"is_player_turn\": isCurrentPlayer })}>\n            {isCurrentPlayer && <ThinkingIcon className=\"on_table\" />}\n            <div className=\"player_info\">\n                <div className=\"team\"></div>\n                <div className=\"name\">{player}</div>\n            </div>\n        </Tag>\n    )\n}\n\nconst Names = styled.div`\n    position: relative;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n`\n\nconst Nameplate = () => {\n    const players = useRecoilValue(relationWithUser);\n    const user = useRecoilValue(userNameState);\n    const currentPlayer = useRecoilValue(currentPlayerName);\n    const trump = useRecoilValue(trumpState);\n    const userTeam = useRecoilValue(userTeamState);\n    const order = ['cross', 'left', 'right', 'user'];\n    const orderedPlayers = [players.teammate, players.nextPlayer, players.previousPlayer, user];\n    const anotherTeam = [TeamTypes.TeamOne, TeamTypes.TeamTwo].find(team => team !== userTeam) as TeamTypes;\n    const teamArray = [userTeam, anotherTeam, anotherTeam, userTeam];\n\n    return (\n        <Names className=\"players_name\">\n            {orderedPlayers.map((player, index) => (\n                <PlayerNameTag\n                    key={order[index]}\n                    className={`tag_${order[index]}`}\n                    player={player}\n                    isCurrentPlayer={!!trump && (currentPlayer === player)}\n                    team={teamArray[index] || TeamTypes.TeamOne}\n                />\n            )\n            )}\n        </Names>\n    )\n}\n\nexport default Nameplate","import React, { useEffect } from 'react';\nimport db from \"database\";\nimport { useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport { Team } from 'types/player';\nimport { Card as CardInterface, CardSuitType } from 'types/card';\nimport { userRoomState, userNameState } from 'store/user';\nimport { teamScoresState } from 'store/score';\nimport { userWinTricksState } from 'store/winTricks';\nimport { otherPlayerDeckState } from 'store/deck';\nimport { thisRoundCardsState, isThisRoundEndState, trumpState, thisRoundSuitState } from 'store/game';\nimport { relationWithUser, OrderedStartFromTeamOne } from 'store/players';\nimport { getBiggestCard } from 'util/game';\nimport sleep from 'util/sleep';\nimport Card from 'components/GameRoom/Card';\n\nconst CardGroup = styled.div`\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 100%;\n\n    .played_card {\n        position: absolute;\n        &.user {\n        left: 50%;\n        bottom: 25px;\n        transform: translateX(-50%);\n        }\n        &.cross {\n            left: 50%;\n            top: 25px;\n            transform: translateX(-50%);\n        }\n        &.left {\n            left: 25px;\n            top: 50%;\n            transform-origin: left top;\n            transform: rotate(90deg) translate(-50%, -100%);\n        }\n        &.right {\n            right: 25px;\n            top: 50%;\n            transform-origin: right top;\n            transform: rotate(90deg) translateX(50%);\n        }\n    }\n`\n\nconst PlayedCard = () => {\n    const roomId = useRecoilValue(userRoomState);\n    const user = useRecoilValue(userNameState);\n    const { teammate, nextPlayer, previousPlayer } = useRecoilValue(relationWithUser);\n    const teamArray = useRecoilValue(OrderedStartFromTeamOne);\n    const trump = useRecoilValue(trumpState);\n    const currentSuit = useRecoilValue(thisRoundSuitState);\n    const [thisRoundCards, updateThisRoundCards] = useRecoilState(thisRoundCardsState);\n    const [teamScores, updateTeamScores] = useRecoilState(teamScoresState);\n    const isThisRoundEnd = useRecoilValue(isThisRoundEndState);\n    const setOtherPlayerDeck = useSetRecoilState(otherPlayerDeckState);\n    const setUserWinTricks = useSetRecoilState(userWinTricksState);\n    const roomRef = db.database().ref(`/${roomId}`);\n\n    useEffect(() => {\n        const cardsRef = db.database().ref(`/${roomId}`)\n            .child('gameInfo')\n            .child('thisRoundCards');\n        cardsRef.on(\"value\", d => {\n            const cards = d.val() || [];\n            updateThisRoundCards(orderCards(cards));\n\n            const playedPlayer = cards[cards.length - 1]?.player;\n            if (playedPlayer && playedPlayer !== user) {\n                setOtherPlayerDeck(pre => ({\n                    ...pre,\n                    [playedPlayer]: pre[playedPlayer] - 1\n                }))\n            }\n        });\n\n        return () => {\n            cardsRef.off();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        if (isThisRoundEnd) {\n            handleRoundEnded();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isThisRoundEnd])\n\n    const handleRoundEnded = async () => {\n        const currentPlayerRef = roomRef.child('currentPlayer');\n        await currentPlayerRef.set(null);\n        await sleep(2000);\n        const winner = getRoundWinner();\n        updatePoints(winner);\n        if (winner === user) {\n            collectThisTrick();\n        }\n        await initRoundData();\n        currentPlayerRef.set(winner);\n    }\n\n    const initRoundData = async () => {\n        const thisRoundSuitRef = roomRef.child('gameInfo').child('thisRoundSuit');\n        const thisRoundCardsRef = roomRef.child('gameInfo').child('thisRoundCards');\n        await Promise.allSettled([\n            thisRoundSuitRef.remove(),\n            thisRoundCardsRef.remove()\n        ]);\n    }\n\n    const getRoundWinner = () => {\n        const winnerIndex = getBiggestCard(\n            trump?.suit as CardSuitType,\n            currentSuit as CardSuitType,\n            thisRoundCards);\n        const playersOrder = [teammate, nextPlayer, previousPlayer, user];\n        return playersOrder[winnerIndex];\n    };\n\n    const updatePoints = (winner: string) => {\n        const winnerTeam = teamArray\n            .map((player, i) => ({ player, team: `team${i % 2 + 1}` }))\n            .find(p => p.player === winner)?.team as Team;\n\n        if (winnerTeam) {\n            updateTeamScores({\n                ...teamScores,\n                [winnerTeam]: teamScores[winnerTeam] + 1\n            })\n        }\n    };\n\n    interface PlayedCard {\n        player: string;\n        card: CardInterface\n    }\n\n    const orderCards = (cards: PlayedCard[]) => {\n        if (!cards.length) return [];\n        const orderedPlayers = [teammate, nextPlayer, previousPlayer, user];\n        const result = orderedPlayers.map(playerName => {\n            const card = cards.find(card => card.player === playerName) as PlayedCard | null;\n            return card?.card;\n        })\n        return result as CardInterface[];\n    }\n\n    const collectThisTrick = () => {\n        setUserWinTricks(pre => ([...pre, thisRoundCards]))\n    };\n\n    return (\n        <CardGroup className=\"played_cards_group\">\n            {thisRoundCards.map((card, index) => {\n                const order = ['cross', 'left', 'right', 'user'];\n                return card && (\n                    <Card\n                        key={order[index]}\n                        className={classnames(\"played_card\", order[index])}\n                        number={card.number}\n                        suit={card.suit}\n                        hasDetail\n                    />\n                )\n            })}\n        </CardGroup>\n    )\n}\n\nexport default PlayedCard","import { Card, CardSuitType } from 'types/card';\n\nconst countPoint = (trump: CardSuitType, currentSuit: CardSuitType, card: Card) => {\n    let point = 0;\n    if (card.suit === trump) {\n        point += 20;\n    }\n    if (card.suit !== trump && card.suit !== currentSuit) {\n        point -= 20;\n    }\n    point += card.number;\n    return point;\n};\n\nexport const getBiggestCard = (trump: CardSuitType, currentSuit: CardSuitType, cards: Card[]) => {\n    const point = cards.map((card) => {\n        const point = countPoint(trump, currentSuit, card);\n        return point;\n    });\n\n    const winnerIndex = point.indexOf(Math.max(...point));\n    return winnerIndex;\n};","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from \"style/theme\";\nimport Nameplate from './Nameplate';\nimport PlayedCard from './PlayedCard';\n\nconst Table = styled.div`\n    width: 60vw;\n    height: 60vw;\n    border-radius: 10px;\n    position: relative;\n    transition: all .3s;\n    border: 1px solid ${({theme}) => theme.border_color };\n    background-color: ${({theme}) => theme.bg };\n`\n\n\nconst themeData = {\n    light: { \n        bg: '#f9f9f9',\n        border_color: 'transparent'\n    },\n    dark: { \n        bg: color.$dark_dim_bg_color,\n        border_color: color.$dark_dim_border_color\n    },\n}\n\nconst CardTable = () => {\n    const [theme] = useRecoilState(themeState);\n    return (\n        <Table theme={themeData[theme]} className=\"card_table\">\n            <PlayedCard />\n            <Nameplate />\n        </Table>\n    )\n}\n\nexport default CardTable","import React from 'react';\nimport styled from 'styled-components';\nimport classnames from 'classnames'\nimport { color } from 'style/theme';\nimport { ThemeTypes } from 'types/theme';\n\nconst Box = styled.div`\n    display: flex;\n    border-radius: 5px;\n    overflow: hidden;\n    transition: .3s all;\n    border: ${({ theme }) => theme.border}; \n\n    .title {\n        flex-grow: 0;\n        text-align: center;\n        padding: 5px 10px;\n        color: white;\n        font-size: 14px;\n        letter-spacing: 2px;\n        writing-mode: vertical-lr;\n        transition: .3s all;\n        color: ${({ theme }) => theme.fc};\n        border-right: ${({ theme }) => theme.border};\n        background-color: ${({ theme }) => theme.title_bg};\n    }\n\n    .content {\n        flex-grow: 1;\n        padding: 8px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        transition: .3s all;\n        background-color: ${({ theme }) => theme.bg};\n    }\n`\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        fc: 'white',\n        title_bg: color.$orange_color,\n        border: '1px solid transparent',\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        fc: color.$light_pink_color,\n        title_bg: color.$dark_dim_bg_color,\n        border: '1px solid' + color.$dark_dim_border_color,\n    },\n}\n\ninterface InfoBoxProperty {\n    theme: ThemeTypes;\n    title: string;\n    children: React.ReactNode;\n    className: string;\n}\n\nconst InfoBox = (props: InfoBoxProperty) => {\n    const { theme, title, children, className } = props;\n    return(\n    <Box theme={themeData[theme]} className={classnames(\"info_box\", className)}>\n        <span className=\"title\">{title}</span>\n        <span className=\"content\">{children}</span>\n    </Box>\n)}\n\nexport default InfoBox;","import React from 'react';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport Suit from 'components/Global/Suit';\nimport { themeState } from 'store/theme';\nimport { trumpState } from 'store/game';\nimport { teamShouldWinState } from 'store/bind';\nimport { teamScoresState } from 'store/score';\nimport { color } from 'style/theme';\nimport { suitColor } from 'util/suit'\nimport { TeamTypes } from 'types/player';\nimport InfoBox from './InfoBox';\n\nconst Board = styled.div`\n    display: flex;\n    justify-content: space-between;\n    width: 60vw;\n    margin-top: 40px;\n\n    & > div {\n        &:first-child {\n            flex: 1 0 auto;\n        }\n        &:last-child {\n            flex: 1.2 0 auto;\n            margin-left: 15px;\n        }\n    }\n`\n\nconst Point = styled.div`\n        &.team1 {\n            .team__name {\n                transition: .3s all;\n                background-color: ${({ theme }) => theme.team1color};\n            }\n        }\n\n        &.team2 {\n            &::before {\n            content: \"\";\n            display: block;\n            width: 100%;\n            border-top: 1px solid ${({ theme }) => theme.border};\n            margin: 5px 0;\n            }\n            .team__name {\n                transition: .3s all;\n                background-color: ${({ theme }) => theme.team2color};\n            }\n        }\n\n        .team__name {\n        display: inline-block;\n        width: 10px;\n        height: 10px;\n        margin-right: 10px;\n        border-radius: 100%;\n        }\n\n        .team__tricks {\n        letter-spacing: 1px;\n        .now_win {\n            font-size: 14px;\n            margin-right: 3px;\n            transition: .3s all;\n            color: ${({theme}) => theme.fc};\n        }\n        .should_win {\n            font-size: 12px;\n            color: #7e7e7e;\n        }\n    }\n`\n\ninterface SuitProperty {\n    suitColor: string;\n}\n\nconst StyledSuit = styled(Suit)<SuitProperty>`\n    font-size: 20px;\n    transition: .3s all;\n    color: ${({suitColor, theme}) => theme.suit[suitColor]};\n`\n\nconst themeData = {\n    light: {\n        border: color.$orange_color,\n        fc: color.$default_font_color,\n        suit: {\n            red: color.$red_suit_color,\n            black: color.$black_suit_color\n        },\n        team1color: color.$pink_color,\n        team2color: color.$brown_color\n    },\n    dark: {\n        border: color.$dark_dim_border_color,\n        fc: color.$light_pink_color,\n        suit: {\n            red: color.$dark_red_suit_color,\n            black: color.$light_pink_color,\n        },\n        team1color:color.$fluorescent_pink_color,\n        team2color: color.$fluorescent_yellow_color\n    },\n}\n\ninterface PointInfoProperty {\n    team: TeamTypes;\n}\nconst PointInfo = (props: PointInfoProperty) => {\n    const { team } = props;\n    const [theme] = useRecoilState(themeState);\n    const teamShouldWin = useRecoilValue(teamShouldWinState);\n    const teamScores = useRecoilValue(teamScoresState);\n    return (\n        <Point theme={themeData[theme]} className={classnames('team', team)}>\n            <span className=\"team__name\"></span>\n            <span className=\"team__tricks\">\n                <span className=\"now_win\">{teamScores[team]}</span>\n                <span className=\"should_win\">/{teamShouldWin[team]}</span>\n            </span>\n        </Point>\n    )\n}\n\nconst MainInfo = () => {\n    const [theme] = useRecoilState(themeState);\n    const trump = useRecoilValue(trumpState);\n    return (\n        <Board theme={themeData[theme]} className=\"main_info\">\n            <InfoBox\n                theme={theme}\n                title=\"王牌\"\n                className=\"trump\">\n                <StyledSuit \n                    theme={themeData[theme]}\n                    suitColor={suitColor(trump?.suit)}\n                    suit={trump?.suit ? trump.suit : null}\n                    className=\"suit\"\n                />\n            </InfoBox>\n            <InfoBox theme={theme} title=\"戰況\" className=\"team\">\n                <PointInfo team={TeamTypes.TeamOne} />\n                <PointInfo team={TeamTypes.TeamTwo} />\n            </InfoBox>\n        </Board>\n    )\n}\n\nexport default MainInfo;","import React from 'react';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { navState } from 'store/user';\nimport { color } from \"style/theme\";\n\ninterface TogglerProperty  {\n    border: string;\n}\n\nconst Toggler = styled.button<TogglerProperty>`\n        transform: translateX(-50%);\n        display: flex;\n        align-items: center;\n        width: 17vw;\n        height: 17vw;\n        padding: 0;\n        border-radius: 50%;\n        transition: 0.4s all;\n        border: 1px solid ${({ border }) => border};\n        background-color: ${({ color }) => color};\n`\n\ninterface SideNavProperty  {\n    height: string;\n}\n\nconst SideNav = styled.div<SideNavProperty>`\n    display: flex;\n    position: absolute;\n    left: 100%;\n    height: ${({ height }) => height};\n    transition: .3s all ease-in-out;\n\n    &.won_tricks {\n        bottom: 7vw;\n        width: 62vw;\n    }\n\n    &.settings {\n        bottom: 15vw;\n        width: 55vw;\n    }\n\n    &.isOpen {\n        transform: translateX(-100%);\n    }\n\n    &.hide {\n        transform: translateX(50%);\n    }\n\n    .content_box {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n        padding: 8px 0;\n        margin-top: -15px;\n        border-bottom-left-radius: 6px;\n        border-top-left-radius: 6px;\n        overflow-y: scroll;\n        transition:  0.3s all;\n        color: ${({ theme }) => theme.fg};\n        border: 1px solid ${({ theme }) => theme.border};\n        border-right: none;\n        background-color: ${({ theme }) => theme.bg};\n        .scroll_box{\n            width: 100%;\n            height: 100%;\n            padding: 0 10px;\n            box-sizing: border-box;\n            overflow-y: scroll;\n        }\n\n        .title {\n            text-align: center;\n            font-size: 14px;\n            letter-spacing: 1px;\n            padding-bottom: 5px;\n            margin-bottom: 5px;\n            border-bottom: 1px solid ${({ color, theme }) => {\n        if (theme === 'light') {\n            return color\n        } else {\n            return theme.border\n        };\n    }\n    }\n        }\n    }\n`\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        fg: color.$default_font_color,\n        border: 'transparent',\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        fg: 'white',\n        border: color.$dark_border_color,\n    },\n}\n\ninterface SideInfoProperty  {\n    title: string;\n    type: string | null;\n    renderIcon: React.ReactNode;\n    content: React.ReactNode;\n    className: string;\n    color: string;\n    height: string;\n    border: string;\n}\n\nconst SideInfo = (props: SideInfoProperty) => {\n    const { title, type, renderIcon, content, className, color, height, border } = props;\n    const [nowNav, setNowNav] = useRecoilState(navState);\n    const [theme] = useRecoilState(themeState);\n\n    const handleToggle = () => {\n        if (type === nowNav) {\n            setNowNav(null);\n        } else {\n            setNowNav(type);\n        }\n    }\n\n    return (\n        <SideNav\n            theme={themeData[theme]}\n            height={height}\n            color={color}\n            className={classnames(\n                \"side_nav\",\n                className,\n                {\n                    \"isOpen\": type === nowNav,\n                    \"hide\": nowNav && type !== nowNav\n                })}>\n            <Toggler\n                border={border}\n                onClick={handleToggle}\n                color={color}\n                className=\"toggler\">\n                {renderIcon}\n            </Toggler>\n            <div className=\"content_box\">\n                <div className=\"scroll_box\">\n                    <p className=\"title\">{title}</p>\n                    {content}\n                </div>\n            </div>\n        </SideNav>\n    )\n}\n\nexport default SideInfo","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilState, useSetRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { modalState } from 'store/modal';\nimport { navState } from 'store/user';\nimport { color } from 'style/theme';\nimport Button from 'components/Global/Button';\nimport ThemeToggler from 'components/Global/ThemeToggler';\n\nconst Item = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-left: 2px;\n    padding: 6px 0;\n    \n    &:not(:last-child) {\n        transition: 0.3s border-bottom; \n        border-bottom: 1px solid ${({ theme }) => theme.b_bottom};\n    }\n\n    & > span {\n        font-size: 13px;\n        margin-left: 5px;\n        margin-right: 10px;\n    }\n`\n\nconst SettingButton = styled(Button)`\n    padding: 5px 8px;\n`\n\nconst themeData = {\n    light: { \n        b_bottom: color.$under_line_color,\n        exit_button: color.$orange_color,\n        mail_button: color.$green_color,\n    },\n    dark: { \n        b_bottom: color.$dark_dim_border_color,\n        exit_button: color.$fluorescent_orange_color,\n        mail_button: color.$fluorescent_green_color,\n    },\n}\n\nconst Content = () => {\n    const [theme] = useRecoilState(themeState);\n    const setModalType = useSetRecoilState(modalState);\n    const setNowNav = useSetRecoilState(navState);\n    return (\n    <>\n        <Item theme={themeData[theme]}>\n            <span>更換主題</span>\n            <ThemeToggler />\n        </Item>\n        <Item theme={themeData[theme]}>\n            <span>離開遊戲</span>\n            <SettingButton \n                onClick={()=>{\n                    setNowNav(null);\n                    setModalType('cofirm-leave')\n                }}\n                color={themeData[theme].exit_button}\n            >EXIT</SettingButton>\n        </Item>\n    </>\n)}\n\nexport default Content;","import React from 'react';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\nimport SideInfo from 'components/GameRoom/SideInfo';\nimport Content from './Content';\nimport { NavigatorTypes } from 'types/navigator';\n\n\nconst Icon = styled.div`\n    position: relative;\n    margin-left: 8px;\n\n    .cross {\n        display: block;\n        width: 13px;\n        position: absolute;\n        transition: 0.4s all, 0.3s border-top;\n        transform-origin: center;\n        border-top: 1px solid ${({ theme }) => theme.line};\n\n        &.vertical {\n            transform: rotate(90deg);\n        }\n    }\n\n    &.isOpen {\n        .cross {\n                &.vertical {\n                    transform: rotate(45deg);\n                }\n\n                &.horizental {\n                    transform: rotate(-45deg);\n                }\n            }\n    }\n`\n\nconst themeData = {\n    light: { \n        button_bg: color.$green_color,\n        line: 'white',\n        border: 'transparent'\n    },\n    dark: { \n        button_bg: color.$dark_dim_bg_color,\n        line: color.$dark_border_color,\n        border: color.$dark_border_color,\n    },\n}\n\ninterface PlusIconProperty  {\n    isOpen: boolean;\n}\n\nconst PlusIcon = (props: PlusIconProperty) => {\n    const { isOpen } = props;\n    const [theme] = useRecoilState(themeState);\n    return(\n    <Icon theme={themeData[theme]} className={classnames(\"plus_icon\",{\"isOpen\": isOpen})}>\n        <span className=\"cross vertical\"></span>\n        <span className=\"cross horizental\"></span>\n    </Icon>\n)}\n\ninterface SettingsProperty {\n    active: boolean;\n}\nconst Settings = (props: SettingsProperty) => {\n    const { active } = props;\n    const [theme] = useRecoilState(themeState);\n    return (\n        <SideInfo \n            title=\"設定\"\n            type={NavigatorTypes.Settings}\n            height=\"40vw\"\n            border={themeData[theme].border}\n            color={themeData[theme].button_bg}\n            renderIcon={<PlusIcon isOpen={active}/>}\n            content={<Content/>}\n            className=\"settings\"\n        />\n    )\n}\n\nexport default Settings;","import React from 'react';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\n\nconst StyledCardIcon = styled.div`\n    display: flex;\n\n    .card {\n        display: block;\n        width: 9px;\n        height: 13px;\n        border-radius: 2px;\n        transition: 0.4s all;\n        border: 1px solid ${({ theme }) => theme.line};\n        background-color: ${({ theme }) => theme.bg};\n\n        &:nth-child(1) {\n            transform: translate(8px, 0px);\n            z-index: 12;\n        }\n    }\n\n    &.isOpen {\n        .card{\n            &:nth-child(1) {\n                    transform: rotate(-15deg) translate(7px, 1px);\n            }\n\n            &:nth-child(2) {\n                transform: rotate(8deg) translate(1px, -2px);\n            }\n        }\n    }\n`\n\nconst themeData = {\n    light: { \n        bg: color.$orange_color,\n        line: 'white',\n    },\n    dark: { \n        bg: color.$dark_bg_color,\n        line: color.$dark_border_color\n    },\n}\n\ninterface CardIconProperty  {\n    isOpen: boolean;\n}\nconst CardIcon = (props: CardIconProperty) => {\n    const { isOpen } = props;\n    const [theme] = useRecoilState(themeState);\n    return (\n    <StyledCardIcon \n        theme={themeData[theme]}\n        className={classnames(\"card_icon\",{\"isOpen\": isOpen})}>\n        <span className=\"card\"></span>\n        <span className=\"card\"></span>\n    </StyledCardIcon>\n)}\n\nexport default CardIcon;","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilValue } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { userWinTricksState } from 'store/winTricks';\nimport { color } from 'style/theme';\nimport Card from 'components/GameRoom/Card';\n\nconst List = styled.div`\n    display: flex;\n    flex-direction: column;\n    margin-left: 2px;\n\n    .trick {\n        display: flex;\n        justify-content: space-between;\n        padding: 6px 0;\n        & + .trick {\n            transition: 0.3s all;\n            border-top: 1px solid ${({ theme }) => theme.b_bottom};\n        }\n\n        .card_in_won_trick {\n            width: 13vw;\n            height: 16vw;\n        }\n    }\n`\n\nconst Empty = styled.p`\n    text-align: center;\n    font-size: 14px;\n    margin-top: 5px;\n    color: ${color.$unable_color};\n`\n\nconst themeData = {\n    light: { \n        b_bottom: color.$under_line_color,\n    },\n    dark: { \n        b_bottom: color.$dark_dim_border_color,\n    },\n}\n\nconst Content = () => {\n    const theme = useRecoilValue(themeState);\n    const userWinTricks = useRecoilValue(userWinTricksState);\n    return (\n        <>\n        {!userWinTricks.length\n        ?<Empty>加把勁！隊友需要你！</Empty>\n        :<List \n            theme={themeData[theme]}\n            className=\"won_trick_list\">\n            {userWinTricks.map((trick, index) => (\n            <div \n                key={'trick'+index} \n                className=\"trick\">\n                {trick.map(card =>\n                (<Card\n                    className=\"card_in_won_trick\"\n                    key={card.number+card.suit}\n                    number={card.number}\n                    suit={card.suit}\n                    hasDetail\n                />))}\n            </div>))}\n        </List>}\n        </>\n    )\n}\n\nexport default Content;","import React from 'react';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\nimport SideInfo from 'components/GameRoom/SideInfo';\nimport Icon from './Icon';\nimport Content from './Content';\nimport { NavigatorTypes } from 'types/navigator';\n\nconst themeData = {\n    light: { \n        button_bg: color.$orange_color,\n        border: 'transparent'\n    },\n    dark: { \n        button_bg: color.$dark_dim_bg_color,\n        border: color.$dark_border_color,\n    },\n}\n\ninterface WonTricksProperty {\n    active: boolean;\n}\n\nconst WonTricks = (props: WonTricksProperty) => {\n    const { active } = props;\n    const [theme] = useRecoilState(themeState);\n    return(\n        <SideInfo \n            title=\"你贏的墩們\"\n            type={NavigatorTypes.WonTricks}\n            height=\"70vw\"\n            border={themeData[theme].border}\n            color={themeData[theme].button_bg}\n            renderIcon={<Icon isOpen={active}/>}\n            content={<Content/>}\n            className=\"won_tricks\"\n        />\n    )}\n\nexport default WonTricks","import React from 'react';\nimport styled from 'styled-components';\nimport Settings from 'components/GameRoom/Settings';\nimport WonTricks from 'components/GameRoom/WonTricks';\nimport { color } from 'style/theme';\nimport { navState } from 'store/user';\nimport { useRecoilValue } from 'recoil';\nimport { NavigatorTypes } from 'types/navigator';\n\ninterface BackgroundProperty  {\n    nowNav: string | null;\n}\n\nconst Background = styled.nav<BackgroundProperty>`\n    z-index: ${props => props.nowNav ? 30 : 0};\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: ${props => props.nowNav\n        ? color.$shadow\n        : 'transparent'\n    };\n    transition: .4s all ease-in-out;\n`\n\nconst Navbar = () => {\n    const nowNav = useRecoilValue(navState);\n    return (\n        <Background\n            nowNav={nowNav}\n            className=\"side_navbar\">\n            <WonTricks active={nowNav === NavigatorTypes.WonTricks} />\n            <Settings active={nowNav === NavigatorTypes.Settings} />\n        </Background>\n    )\n};\n\nexport default Navbar;","import React, { useEffect } from 'react';\nimport { useRecoilValue, useSetRecoilState, useRecoilState } from 'recoil';\nimport db from \"database\";\nimport styled from 'styled-components';\nimport { color } from \"style/theme\";\nimport { generateNewDeck } from 'util/deck';\nimport useInitData from \"util/hook/useInitData\";\nimport { userIndexState, userRoomState, userIDState } from 'store/user';\nimport { modalState } from 'store/modal';\nimport { userDeckState, otherPlayerDeckState } from 'store/deck';\nimport { themeState } from 'store/theme';\nimport { relationWithUser } from 'store/players';\nimport { currentPlayerName, thisRoundSuitState } from 'store/game';\nimport ModalRoot from 'components/GameRoom/Modal/ModalRoot';\nimport Cards from 'components/GameRoom/Cards';\nimport CardTable from 'components/GameRoom/CardTable';\nimport MainInfo from 'components/GameRoom/MainInfo';\nimport Navbar from 'components/GameRoom/Navbar';\n\nconst Room = styled.div`\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n\n        transition: .3s background-color;\n        background-color: ${({ theme }) => theme.bg};\n`\n\nconst themeData = {\n    light: { bg: '#f3e9e9' },\n    dark: { bg: color.$dark_bg_color },\n}\n\nconst GameRoom = () => {\n    const [theme] = useRecoilState(themeState);\n    const [{ initGameRoomData }] = useInitData();\n    const userIndex = useRecoilValue(userIndexState);\n    const userID = useRecoilValue(userIDState);\n    const setUserDeck = useSetRecoilState(userDeckState);\n    const setOtherPlayerDeck = useSetRecoilState(otherPlayerDeckState);\n    const { nextPlayer, teammate, previousPlayer } = useRecoilValue(relationWithUser);\n    const setModalType = useSetRecoilState(modalState);\n    const setNowPlayerState = useSetRecoilState(currentPlayerName);\n    const setThisRoundSuit = useSetRecoilState(thisRoundSuitState);\n    const roomId = useRecoilValue(userRoomState);\n    const roomRef = db.database().ref(`/${roomId}`);\n\n    useEffect(() => {\n        initGameData();\n        listenOnCurrentPlayer();\n        listenOnThisRoundSuit();\n        listenOnChangeRouteEvent();\n        detectUserDisConnect();\n\n        return () => {\n            removeListeners();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const initGameData = async () => {\n        const gameInfoRef = roomRef.child('gameInfo');\n        await gameInfoRef.remove()\n        initGameRoomData();\n        await dealDeck();\n    }\n\n    const dealDeck = async () => {\n        const gameInfoRef = roomRef.child('gameInfo');\n\n        // if (userIndex === 0) {\n            const newDeck = generateNewDeck();\n            await gameInfoRef.update({ deck: newDeck });\n        // }\n\n        gameInfoRef.child('deck').on(\"value\", (data) => {\n            const deck = data.val();\n            setOtherPlayerDeck({\n                [nextPlayer]: 13,\n                [teammate]: 13,\n                [previousPlayer]: 13,\n            })\n            if (deck) {\n                setUserDeck(deck[userIndex]);\n            }\n        })\n    };\n\n    const listenOnCurrentPlayer = () => {\n        const currentPlayerRef = roomRef.child('currentPlayer');\n        currentPlayerRef.on(\"value\", (data) => {\n            const nowPlayerID = data.val();\n            setNowPlayerState(nowPlayerID);\n        })\n    };\n\n    const listenOnThisRoundSuit = () => {\n        const roundSuitRef = roomRef.child('gameInfo').child('thisRoundSuit');\n        roundSuitRef.on(\"value\", (data) => {\n            const roundSuit = data.val();\n            setThisRoundSuit(roundSuit)\n        })\n    };\n\n    const listenOnChangeRouteEvent = () => {\n        const changeMateRef = roomRef.child('changeMate');\n        const leaveRef = roomRef.child('someoneLeaveGame');\n        const restartRef = roomRef.child('restart');\n        const disconnectedRef = roomRef.child('someoneDisconnected')\n\n        changeMateRef.on(\"value\", (data) => {\n            const isTrigger = data.val();\n            if (isTrigger) {\n                setModalType('countdown-change-mate')\n            }\n        });\n        leaveRef.on(\"value\", (data) => {\n            const isTrigger = data.val();\n            if (isTrigger) {\n                setModalType('countdown-leave')\n            }\n        });\n        restartRef.on(\"value\", (data) => {\n            const isTrigger = data.val();\n            if (isTrigger) {\n                setModalType('countdown-restart')\n            }\n        });\n\n        disconnectedRef.on(\"value\", async (data) => {\n            const isTrigger = data.val();\n            if (isTrigger) {\n                setModalType('countdown-destroy');\n            }\n        });\n    }\n\n    const detectUserDisConnect = () => {\n        roomRef.onDisconnect().update({ someoneLeaveGame: true });\n        roomRef\n            .child('playersInfo')\n            .child(userID)\n            .onDisconnect()\n            .remove();\n    };\n\n    const removeListeners = () => {\n        const gameInfoRef = roomRef.child('gameInfo');\n        const deckInfo = gameInfoRef.child('deck');\n        const currentPlayerRef = roomRef.child('currentPlayer');\n        const roundSuitRef = roomRef.child('gameInfo').child('thisRoundSuit');\n        const changeMateRef = roomRef.child('changeMate');\n        const leaveRef = roomRef.child('someoneLeaveGame');\n        const restartRef = roomRef.child('restart');\n        const disconnectedRef = roomRef.child('someoneDisconnected')\n        currentPlayerRef.off();\n        deckInfo.off();\n        roundSuitRef.off();\n        changeMateRef.off();\n        leaveRef.off();\n        restartRef.off();\n        gameInfoRef.remove();\n        disconnectedRef.remove();\n        roomRef.onDisconnect().cancel();\n        roomRef\n            .child('playersInfo')\n            .child(userID)\n            .onDisconnect()\n            .cancel();\n    }\n\n    return (\n        <Room theme={themeData[theme]} className=\"game_room\">\n            <Cards />\n            <CardTable />\n            <MainInfo />\n            <ModalRoot initGameData={initGameData} />\n            <Navbar />\n        </Room>)\n}\n\nexport default GameRoom;","import React, { useEffect, useState } from 'react';\nimport db from \"database\";\nimport { useRecoilValue } from 'recoil';\nimport styled from 'styled-components';\nimport { useHistory } from 'react-router';\nimport { RouteComponentProps } from \"react-router-dom\";\nimport NameFillIn from 'components/Global/NameFillIn';\nimport Button from \"components/Global/Button\";\nimport { FirebaseRoom } from 'types/room';\nimport { ThemeTypes } from 'types/theme';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme'\nimport useFirebaseRoom from \"util/hook/useFirebaseRoom\";\n\ntype Params = { roomId: string };\n\nconst themeData = {\n    light: {\n        stripes_1: '#f7cbca',\n        stripes_2: '#faf7f0',\n        content_bg: '#faf8ece8',\n        decoration_arrows: '#f7cbca',\n        title_block_1: color.$highlight_color,\n        title_block_2: color.$green_color,\n        title_block_3: color.$orange_color,\n        title_fg: 'white',\n        button_color: '#f7cbca',\n        fg: color.$default_font_color,\n    },\n    dark: {\n        stripes_1: '#151615',\n        stripes_2: '#1F211F',\n        content_bg: color.$dark_dim_bg_color,\n        decoration_arrows: color.$fluorescent_yellow_color,\n        title_block_1: color.$fluorescent_orange_color,\n        title_block_2: color.$fluorescent_green_color,\n        title_block_3: color.$fluorescent_yellow_color,\n        title_fg: color.$default_font_color,\n        button_color: color.$fluorescent_pink_color,\n        fg: color.$dark_default_font_color,\n    },\n}\n\ninterface PageProperty {\n    themeType: ThemeTypes;\n}\n\nconst Page = styled.div<PageProperty>`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-image: \n        linear-gradient(39deg, \n            ${({ theme }) => theme.stripes_1} 22.22%, \n            ${({ theme }) => theme.stripes_2} 22.22%, \n            ${({ theme }) => theme.stripes_2} 50%, \n            ${({ theme }) => theme.stripes_1} 50%, \n            ${({ theme }) => theme.stripes_1} 72.22%, \n            ${({ theme }) => theme.stripes_2} 72.22%, \n            ${({ theme }) => theme.stripes_2} 100%);\n    background-size: 42.90px 34.74px;\n\n    .content {\n        display: flex;\n        flex: 1 1 auto;\n        flex-direction: column;\n        align-items: center;\n        padding: 40px 0 20px;\n        box-sizing: border-box;\n        background-color: ${({ theme }) => theme.content_bg};\n        border: 1px solid ${color.$fluorescent_pink_color};\n        border-radius: 10px;\n        position: relative;\n    }\n\n    .invite_content {\n        position: absolute;\n        top: 0;\n        transform: translateY(-50%);\n\n        span {\n            display: inline-block;\n            position: relative;\n            color: ${({ theme }) => theme.title_fg};\n\n            &:first-child {\n                font-size: 16px;\n                padding: 3px;\n                background-color: ${({ theme }) => theme.title_block_1};\n                transform: rotate(-1deg);\n            }\n\n            &:nth-child(2) {\n                z-index: 10;\n                font-size: 26px;\n                padding: 5px;\n                background-color: ${({ theme }) => theme.title_block_2};\n                transform: rotate(-4deg);\n            }\n    \n            &:last-child {\n                font-size: 18px;\n                padding: 2px;\n                background-color: ${({ theme }) => theme.title_block_3};\n                transform: rotate(3deg);\n            }\n        }\n    }\n\n    .decoration {\n        margin-bottom: 20px;\n\n        span {\n            display: block;\n            transform: rotate(90deg);\n            color: ${({ theme }) => theme.decoration_arrows};\n        }\n    }\n\n    .players_amount {\n        font-size: 13px;\n        margin-top: 10px;\n        color: ${({ theme }) => theme.fg};\n    }\n\n    .unable_content {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n\n        p {\n            color: ${({ theme }) => theme.fg};\n        }\n\n        button {\n            margin-top: 10px;\n        }\n    }\n`\nconst InvitePage = ({ match }: RouteComponentProps<Params>) => {\n    const roomId = match.params.roomId;\n    const theme = useRecoilValue(themeState);\n    const history = useHistory();\n    const [, { updateDbRoomData }] = useFirebaseRoom();\n    const [roomName, setRoomName] = useState('')\n    const [currentPlayer, setPlayers] = useState<string[]>([]);\n\n    useEffect(() => {\n        const getRoom = () => {\n            const roomRef = db.database().ref(\"/\").child(roomId);\n            roomRef.on('value', d => {\n                const roomData = d.val() as FirebaseRoom;\n                const currentPlayers = Object.values(roomData.playersInfo).map(p => p.name)\n                setPlayers([...currentPlayers])\n                setRoomName(roomData.roomName);\n            })\n        }\n        getRoom();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    const enterGame = () => {\n        updateDbRoomData(roomId);\n    };\n\n    return (\n        <Page\n            theme={themeData[theme]}\n            themeType={theme}\n            className=\"invite_page\"\n        >\n            <section className=\"content\">\n                <div className=\"invite_content\">\n                    <span>來自</span>\n                    <span>{roomName}</span>\n                    <span>的橋牌戰帖</span>\n                </div>\n\n                {currentPlayer.length > 3 ? (\n                    <div className=\"unable_content\">\n                        <p>🤯🤯🤯🤯🤯🤯🤯🤯🤯🤯</p>\n                        <p>遲來一歩！已經客滿了</p>\n                        <p>🤯🤯🤯🤯🤯🤯🤯🤯🤯🤯</p>\n                        <Button\n                            className=\"back_to_home_button\"\n                            color={themeData[theme].button_color}\n                            onClick={() => { history.push('/') }}\n                            type=\"button\"\n                        >\n                            回到首頁\n                        </Button>\n                    </div>\n                ) : (\n                    <>\n                        <div className=\"decoration\">\n                            <span>&#62;</span>\n                            <span>&#62;</span>\n                            <span>&#62;</span>\n                        </div>\n                        <NameFillIn\n                            actionText=\"立即加入戰局\"\n                            buttonText=\"GO\"\n                            onEnter={enterGame}\n                        />\n                        <p className=\"players_amount\">🍰 {\n                            currentPlayer.length > 1\n                                ? `${currentPlayer[0]} 跟其他 ${currentPlayer.length - 1} 位橋牌友`\n                                : `${currentPlayer[0]} `\n                        }已經加入 🍰</p>\n                    </>\n                )}\n            </section>\n        </Page>\n    )\n}\n\nexport default InvitePage;","import Home from './views/Home';\nimport WaitRoom from './views/WaitRoom';\nimport GameRoom from './views/GameRoom';\nimport InvitePage from './views/InvitePage';\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  // Redirect\n} from \"react-router-dom\";\n\nconst App = () => (\n    <>\n    <Router>\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route path=\"/w/:roomId/:userID\" component={WaitRoom} />\n        <Route path=\"/g/:roomId/:userID\" component={GameRoom} />\n        <Route path=\"/i/:roomId\" component={InvitePage} />\n      </Switch>\n    </Router>\n    </>\n)\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { RecoilRoot } from 'recoil';\nimport { GlobalStyle } from './style/globalStyle'\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <RecoilRoot>\n        <App />\n        <GlobalStyle />\n    </RecoilRoot>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}