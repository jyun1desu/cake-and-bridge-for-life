{"version":3,"sources":["types/theme.ts","style/theme.ts","style/globalStyle.ts","database/index.ts","store/theme.ts","types/player.ts","assets/logo.svg","assets/name-light.svg","assets/name-dark.svg","components/Home/Logo/index.tsx","components/Global/atoms/Modal/index.tsx","components/Global/atoms/Button/index.tsx","components/Global/atoms/Input/index.tsx","util/hook/useGameRoomName.ts","util/generateUniqueId.ts","store/players.ts","types/card.ts","store/user.ts","util/hook/useFirebaseRoom.ts","components/Home/RoomDialog/index.tsx","util/hook/useUserName.ts","components/Global/molecules/NameFillin/index.tsx","components/Global/atoms/ThemeToggler/index.tsx","store/modal.ts","store/deck.ts","store/bind.ts","types/types.ts","store/score.ts","store/game.ts","store/winTricks.ts","util/hook/useInitData.ts","views/Home/index.tsx","components/WaitRoom/PlayerWindow/index.tsx","components/Global/atoms/ShareIcon/index.tsx","util/sleep.ts","components/WaitRoom/SendInviteLinkButton/index.tsx","components/Global/atoms/Radio/index.tsx","components/WaitRoom/TeamRadios/index.tsx","util/generateArray.ts","components/Global/molecules/Loading/index.tsx","util/hook/useUserReadyStatus.ts","views/WaitRoom/index.tsx","util/deck.ts","util/suit.ts","components/Global/atoms/Suit/index.tsx","components/GameRoom/ThinkingIcon/index.tsx","components/GameRoom/Modal/ModalBinding/PlayerList.tsx","util/isObjectEquivalent.ts","components/GameRoom/Modal/ModalBinding/OptionButton.tsx","components/GameRoom/Modal/ModalBinding/OptionList.tsx","components/GameRoom/Modal/ModalBinding/BindList.tsx","components/GameRoom/Modal/ModalBinding/index.tsx","components/Global/molecules/ModalConfirm/index.tsx","assets/kanaheiclap.gif","components/GameRoom/Modal/ModalGiveUp/index.tsx","components/GameRoom/Modal/ModalResult/index.tsx","assets/bumpintowindow.gif","components/GameRoom/Modal/ModalRoot/index.tsx","components/GameRoom/Card/index.tsx","components/GameRoom/Cards/UserHandCards/index.tsx","components/GameRoom/Cards/OtherUserHandCards/index.tsx","components/GameRoom/Cards/index.tsx","components/GameRoom/CardTable/Nameplate/index.tsx","components/GameRoom/CardTable/PlayedCard/index.tsx","util/game.ts","components/GameRoom/CardTable/index.tsx","components/GameRoom/MainInfo/InfoBox/index.tsx","components/GameRoom/MainInfo/index.tsx","components/GameRoom/SideInfo/index.tsx","components/GameRoom/Settings/Content/index.tsx","components/GameRoom/Settings/index.tsx","components/GameRoom/WonTricks/Icon/index.tsx","components/GameRoom/WonTricks/Content/index.tsx","components/GameRoom/WonTricks/index.tsx","components/GameRoom/Navbar/index.tsx","views/GameRoom/index.tsx","views/InvitePage/index.tsx","App.tsx","reportWebVitals.js","index.tsx"],"names":["ThemeTypes","color","GlobalStyle","createGlobalStyle","db","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","TeamTypes","themeState","atom","key","default","existingChosenTheme","JSON","parse","localStorage","getItem","Light","defaultTheme","themeData","light","bg","fg","dark","StyledLogo","styled","div","theme","Logo","props","className","useRecoilState","nameIcon","NameLightIcon","NameDarkIcon","src","LogoSVG","alt","backgroundColor","StyledModalPage","animated","ModalPage","active","children","onDeactive","useRecoilValue","transitions","useTransition","from","opacity","transform","enter","leave","item","style","onClick","StyledButton","button","getButtonStyle","themeType","Button","type","size","classnames","styledInput","value","placeholder","onChange","onFocus","maxLength","useGameRoomName","useState","gameRoomName","setRoomName","warnMessage","setWarnMessage","validateRoomName","test","generateUniqueId","Math","random","toString","substring","CardSuitType","SuitColorType","playersData","teamArray","selector","get","map","data","team","OrderedStartFromTeamOne","playerDataState","filter","player","TeamOne","TeamTwo","playerData","name","handleIndex","index","relationWithUser","user","userNameState","userIndex","indexOf","nextIndex","teammateIndex","previousIndex","teammate","nextPlayer","previousPlayer","userIDState","userRoomState","userIndexState","userName","findIndex","userTeamState","playerList","length","find","navState","useFirebaseRoom","setUserID","useSetRecoilState","setLocalRoom","history","useHistory","updateDbRoomData","roomID","roomName","a","roomRef","database","ref","userID","current","Date","timestamp","userInfo","id","update","playersInfo","child","toPath","push","boxBorder","cancel_bg","cancel_fg","title_bg","title_fg","sub_title_fg","sub_title_bb","Content","box_border","CreateButton","isLengthValid","getButtonColor","e","RoomButton","RoomDialog","closeRoomList","roomList","userGameRoomName","Modal","stopPropagation","room","target","preventDefault","createRoom","useUserName","setUserName","validateUserName","isVaild","name_fg","border","button_color","NameForm","form","NameFillIn","onEnter","actionText","buttonText","Toggler","ThemeToggler","toggleTheme","useEffect","setItem","stringify","pre","Dark","modalState","userDeckState","otherPlayerDeckState","badDeck","userDeck","card","number","reduce","b","responseToBadDeck","OKtoPlay","ReadyTypes","GameStatusTypes","NavigatorTypes","userPickBindState","nowBindState","suit","Club","userPassState","playersCalledListState","availibleTricksState","min","Spade","trick","teamShouldWinState","calledPlayer","team1","team2","calledTeam","p","anotherTeam","calledTeamShouldWin","anotherTeamShouldWin","teamScoresState","currentPlayerName","thisRoundSuitState","thisRoundCardsState","trumpState","isUserTurnState","nowPlayer","isUserLastPlayerState","isThisRoundEndState","isGameEndState","team1ShouldWin","team2ShouldWin","team1Score","team2Score","userWinTricksState","useInitData","initUserName","useResetRecoilState","initUserRoom","initUserID","initModalType","initUserDeck","initScore","initUserPickBind","initNowBind","initPassState","initRoundCards","initTrump","initCalledList","initWinTricks","initPlayerData","initGameRoomData","initGameData","HomePage","Home","showRoomDialog","toggleRoomDialog","setRoomList","React","subscribeRooms","removeListeners","Firebase","on","roomsData","val","filterOutAbandonedRoom","Object","entries","obj","set","rooms","values","off","PlayerOrders","w_border","st_bg","st_border","cl_bg","cl_border","name_bg","name_st_fg","name_cl_fg","ready_fg","ready_bg","ready_border","Window","PlayerBox","order","playerName","defaultTeam","First","Fourth","playerTeam","ready","PlayerWindow","playersOrder","Second","Third","Icon","span","iconColor","ShareIcon","sleep","ms","Promise","resolve","setTimeout","icon_color","modal_color","Toast","SuccessToast","SendInviteLinkButton","roomId","isCopied","setIsCopied","inviteLink","navigator","clipboard","writeText","then","copyInviteLink","StyledRadio","marginRight","Radio","default_f","st_fg","cl_fg","RadioArea","TeamOption","isChosen","teamIndex","getBorder","TeamRadios","userTeam","handleChooseTeam","generateArray","Array","_","x","dot","LoadingModal","Loading","text","countdown","noOpacity","action","cancelReady","timeLeft","setTimeLeft","dots","countdownInterval","setInterval","clearInterval","includes","useUserReadyStatus","readyStatus","setReadyStatus","userId","isReady","once","setReady","userReadyStatus","Room","ReadyButton","buttonMessage","WaitRoom","setButtonMessage","setPlayerData","EnterGame","isAllReady","initWaitRoomData","detectUserDisConnect","userOrder","sort","userDefaultTeam","userData","sortedByTimestamp","enterGame","remove","prepareWaitRoom","onDisconnect","cancel","teamOneAmount","teamTwoAmount","dealCards","playerAmount","deck","players","i","cards","Heart","Diamond","cardAPoint","sortCards","shuffledDeck","floor","shuffle","j","buildNewDeck","suitColor","Black","Red","Suit","suitCode","getSuitHtmlCode","ThinkingIcon","t1_name_fg","t2_name_fg","t1_name_bg","t2_name_bg","binds_bg","red_suit_color","black_suit_color","pass_color","Player","teamColor","getUserTurnEffect","PlayInfo","calledList","isPlayerTurn","is_player_turn","called","isPassed","bind","PlayerList","setCalledList","calledBindsRef","allCalledBinds","isObjectEquivalent","aKeys","keys","bKeys","every","unable_color","OptionButton","isUnableBind","trickNumber","isPicked","number_c","OptionRow","Options","isUserTurn","suits","pickBindState","setPickBindState","nowBind","bindData","List","OptionList","tricks","Box","status_unable_bg","status_unable_fg","call_unable_bg","call_unable_fg","status_active_bg","status_active_fg","call_pass_bg","call_pass_fg","call_active_bg","call_active_fg","Hint","hint","BindList","userPickBind","setUserPickBind","isUserPass","setUserPass","setNowBind","trump","setTrump","availibleTricks","nowBindRef","nowBindData","detectTrumpDecided","useMemo","noBind","callBind","bindRef","userBindListRef","nextPlayerRef","userCalledBinds","calledBind","newUserBinds","bindListRef","binds","playerCalledList","some","getNextPlayer","playerIndex","content_bg","BindingBox","ModalBinding","yes_button_fg","yes_button_bg","no_button_fg","no_button_bg","AskBox","imageUrl","description","onConfirm","onCancel","onConfirmText","onCancelText","ModalConfirm","ModalGiveUp","setResponseToBadDeck","Kanahei","AninimationBox","Animations","delay","toggleDelay","setDelay","mainFireWorkData","loop","autoplay","animationData","mainFireWork","rendererSettings","preserveAspectRatio","subFireWorkData","subFireWork","thirdFireWorkData","thirdFireWork","options","height","width","win_fg","ResultBox","winTeam","isUserWin","openConfirmLeaveModal","refreshGame","teamName","buttonColor","yellow_button","orange_button","green_button","listenOnOneMoreGame","removeOneMoreGameListener","ModalResult","ModalRoot","isOKtoPlay","isGotWinner","modalType","setModalType","OneMoreGame","backToWaitRoom","ChangeMate","SomeoneLeaveGame","leaveGame","Restart","front_bg","back_bg","suit_red","suit_black","pattern","shadow","PokerCard","Card","hasDetail","nowPickSuit","numberOnCard","numberInPoker","sameSuit","isNotPicked","UserHandCards","thisRoundSuit","isUserLastPlayer","setUserDeck","setNowPickSuit","gameInfoRef","handlePickCard","isValidCard","playCard","removeCardFromDeck","switchToNextPlayer","pickedSuit","cardsRef","suitRef","userPlayData","d","newDeck","OtherUserHandCards","cardAmount","cardArray","CardGroup","Cards","otherPlayerDeck","orderedPlayers","fc","bw","highlight_color_team","Tag","PlayerNameTag","isCurrentPlayer","Names","Nameplate","currentPlayer","PlayedCard","currentSuit","thisRoundCards","updateThisRoundCards","teamScores","updateTeamScores","isThisRoundEnd","setOtherPlayerDeck","setUserWinTricks","orderCards","playedPlayer","handleRoundEnded","currentPlayerRef","winner","getRoundWinner","updatePoints","collectThisTrick","initRoundData","thisRoundSuitRef","thisRoundCardsRef","allSettled","winnerIndex","point","countPoint","max","getBiggestCard","winnerTeam","Table","border_color","CardTable","InfoBox","title","Board","Point","team1color","team2color","StyledSuit","red","black","PointInfo","teamShouldWin","MainInfo","SideNav","SideInfo","renderIcon","content","nowNav","setNowNav","Item","b_bottom","SettingButton","exit_button","mail_button","line","button_bg","PlusIcon","isOpen","Settings","StyledCardIcon","CardIcon","Empty","userWinTricks","WonTricks","Background","nav","Navbar","GameRoom","setNowPlayerState","setThisRoundSuit","listenOnCurrentPlayer","listenOnThisRoundSuit","listenOnChangeRouteEvent","dealDeck","nowPlayerID","roundSuit","changeMateRef","leaveRef","restartRef","disconnectedRef","someoneLeaveGame","deckInfo","roundSuitRef","stripes_1","stripes_2","decoration_arrows","title_block_1","title_block_2","title_block_3","Page","InvitePage","match","params","setPlayers","roomData","currentPlayers","App","exact","path","component","to","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5d11cd5a.chunk.js","sourcesContent":["\nexport enum ThemeTypes {\n\tLight = 'light',\n\tDark = 'dark',\n}\n\nexport interface ThemeDataDetail {\n    [key: string]: string;\n}\n\nexport interface ThemeData {\n    [ThemeTypes.Light]: ThemeDataDetail;\n    [ThemeTypes.Dark]: ThemeDataDetail;\n}","export const color = {\n    $theme_background: '#F6F3EB',\n    $title_font_color: '#965735',\n    $brown_color: '#8c6954',\n    $pink_color: '#f29c9b',\n    $green_color: '#a3c07e',\n    $warn_red_color: '#BF3131',\n    $red_suit_color: '#AF3C3C',\n    $black_suit_color: '#323232',\n    $shadow: 'rgba(124, 124, 124, 0.4)',\n    $highlight_color: '#f5db8f',\n    $pass_color: '#a5dc6e',\n    $unable_color: '#dcdcdc',\n    $unable_font_color: '#C4C4C4',\n    $orange_color: '#f5ab57',\n    $under_line_color: '#E3E1E1',\n    $default_font_color: '#323232',\n    $fluorescent_pink_color: '#FFC2C0',\n    $fluorescent_yellow_color: '#FEEE95',\n    $fluorescent_green_color: '#0FFF50',\n    $fluorescent_orange_color: '#FF5F1F',\n\n    $dark_border_color: '#E5D3D2',\n    $dark_default_font_color: '#F3F3F3',\n    $dark_dim_border_color: '#767675',\n    $dark_black_suit_color: '#E5D3D2',\n    $dark_red_suit_color: '#F7274F',\n    $dark_bg_color: '#2B2C2A',\n    $dark_dim_bg_color: '#333332',\n    $light_pink_color: '#FFE9E8',\n    $dark_unable_color: '#484545'\n}","import { createGlobalStyle } from \"styled-components\";\nimport { color } from \"style/theme\";\n\nexport const GlobalStyle = createGlobalStyle`\n    * {\n    font-family: 'Kosugi Maru', sans-serif;\n    user-select: none;\n    }\n    \n    body,\n    html {\n    font-weight: 400;\n    background-color: ${color.$theme_background};\n    box-sizing: border-box;\n    overflow: hidden;\n    overflow-x: hidden;\n    height: 100%;\n    width: 100%;\n    transform: translate3d(0, 0, 0);\n    padding: 0;\n    margin: auto;\n    color: ${color.$default_font_color};\n    }\n\n    #root {\n    height: 100%;\n    overflow: hidden;\n\n        & > div {\n            padding: 5vw;\n            height: 100%;\n            box-sizing: border-box;\n        }\n    }\n\n    div {\n        padding: 0;\n        margin: 0;\n    }\n\n    button {\n        border: none;\n        margin: 0;\n        padding: 0;\n        \n        &:active,\n        &:focus {\n            outline: none;\n        }\n    }\n\n    p {\n        margin: 0;\n    }\n`;","import firebase from \"firebase/app\";\nimport \"firebase/database\";\n\nconst firebaseConfig = {\n    apiKey: process.env.REACT_APP_APIKEY,\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n    databaseURL: process.env.REACT_APP_DATABASE_URL,\n    projectId: process.env.REACT_APP_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n    appId: process.env.REACT_APP_APP_ID,\n};\n\nconst db = firebase.initializeApp(firebaseConfig);\nexport default db;","import {\n    atom\n} from 'recoil';\nimport { ThemeTypes } from 'types/theme';\n\nconst defaultTheme = () => {\n    const existingChosenTheme = JSON.parse(localStorage.getItem('cake-and-bridge-theme') || '{}');\n    if(typeof existingChosenTheme !== 'string') {\n        return ThemeTypes.Light;\n    }   \n    return existingChosenTheme;\n}\n\nexport const themeState = atom({\n    key: 'themeState',\n    default: defaultTheme() as ThemeTypes,\n});","export enum TeamTypes {\n\tTeamOne = 'team1',\n\tTeamTwo = 'team2',\n}\n\nexport type Team = TeamTypes.TeamOne | TeamTypes.TeamTwo;\n\nexport interface PlayerData {\n    name: string;\n    team: TeamTypes;\n    timestamp: number;\n    id: string;\n    ready?: boolean;\n}","export default __webpack_public_path__ + \"static/media/logo.ba38e50a.svg\";","export default __webpack_public_path__ + \"static/media/name-light.5c6afb25.svg\";","export default __webpack_public_path__ + \"static/media/name-dark.f17fa7b4.svg\";","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilState } from \"recoil\";\nimport { themeState } from 'store/theme';\nimport { color } from \"style/theme\";\nimport LogoSVG from 'assets/logo.svg';\nimport NameLightIcon from 'assets/name-light.svg';\nimport NameDarkIcon from 'assets/name-dark.svg';\nimport { ThemeTypes } from 'types/theme';\n\nconst themeData = {\n    light: { \n\t\tbg: 'white',\n        fg: color.$title_font_color,\n\t},\n    dark: { \n\t\tbg: color.$dark_dim_bg_color,\n        fg: color.$fluorescent_pink_color,\n\t},\n}\n\nconst StyledLogo = styled.div`\n    border-radius: 100%;\n    text-align: center;\n    width: 220px;\n    height: 220px;\n    padding: 30px;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    transition: .3s all;\n    background-color: ${({theme}) => theme.bg };\n\n    .image {\n        width: 65%;\n        margin-bottom: 20px;\n    }\n\n    .name {\n        width: 70%;\n    }\n`\n\ninterface LogoProperty {\n    className: string;\n}\n\nconst Logo = (props: LogoProperty) => {\n    const { className } = props;\n    const [theme] = useRecoilState(themeState);\n    const nameIcon = theme === ThemeTypes.Light ? NameLightIcon :  NameDarkIcon;\n    return (\n        <StyledLogo \n            theme={themeData[theme]}\n            className={className}>\n                <img className=\"image\" src={LogoSVG} alt=\"logo\" />\n                <img className=\"name\" src={nameIcon} alt=\"logo\" />\n        </StyledLogo>\n    );\n}\n\nexport default Logo;","import React from \"react\";\nimport { useTransition, animated } from \"react-spring\";\nimport { useRecoilValue } from 'recoil';\nimport { color } from 'style/theme';\nimport { themeState } from 'store/theme';\nimport styled from 'styled-components';\n\nconst themeData = {\n    light: { backgroundColor: '#f3e9e9' },\n    dark: { backgroundColor: color.$dark_bg_color },\n}\n\nconst StyledModalPage = styled(animated.div)`\n    background-color: rgba(0, 0, 0, 0.25);\n\twidth: 100%;\n\theight: 100%;\n    top: 0;\n    left: 0;\n\tposition: absolute;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n    z-index: 20;\n\n    &.no-opacity {\n        background-color: ${({ theme }) => theme.backgroundColor};\n    }\n\n\n    &.result_modal {\n        background-color: rgba(0, 0, 0, 0.5);\n    }\n\n    & > div {\n        min-width: 65vw;\n    }\n`\ninterface ModalPageProperty {\n    className?: string;\n    active: Boolean;\n    children: React.ReactNode;\n    onDeactive?: (e: React.MouseEvent<HTMLElement>) => void,\n}\n\nconst ModalPage = (props: ModalPageProperty) => {\n    const { active, children, className, onDeactive } = props;\n    const theme = useRecoilValue(themeState);\n\n    const transitions = useTransition(active, {\n        from: { opacity: 0, transform: \"translateY(-15px)\" },\n        enter: { opacity: 1, transform: \"translateY(0px)\" },\n        leave: { opacity: 0, transform: \"translateY(-15px)\" }\n    });\n\n    return (\n        <>\n            {transitions((props, item) => item && (\n                <StyledModalPage\n                    style={props}\n                    onClick={onDeactive}\n                    theme={themeData[theme]}\n                    className={className}\n                >\n                    {children}\n                </StyledModalPage>))\n            }\n        </>\n    )\n}\n\nexport default ModalPage","import React from 'react';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { ThemeTypes } from 'types/theme';\nimport { themeState  } from 'store/theme';\n\nconst getButtonStyle = (theme: string, color: string) => {\n    switch(theme){\n        case 'light':\n        default:\n            return `\n                background-color: ${color};\n                color: white;\n            `\n        case 'dark':\n            return `\n                background-color: transparent;\n                color: ${color};\n                border: 1px solid ${color};\n            `\n    }\n}\n\ninterface StyledButtonProperty extends ButtonProperty {\n    themeType: ThemeTypes;\n}\n\nconst StyledButton = styled.button<StyledButtonProperty>`\n    cursor: pointer;\n    border-radius: 50px;\n    padding: 10px 20px;\n    margin: 0;\n    letter-spacing: 1px;\n    text-align: center;\n    transition: 0.3s all;\n    font-size: 13px;\n    ${({themeType, color}) => getButtonStyle(themeType, color)}\n\n    &.small {\n        padding: 5px 8px;\n    }\n`\n\ninterface ButtonProperty {\n    className?: string;\n    onClick: (e: React.MouseEvent<HTMLElement>) => void;\n    children: React.ReactNode;\n    color: string;\n    type?: 'submit' | 'button';\n    size?: 'normal' | 'small';\n}\n\nconst Button = (props: ButtonProperty ) => {\n    const [theme] = useRecoilState(themeState);\n    const { \n        className, \n        children, \n        onClick = () => {},\n        color,\n        type = 'button',\n        size = 'normal'\n    } = props\n\n    return (\n    <StyledButton\n        type={type}\n        themeType={theme}\n        color={color}\n        className={classnames(className, size)}\n        onClick={onClick}\n    >\n        {children}\n    </StyledButton>\n    )\n}\n\nexport default Button;","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from \"style/theme\";\n\ninterface InputProperty  {\n    className: string;\n    value: string;\n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n    maxLength: number;\n    onFocus?: () => void;\n    placeholder?: string;\n}\nconst Input = (props: InputProperty) => {\n    const {\n        className,\n        value,\n        placeholder,\n        onChange = () => {},\n        onFocus = () => {},\n        maxLength = 10\n    } = props;\n\n    return (\n        <input\n            className={className}\n            maxLength={maxLength}\n            placeholder={placeholder}\n            onChange={onChange}\n            onFocus={onFocus}\n            value={value}\n            type=\"text\" />\n    )\n}\n\nconst styledInput = styled(Input)`\n    user-select: auto;\n    width: 50%;\n    display: block;\n    font-size: 13px;\n    text-align: center;\n    color: ${color.$title_font_color};\n    background-color: transparent;\n    border: none;\n    border-radius: 0;\n\n    &:active,\n    &:focus {\n        outline: none;\n    }\n`\n\nexport default styledInput;","import { useState } from 'react';\n\ntype Values = {\n    gameRoomName: string;\n    warnMessage: string;\n}\n\ntype Handlers = {\n    setRoomName: React.Dispatch<React.SetStateAction<string>>;\n    setWarnMessage: React.Dispatch<React.SetStateAction<string>>\n    validateRoomName: () => boolean;\n}\n\nconst useGameRoomName = (): [Values, Handlers] => {\n    const [gameRoomName, setRoomName] = useState('');\n    const [warnMessage, setWarnMessage] = useState('');\n\n    const validateRoomName = () => {\n        const regex = /^[^.]*$/g;\n        const isVaild = regex.test(gameRoomName);\n\n\t\tif (!isVaild) {\n\t\t\tsetWarnMessage('請勿輸入 . 作為房間名');\n\t\t\treturn false;\n\t\t}\n\n\t\tsetWarnMessage('');\n\t\treturn true;\n\t};\n\n    return [\n        { gameRoomName, warnMessage },\n        { setRoomName, setWarnMessage, validateRoomName }\n    ]\n}\n\nexport default useGameRoomName;\n","const generateUniqueId = () => Math.random().toString(36).substring(5,11);\n\nexport default generateUniqueId;","import {\n    atom, selector,\n} from 'recoil';\nimport { PlayerData, TeamTypes } from 'types/player';\n\nimport { userNameState } from './user';\n\nexport const playersData = atom({\n    key: 'playersData',\n    default: [] as PlayerData[],\n})\n\nexport const teamArray = selector({\n    key: 'teamState',\n    get: ({get}) => {\n        const team = get(playersData);\n        return team.map(data=>data.team);\n    }\n})\n\nexport const OrderedStartFromTeamOne = selector({\n    key: 'OrderedStartFromTeamOne',\n    get: ({get}) => {\n        const playerDataState = get(playersData);\n        const firstPlayer = playerDataState.filter(player=>player.team === TeamTypes.TeamOne)[0];\n        const secondPlayer = playerDataState.filter(player=>player.team === TeamTypes.TeamTwo)[0];\n        const thirdPlayer = playerDataState.filter(player=>player.team === TeamTypes.TeamOne)[1];\n        const lastPlayer = playerDataState.filter(player=>player.team === TeamTypes.TeamTwo)[1];\n        const result = [firstPlayer,secondPlayer,thirdPlayer,lastPlayer]\n            .map(playerData=>playerData.name);\n        return result\n    }\n})\n\nconst handleIndex = (index: number) => {\n    if(index > 3) {\n        return index - 4\n    } else {\n        return index\n    }\n}\n\nexport const relationWithUser = selector({\n    key: 'relationWithUser',\n    get: ({get}) => {\n        const playerDataState = get(OrderedStartFromTeamOne);\n        const user = get(userNameState);\n        const userIndex = playerDataState.indexOf(user);\n        const nextIndex = handleIndex(userIndex + 1);\n        const teammateIndex = handleIndex(userIndex + 2);\n        const previousIndex = handleIndex(userIndex + 3);\n        return {\n            user,\n            teammate: playerDataState[teammateIndex],\n            nextPlayer: playerDataState[nextIndex],\n            previousPlayer: playerDataState[previousIndex],\n        }\n    }\n})","export enum CardSuitType {\n\tSpade = 'spade',\n\tHeart = 'heart',\n\tDiamond = 'diamond',\n\tClub = 'club',\n}\n\nexport enum SuitColorType {\n\tRed = 'red',\n\tBlack = 'black',\n}\n\nexport type SuitColor =  SuitColorType.Black | SuitColorType.Red;\n\nexport type OtherPlayerDeck = {\n\t[key: string]: number;\n}\n\nexport interface Card {\n\tsuit: CardSuitType;\n\tnumber: number;\n}","import {\n    atom, selector,\n} from 'recoil';\n\nimport { playersData } from './players';\nimport { TeamTypes } from 'types/player';\n\nexport const userNameState = atom({\n    key: 'userNameState',\n    default: '' as string,\n});\n\nexport const userIDState = atom({\n    key: 'userIDState',\n    default: '' as string,\n});\n\nexport const userRoomState = atom({\n    key: 'userRoomState',\n    default: '' as string,\n});\n\nexport const userIndexState = selector({\n    key: 'userIndexState',\n    get: ({get}) => {\n        const userName = get(userNameState);\n        const playerList = get(playersData);\n        return playerList.findIndex(data=>data.name===userName) as number;\n    }\n})\n\nexport const userTeamState = selector({\n    key: 'userTeamState',\n    get:  ({get}) => {\n        const userName = get(userNameState);\n        const playerList = get(playersData);\n        if(!playerList.length) return null\n        return playerList.find(data=>data.name===userName)?.team as TeamTypes | null;\n    }\n})\n\nexport const navState = atom({\n    key: 'navState',\n    default: null as string | null,\n})","import { useRecoilValue, useSetRecoilState } from \"recoil\";\nimport db from \"database\";\nimport { useHistory } from \"react-router-dom\";\nimport generateUniqueId from \"util/generateUniqueId\";\nimport { userIDState, userNameState, userRoomState } from \"store/user\";\n\ntype Values = {}\n\ntype Handlers = {\n    updateDbRoomData: (roomID: string, roomName?: string) => Promise<void>;\n}\n\nconst useFirebaseRoom = (): [Values, Handlers] => {\n    const setUserID = useSetRecoilState(userIDState);\n    const userName = useRecoilValue(userNameState);\n\tconst setLocalRoom = useSetRecoilState(userRoomState);\n    const history = useHistory();\n    \n\tconst updateDbRoomData = async (roomID: string, roomName?: string) => {\n\t\tconst roomRef = db.database().ref(`/${roomID}`);\n\t\tconst userID = generateUniqueId() as string;\n\t\tconst current = new Date();\n\t\tconst timestamp = Date.parse(current.toString()) as number;\n        const userInfo = { timestamp, id: userID, name: userName };\n\t\tsetLocalRoom(roomID);\n\t\tsetUserID(userID);\n\n\t\tif (roomName) {\n\t\t\tawait roomRef.update({ \n\t\t\t\troomName,\n\t\t\t\tplayersInfo: {\n\t\t\t\t\t[userID]: userInfo\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tawait roomRef.child('playersInfo')\n\t\t\t.child(userID)\n\t\t\t.update(userInfo);\n\t\t}\n\n\t\tconst toPath = `/w/${roomID}/${userID}`\n\t\thistory.push(toPath);\n\t}\n\n    return [\n        {},\n        { updateDbRoomData }\n    ]\n}\n\nexport default useFirebaseRoom;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/theme'\nimport { useSetRecoilState, useRecoilState } from \"recoil\";\n\nimport Modal from \"components/Global/atoms/Modal\";\nimport Button from 'components/Global/atoms/Button';\nimport Input from 'components/Global/atoms/Input';\n\nimport { RoomList } from 'types/room';\nimport userGameRoomName from \"util/hook/useGameRoomName\";\nimport useFirebaseRoom from \"util/hook/useFirebaseRoom\";\nimport generateUniqueId from \"util/generateUniqueId\";\nimport { userRoomState } from \"store/user\";\nimport { themeState } from 'store/theme';\n\nconst themeData = {\n\tlight: {\n\t\tbg: 'white',\n\t\tfg: color.$brown_color,\n\t\tboxBorder: 'none',\n\t\tcancel_bg: color.$warn_red_color,\n\t\tcancel_fg: 'white',\n\t\ttitle_bg: color.$pink_color,\n\t\ttitle_fg: 'white',\n\t\tsub_title_fg: '#888',\n\t\tsub_title_bb: color.$under_line_color,\n\t},\n\tdark: {\n\t\tbg: color.$dark_bg_color,\n\t\tfg: color.$fluorescent_pink_color,\n\t\tboxBorder: '1px solid' + color.$fluorescent_pink_color,\n\t\tcancel_bg: color.$dark_bg_color,\n\t\tcancel_fg: color.$fluorescent_pink_color,\n\t\ttitle_bg: color.$dark_bg_color,\n\t\ttitle_fg: color.$fluorescent_pink_color,\n\t\tsub_title_fg: '#E5D5D5',\n\t\tsub_title_bb: color.$dark_dim_border_color,\n\t},\n}\n\n\nconst Content = styled.div`\n\twidth: 80vw;\n\tposition: absolute;\n\tborder-radius: 10px;\n\toverflow: hidden;\n\tposition: relative;\n\tborder: ${({ theme }) => theme.boxBorder};\n\tbackground-color: ${({ theme }) => theme.bg};\n\n\t.cancel_button {\n\t\tfont-size: 14px;\n\t\tposition: absolute;\n\t\tcursor: pointer;\n\t\tborder-radius: 50%;\n\t\tpadding: 3px;\n\t\tright: 5px;\n\t\ttop: 5px;\n\t\tcolor: ${({ theme }) => theme.cancel_fg};\n\t\tborder: ${({ theme }) => theme.boxBorder};\n\t\tbackground-color: ${({ theme }) => theme.cancel_bg};\n\t}\n\n\t& > .title {\n\t\tpadding: 15px;\n\t\ttext-align: center;\n\t\tfont-size: 20px;\n\t\tletter-spacing: 2px;\n\t\tcolor: ${({ theme }) => theme.title_fg};\n\t\tbackground-color: ${({ theme }) => theme.title_bg};\n\t\tborder-bottom: ${({ theme }) => theme.box_border};\n\t}\n\n\t.block {\n\t\tpadding: 15px 15px 5px;\n\n\t\t.title {\n\t\t\tmargin: 0;\n\t\t\ttext-align: center;\n\t\t\tpadding-bottom: 5px;\n\t\t\tfont-size: 14px;\n\t\t\tletter-spacing: 1px;\n\t\t\tcolor: ${({ theme }) => theme.sub_title_fg};;\n\t\t\tborder-bottom: 1.5px solid ${({ theme }) => theme.sub_title_bb};\n\t\t}\n\n\t\t&.join_exist_room {\n\t\t\t.room_list {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tmargin-top: 10px;\n\t\t\t\tmax-height: 150px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\n\t\t\t.no_room {\n\t\t\tmargin-top: 15px;\n\t\t\tcolor: ${color.$unable_color};\n\t\t\ttext-align: center;\n\t\t\tfont-size: 14px;\n\t\t\tletter-spacing: 1px;\n\t\t\t}\n\n\t\t\t.room {\n\t\t\tmargin-bottom: 10px;\n\t\t\tfont-size: 16px;\n\t\t\tletter-spacing: 1px;\n\t\t\t}\n\t\t}\n\n\t\t&.create_room {\n\t\t\t.content {\n\t\t\tpadding: 10px;\n\t\t\tbox-sizing: border-box;\n\n\t\t\t\tform {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\n\t\t\t\t\t.room_name {\n\t\t\t\t\t\tmargin-right: 20px;\n\t\t\t\t\t\ttext-align: left;\n\t\t\t\t\t\tfont-size: 18px;\n\t\t\t\t\t\tletter-spacing: 2px;\n\t\t\t\t\t\tcolor: ${({ theme }) => theme.fg};\n\t\t\t\t\t\tborder-bottom: 2px solid ${color.$unable_color};\n\n\t\t\t\t\t\t&::placeholder {\n\t\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\t\tcolor: ${color.$unable_color};\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\tmargin: 10px 0 0;\n\t\t\t\t\t\t\tletter-spacing: 2px;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.warn_message {\n\t\t\t\t\tmargin: 10px 0 0;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tletter-spacing: 1px;\n\t\t\t\t\tcolor: ${color.$warn_red_color};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\ninterface CreateButtonProperty {\n\tonClick: (e: React.MouseEvent<HTMLElement>) => void;\n\tclassName: string;\n\tisLengthValid: boolean;\n\tchildren: React.ReactNode;\n}\nconst CreateButton = (props: CreateButtonProperty) => {\n\tconst { onClick, className, isLengthValid } = props;\n\tconst [theme] = useRecoilState(themeState);\n\tconst getButtonColor = () => {\n\t\tswitch (theme) {\n\t\t\tcase 'light':\n\t\t\tdefault:\n\t\t\t\treturn isLengthValid ? color.$highlight_color : color.$unable_color;\n\t\t\tcase 'dark':\n\t\t\t\treturn isLengthValid ? color.$fluorescent_pink_color : color.$dark_dim_border_color;\n\t\t}\n\t};\n\treturn (\n\t\t<Button\n\t\t\tcolor={getButtonColor()}\n\t\t\tonClick={(e) => {\n\t\t\t\tif (!isLengthValid) return;\n\t\t\t\tonClick(e)\n\t\t\t}}\n\t\t\tclassName={className}\n\t\t>建立</Button>\n\t)\n};\n\ninterface RoomButtonProperty {\n\tonClick: () => void;\n\tclassName: string;\n\troomName: string;\n}\n\nconst RoomButton = (props: RoomButtonProperty) => {\n\tconst { onClick, className, roomName } = props;\n\tconst [theme] = useRecoilState(themeState);\n\tconst getButtonColor = () => {\n\t\tswitch (theme) {\n\t\t\tcase 'light':\n\t\t\tdefault:\n\t\t\t\treturn color.$green_color\n\t\t\tcase 'dark':\n\t\t\t\treturn color.$fluorescent_pink_color\n\t\t}\n\t}\n\n\treturn (\n\t\t<Button\n\t\t\tclassName={className}\n\t\t\tonClick={onClick}\n\t\t\tcolor={getButtonColor()}>\n\t\t\t{roomName}\n\t\t</Button>)\n}\n\ninterface RoomDialogProperty {\n\tclassName: string;\n\tactive: Boolean;\n\troomList: RoomList;\n\tcloseRoomList: (e: React.MouseEvent<HTMLElement>) => void;\n}\nconst RoomDialog = (props: RoomDialogProperty) => {\n\tconst { active, className, closeRoomList, roomList } = props;\n\tconst [theme] = useRecoilState(themeState);\n\tconst [\n\t\t{ gameRoomName, warnMessage },\n\t\t{ setRoomName, validateRoomName, setWarnMessage }\n\t] = userGameRoomName();\n\tconst [,{ updateDbRoomData }] = useFirebaseRoom();\n\tconst setLocalRoom = useSetRecoilState(userRoomState);\n\n\tconst createRoom = (e: React.MouseEvent<HTMLElement>) => {\n\t\te.preventDefault();\n\t\tconst isValid = validateRoomName();\n\n\t\tif (isValid) {\n\t\t\tconst roomID = generateUniqueId();\n\t\t\tsetLocalRoom(roomID);\n\t\t\tupdateDbRoomData(roomID, gameRoomName);\n\t\t}\n\t}\n\n\tconst pickExistRoom = (roomID: string) => {\n\t\tsetLocalRoom(roomID);\n\t\tupdateDbRoomData(roomID);\n\t}\n\n\treturn (\n\t\t<Modal\n\t\t\tactive={active}\n\t\t\tonDeactive={(e: React.MouseEvent<HTMLElement>) => {\n\t\t\t\tcloseRoomList(e);\n\t\t\t}}\n\t\t\tclassName={className}>\n\t\t\t<Content\n\t\t\t\ttheme={themeData[theme]}\n\t\t\t\tonClick={e => e.stopPropagation()}\n\t\t\t\tclassName=\"content\">\n\t\t\t\t<button\n\t\t\t\t\tonClick={(e) => closeRoomList(e)}\n\t\t\t\t\tclassName=\"cancel_button\">×</button>\n\t\t\t\t<div className=\"title\">選擇或創建房間</div>\n\t\t\t\t<div className=\"room_choose\">\n\t\t\t\t\t<div className=\"block join_exist_room\">\n\t\t\t\t\t\t<p className=\"title\">選擇已經存在的房間</p>\n\t\t\t\t\t\t{!roomList.length\n\t\t\t\t\t\t\t? <p className=\"no_room\">目前尚無空房</p>\n\t\t\t\t\t\t\t: <div className=\"room_list\">\n\t\t\t\t\t\t\t\t{roomList.map(room => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<RoomButton\n\t\t\t\t\t\t\t\t\t\t\tkey={room.roomID}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => pickExistRoom(room.roomID)}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"room\"\n\t\t\t\t\t\t\t\t\t\t\troomName={room.roomName} />)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"block create_room\">\n\t\t\t\t\t\t<p className=\"title\">建立一個房間</p>\n\t\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tclassName=\"room_name\"\n\t\t\t\t\t\t\t\t\tvalue={gameRoomName}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tsetWarnMessage('');\n\t\t\t\t\t\t\t\t\t\tsetRoomName(e.target.value)\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tmaxLength={20}\n\t\t\t\t\t\t\t\t\tplaceholder=\"請輸入3-20字元\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<CreateButton\n\t\t\t\t\t\t\t\t\tclassName='create_button'\n\t\t\t\t\t\t\t\t\tisLengthValid={gameRoomName.length > 2}\n\t\t\t\t\t\t\t\t\tonClick={e => createRoom(e)}\n\t\t\t\t\t\t\t\t>建立</CreateButton>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t{warnMessage && <p className='warn_message'>{warnMessage}</p>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div >\n\t\t\t</Content >\n\t\t</Modal >\n\t);\n}\n\nexport default RoomDialog;","import { useState } from 'react';\nimport { useRecoilState } from \"recoil\";\nimport { userNameState } from \"store/user\";\n\ntype Values = {\n    userName: string;\n    warnMessage: string;\n}\n\ntype Handlers = {\n    setUserName: React.Dispatch<React.SetStateAction<string>>;\n    setWarnMessage: React.Dispatch<React.SetStateAction<string>>\n    validateUserName: () => boolean;\n}\n\nconst useUserName = (): [Values, Handlers] => {\n    const [userName, setUserName] = useRecoilState(userNameState);\n    const [warnMessage, setWarnMessage] = useState('');\n\n    const validateUserName = () => {\n        const regex = /^[^.]*$/g;\n        const isVaild = regex.test(userName);\n\n        if (!userName) {\n            setWarnMessage('請輸入至少一個字');\n\t\t\treturn false;\n        }\n\n\t\tif (!isVaild) {\n\t\t\tsetWarnMessage('請勿輸入 . 作為名字');\n\t\t\treturn false;\n\t\t}\n\n\t\tsetWarnMessage('');\n\t\treturn true;\n\t};\n\n    return [\n        { userName, warnMessage },\n        { setUserName, setWarnMessage, validateUserName }\n    ]\n}\n\nexport default useUserName;\n","import React from \"react\";\nimport { useRecoilValue } from \"recoil\";\n\nimport Input from \"components/Global/atoms/Input\";\nimport Button from \"components/Global/atoms/Button\";\n\nimport useUserName from \"util/hook/useUserName\";\nimport { themeState } from 'store/theme';\nimport styled from \"styled-components\";\nimport { color } from \"style/theme\";\n\nconst themeData = {\n\tlight: {\n\t\tfg: color.$title_font_color,\n\t\tname_fg: color.$title_font_color,\n\t\tborder: color.$title_font_color,\n\t\tbutton_color: color.$pink_color,\n\t},\n\tdark: {\n\t\tfg: color.$dark_default_font_color,\n\t\tname_fg: color.$fluorescent_pink_color,\n\t\tborder: color.$dark_border_color,\n\t\tbutton_color: color.$fluorescent_pink_color,\n\t},\n}\n\nconst NameForm = styled.form`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\n\tp {\n\t\tfont-size: 22px;\n\t\tletter-spacing: 3px;\n\t\tmargin: 0 0 25px 0;\n\t\ttransition: .3s all;\n\t\tcolor: ${({ theme }) => theme.fg};\n\t}\n\n\t.name_space{\n\t\tpadding: 5px;\n\t\tfont-size: 22px;\n\t\tline-height: 25px;\n\t\tletter-spacing: 2px;\n\t\tcolor: ${({ theme }) => theme.name_fg};\n\t\tborder-bottom: 2px solid ${({ theme }) => theme.border};\n\t}\n\n\t.warn_message {\n\t\tmargin-top: 10px;\n\t\tcolor: ${({ theme }) => theme.name_fg};\n\t\topacity: 0.6;\n\t\tletter-spacing: 1px;\n\t}\n\n\t.enter_button {\n\t\tmargin-top: 20px;\n        min-width: 50%;\n        font-size: 18px;\n        letter-spacing: 3px;\n\t}\n`;\n\ninterface NameFillInProperty {\n\tonEnter: () => void;\n    buttonText: string;\n    actionText?: string;\n}\n\nconst NameFillIn = (props: NameFillInProperty) => {\n\tconst { onEnter, actionText, buttonText } = props;\n\tconst [\n\t\t{ userName, warnMessage },\n\t\t{ setUserName, validateUserName, setWarnMessage }\n\t] = useUserName();\n\n\tconst theme = useRecoilValue(themeState);\n\tconst handleButtonClick = (e: React.MouseEvent<HTMLElement>) => {\n\t\te.preventDefault();\n\t\tconst isValid = validateUserName();\n\n\t\tif (isValid) {\n\t\t\tonEnter();\n\t\t}\n\t};\n\n\treturn (\n\t\t<NameForm theme={themeData[theme]} id=\"name\" className=\"user_input\">\n\t\t\t{actionText && <p>{actionText}</p>}\n\t\t\t<Input\n\t\t\t\tclassName=\"name_space\"\n\t\t\t\tonFocus={() => setWarnMessage('')}\n\t\t\t\tmaxLength={8}\n\t\t\t\tonChange={(e) => setUserName(e.target.value)}\n\t\t\t\tvalue={userName}\n\t\t\t/>\n\t\t\t{warnMessage && <span className=\"warn_message\">{warnMessage}</span>}\n\t\t\t<Button\n\t\t\t\tclassName=\"enter_button\"\n\t\t\t\tcolor={themeData[theme].button_color}\n\t\t\t\tonClick={handleButtonClick}\n\t\t\t\ttype=\"submit\"\n\t\t\t>\n\t\t\t\t{buttonText}\n\t\t\t</Button>\n\t\t</NameForm>\n\t);\n};\n\nexport default NameFillIn","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/theme';\nimport classnames from 'classnames';\nimport { themeState } from 'store/theme';\nimport { ThemeTypes } from 'types/theme';\nimport { useRecoilState } from 'recoil';\nimport { useEffect } from 'react';\n\n\nconst Toggler = styled.div`\n    display: flex;\n    align-items: center;\n    width: 40px;\n    height: 17px;\n    padding: 2px;\n    border-radius: 40px;\n    transition: 0.3s all;\n    cursor: pointer;\n\n    .toggle_button {\n        background-color: white;\n        width: 17px;\n        height: 17px;\n        border-radius: 100%;\n        transition: 0.3s all;\n        cursor: pointer;\n        padding: 0;\n    }\n\n    &.light_mode {\n        background-color: ${color.$pink_color};\n        border: 1px solid transparent;\n        justify-content: flex-start;\n        .toggle_button {\n            margin-left: 0;\n        }\n    }\n\n    &.dark_mode {\n        background-color: ${color.$dark_dim_bg_color};\n        border: 1px solid ${color.$dark_border_color};\n        .toggle_button {\n            margin-left: calc( 40px - 17px);\n        }\n    }\n`\ninterface ThemeTogglerProperty {\n    className?: string;\n}\n\nconst ThemeToggler = (props: ThemeTogglerProperty) => {\n    const { className } = props;\n    const [theme, toggleTheme] = useRecoilState(themeState);\n\n    useEffect(() => {\n        localStorage.setItem('cake-and-bridge-theme', JSON.stringify(theme));\n    }, [theme]);\n\n    return (\n        <Toggler\n            onClick={() => toggleTheme((pre) => {\n                return pre === ThemeTypes.Light\n                    ? ThemeTypes.Dark\n                    : ThemeTypes.Light;\n            })}\n            className={classnames(\"theme_toggler\", className, {\n                'light_mode': theme === ThemeTypes.Light,\n                'dark_mode': theme === ThemeTypes.Dark,\n            })}>\n            <button className=\"toggle_button\" />\n        </Toggler>\n    )\n}\n\nexport default ThemeToggler;","import {\n    atom\n} from 'recoil';\n\nexport const modalState = atom({\n    key: 'modalState',\n    default: null as string | null,\n});","import {\n    atom, selector,\n} from 'recoil';\n\nimport { Card, OtherPlayerDeck } from 'types/card';\n\nexport const userDeckState = atom({\n    key: 'userDeckState',\n    default: [] as Card[],\n});\n\n\n\nexport const otherPlayerDeckState = atom({\n    key: 'otherPlayerDeckState',\n    default: {} as OtherPlayerDeck,\n});\n\nexport const badDeck = selector({\n    key: 'backDeck',\n    get: ({ get }) => {\n        const userDeck = get(userDeckState);\n        if (userDeck.length === 13) {\n            const deckPoint = userDeck\n                .map((card) => card.number)\n                .reduce((a, b) => {\n                    const point = b > 9 ? b - 9 : 0;\n                    return a + point;\n                }, 0);\n            return deckPoint > 3 ? false : true;\n        } else {\n            return false;\n        }\n    }\n});\n\nexport const responseToBadDeck = atom({\n    key: 'responseToBadDeck',\n    default: null as Boolean | null,\n})\n\nexport const OKtoPlay = selector({\n    key: 'OKtoPlay',\n    get: ({ get }) => {\n        const isBadLuck = get(badDeck);\n        if(!isBadLuck) {\n            return true;\n        } else {\n            const isOKtoPlayWithBadDeck = get(responseToBadDeck);\n            if(isOKtoPlayWithBadDeck){\n                return true\n            } else {\n                return false\n            }\n        }\n    }\n});","import {\n    atom, selector\n} from 'recoil';\n\nimport { CardSuitType, Card } from 'types/card';\nimport { CalledBind } from 'types/bind';\nimport { playersData } from './players';\nimport { TeamTypes } from 'types/player';\n\nexport const userPickBindState = atom({\n    key: 'userPickBind',\n    default: null as null | Card,\n});\n\nexport const nowBindState = atom({\n    key: 'nowBindState',\n    default: { player: null, number:0, suit: CardSuitType.Club },\n});\n\nexport const userPassState = atom({\n    key: 'userPassState',\n    default: false as Boolean,\n});\n\nexport const playersCalledListState = atom({\n    key: 'playersCalledListState',\n    default: {} as { [key: string]: CalledBind[] },\n});\n\nexport const availibleTricksState = selector({\n    key: 'availibleTricksState',\n    get: ({get}) => {\n        const { number, suit} = get(nowBindState);\n        const tricks = [1, 2, 3, 4, 5, 6]\n        let min: number;\n        if(suit === CardSuitType.Spade) {\n            min =  number + 1;\n        } else {\n            min =  number;\n        }\n        const tricksArray = tricks.filter(trick => trick >= min)\n        return tricksArray;\n    }},\n);\n\nexport const teamShouldWinState = selector({\n    key: 'teamShouldWinState',\n    get: ({get}) => {\n        const {player: calledPlayer, number} = get(nowBindState);\n        if(!number || number === 1 ){\n            return {\n                team1: 7,\n                team2: 7,\n            }\n        }\n        const players = get(playersData);\n        const calledTeam = players.find(p => p.name === calledPlayer)?.team || TeamTypes.TeamOne;\n        const anotherTeam = [TeamTypes.TeamOne,TeamTypes.TeamTwo].filter(team=> team !== calledTeam)[0];\n        const calledTeamShouldWin = 6 + number;\n        const anotherTeamShouldWin = 14 - calledTeamShouldWin;\n        return {\n            [calledTeam]: calledTeamShouldWin,\n            [anotherTeam]: anotherTeamShouldWin\n        }\n    }},\n);","export enum ReadyTypes {\n\tEnterGame = 'enterGame',\n\tOneMoreGame = 'oneMoreGame',\n}\n\nexport enum GameStatusTypes {\n\tEnterGame = 'enterGame',\n\tOneMoreGame = 'oneMoreGame',\n\tChangeMate = 'changeMate',\n\tSomeoneLeaveGame = 'someoneLeaveGame',\n\tRestart = 'restart',\n}\n\nexport type RefreshGameTypes = GameStatusTypes.Restart | GameStatusTypes.OneMoreGame;\n\nexport enum NavigatorTypes {\n\tWonTricks = 'wintricks',\n\tSettings = 'settings',\n}","import {\n    atom\n} from 'recoil';\n\nimport { ScoreData } from 'types/score';\n\nconst defaultState: ScoreData = { team1: 0, team2: 0}\n\nexport const teamScoresState = atom({\n    key: 'teamScoresState',\n    default: defaultState\n});","import {\n    atom, selector,\n} from 'recoil';\nimport { CardSuitType, Card } from 'types/card'\nimport { userNameState } from './user';\nimport { teamShouldWinState } from './bind';\nimport { teamScoresState } from './score';\nimport { TeamTypes } from 'types/player';\n\nexport const currentPlayerName = atom({\n    key: 'currentPlayerName',\n    default: '' as string,\n});\n\nexport const thisRoundSuitState = atom({\n    key: 'thisRoundSuit',\n    default: null as null | CardSuitType,\n});\n\nexport const thisRoundCardsState = atom({\n    key: 'thisRoundCardsState',\n    default: [] as Card[],\n});\n\nexport const trumpState = atom({\n    key: 'trumpState',\n    default: null as null | Card,\n})\n\nexport const isUserTurnState = selector({\n    key: 'isUserTurnState',\n    get: ({get}) => {\n        const nowPlayer = get(currentPlayerName);\n        const userName = get(userNameState);\n        return userName === nowPlayer;\n    }\n})\n\nexport const isUserLastPlayerState = selector({\n    key: 'isUserLastPlayerState',\n    get: ({get}) => {\n        const thisRoundCards = get(thisRoundCardsState);\n        if(thisRoundCards.filter(card => typeof card === 'object').length === 3) {\n            return true\n        } else {\n            return false\n        }\n    }\n});\n\nexport const isThisRoundEndState = selector({\n    key: 'isThisRoundEndState',\n    get: ({get}) => {\n        const thisRoundCards = get(thisRoundCardsState);\n        if(thisRoundCards.filter(card => typeof card === 'object').length === 4) {\n            return true\n        } else {\n            return false\n        }\n    }\n})\n\nexport const isGameEndState = selector({\n    key: 'isGameEndState',\n    get: ({ get }) => {\n        const { team1: team1ShouldWin, team2: team2ShouldWin } = get(teamShouldWinState);\n        const { team1: team1Score, team2: team2Score } = get(teamScoresState);\n\n        if(team1ShouldWin === team1Score){\n            return TeamTypes.TeamOne;\n        } else if (team2ShouldWin === team2Score) {\n            return TeamTypes.TeamTwo;\n        } else {\n            return null;\n        }\n    }\n})\n","import { atom } from 'recoil';\nimport { Card } from 'types/card';\n\nexport const userWinTricksState = atom({\n    key: 'userWinTricksState',\n    default: [] as Card[][],\n});\n","import { useResetRecoilState } from \"recoil\";\nimport { userNameState, userRoomState, userIDState } from 'store/user';\nimport { modalState } from 'store/modal';\nimport { userDeckState } from 'store/deck';\nimport { thisRoundCardsState, trumpState } from 'store/game';\nimport { playersData } from 'store/players';\nimport { teamScoresState } from 'store/score';\nimport { userWinTricksState } from 'store/winTricks';\nimport {  userPickBindState, nowBindState, userPassState, playersCalledListState } from 'store/bind';\n\n\nconst useInitData = () => {\n    const initUserName = useResetRecoilState(userNameState);\n\tconst initUserRoom = useResetRecoilState(userRoomState);\n\tconst initUserID = useResetRecoilState(userIDState);\n    const initModalType = useResetRecoilState(modalState);\n    const initUserDeck = useResetRecoilState(userDeckState);\n    const initScore = useResetRecoilState(teamScoresState);\n    const initUserPickBind = useResetRecoilState(userPickBindState);\n    const initNowBind = useResetRecoilState(nowBindState);\n    const initPassState = useResetRecoilState(userPassState);\n    const initRoundCards = useResetRecoilState(thisRoundCardsState);\n    const initTrump = useResetRecoilState(trumpState);\n    const initCalledList = useResetRecoilState(playersCalledListState);\n    const initWinTricks = useResetRecoilState(userWinTricksState);\n    const initPlayerData = useResetRecoilState(playersData);\n\n    const initUserData = () => {\n        initUserName();\n\t\tinitUserRoom();\n        initUserID();\n    }\n\n    const initGameRoomData = () => {\n        initUserDeck();\n        initModalType();\n        initScore();\n        initUserPickBind();\n        initNowBind();\n        initPassState();\n        initCalledList();\n        initRoundCards();\n        initTrump();\n        initWinTricks();\n    }\n\n    const initGameData = () => {\n        initUserData();\n        initGameRoomData();\n        initPlayerData();\n    }\n\n    return [{ initGameData, initGameRoomData }]\n}\n\nexport default useInitData;","import React, { useState } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport db from \"database\";\n\nimport Logo from \"components/Home/Logo\";\nimport RoomDialog from \"components/Home/RoomDialog\";\nimport NameFillIn from \"components/Global/molecules/NameFillin\";\nimport ThemeToggler from 'components/Global/atoms/ThemeToggler';\n\nimport { RoomList, FirebaseRoomsData } from 'types/room';\n\nimport useInitData from \"util/hook/useInitData\";\nimport { themeState } from 'store/theme';\nimport styled from \"styled-components\";\nimport { color } from \"style/theme\";\n\nconst themeData = {\n\tlight: {\n\t\tbg: color.$theme_background,\n\t},\n\tdark: {\n\t\tbg: color.$dark_bg_color,\n\t},\n}\n\nconst HomePage = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-around;\n\ttransition: .3s background-color;\n    background-color: ${({ theme }) => theme.bg};\n\n\t.toggler {\n\t\tposition: absolute;\n\t\tright: 20px;\n\t\ttop: 20px;\n\t}\n\n\t.logo {\n\t\tmargin: 0 auto;\n\t}\n`;\n\nconst Home = () => {\n\tconst [showRoomDialog, toggleRoomDialog] = useState<boolean>(false);\n\tconst [roomList, setRoomList] = useState<RoomList>([]);\n\tconst [{ initGameData }] = useInitData();\n\tconst theme = useRecoilValue(themeState);\n\n\tReact.useEffect(() => {\n\t\tinitGameData();\n\t\tsubscribeRooms();\n\t\treturn () => removeListeners();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n\n\tconst subscribeRooms = () => {\n\t\tconst Firebase = db.database().ref(\"/\");\n\t\tFirebase.on(\"value\", async (data) => {\n\t\t\tconst roomsData = data.val() as FirebaseRoomsData;\n\t\t\tif (!roomsData) {\n\t\t\t\tsetRoomList([]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst filterOutAbandonedRoom = Object.entries(roomsData)\n\t\t\t\t.filter(data => data[1].playersInfo)\n\t\t\t\t.reduce((obj, data) => ({\n\t\t\t\t\t...obj,\n\t\t\t\t\t[data[0]]: data[1]\n\t\t\t\t}), {});\n\n\t\t\tawait Firebase.set(filterOutAbandonedRoom);\n\t\n\t\t\tconst rooms = Object.entries(roomsData)\n\t\t\t\t.map(room => ({\n\t\t\t\t\troomID: room[0],\n\t\t\t\t\t...room[1]\n\t\t\t\t}))\n\t\t\t\t.filter(room => {\n\t\t\t\t\treturn room.playersInfo && Object.values(room.playersInfo).length < 4;\n\t\t\t\t});\n\n\t\t\tsetRoomList(rooms as RoomList);\n\t\t});\n\t};\n\n\tconst removeListeners = () => {\n\t\tconst Firebase = db.database().ref(\"/\");\n\t\tFirebase.off();\n\t};\n\n\treturn (\n\t\t<HomePage theme={themeData[theme]}>\n\t\t\t<ThemeToggler className=\"toggler\"/>\n\t\t\t<Logo className=\"logo\" />\n\t\t\t<NameFillIn\n\t\t\t\tactionText=\"請輸入名字\"\n\t\t\t\tbuttonText=\"加入遊戲\"\n\t\t\t\tonEnter={() => toggleRoomDialog(true)}\n\t\t\t/>\n\t\t\t<RoomDialog\n\t\t\t\tactive={showRoomDialog}\n\t\t\t\troomList={roomList}\n\t\t\t\tclassName=\"room_list_dialog\"\n\t\t\t\tcloseRoomList={() => toggleRoomDialog(false)}\n\t\t\t/>\n\t\t</HomePage>\n\t);\n};\n\nexport default Home;\n","import React from 'react';\nimport classnames from 'classnames'\nimport styled from 'styled-components';\nimport { color } from 'style/theme'\nimport { TeamTypes, PlayerData } from 'types/player';\nimport { playersData } from 'store/players';\nimport { useRecoilValue, useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\n\nconst themeData = {\n    light: {\n        w_border: 'none',\n        st_bg: 'rgb(241, 224, 224)',\n        st_border: 'none',\n        cl_bg: 'rgb(206, 190, 180)',\n        cl_border: 'none',\n        name_bg: 'white',\n        name_st_fg: color.$title_font_color,\n        name_cl_fg: color.$title_font_color,\n        ready_fg: color.$title_font_color,\n        ready_bg: '#F3DE93',\n        ready_border: '2px solid white',\n    },\n    dark: {\n        w_border: '1px solid' + color.$dark_dim_border_color,\n        st_bg: color.$dark_dim_bg_color,\n        st_border: '1px solid' + color.$fluorescent_pink_color,\n        cl_bg: color.$dark_dim_bg_color,\n        cl_border: '1px solid' + color.$fluorescent_yellow_color,\n        name_bg: 'transparent',\n        name_st_fg: color.$fluorescent_pink_color,\n        name_cl_fg: color.$fluorescent_yellow_color,\n        ready_fg: color.$title_font_color,\n        ready_bg: 'transparent',\n        ready_border: '2px solid white',\n    },\n}\n\nconst Window = styled.div`\n    border-radius: 5px;\n    overflow: hidden;\n    display: flex;\n    flex-wrap: wrap;\n    width: 90vw;\n    height: 90vw;\n    background-color: ${({ theme }) => theme.st_bg};\n    border: ${({ theme }) => theme.w_border};\n    margin-bottom: 10px;\n\n    .player {\n        flex-basis: 50%;\n        height: 45vw;\n        display: flex;\n        flex-direction: column;\n        letter-spacing: 1px;\n        justify-content: flex-end;\n        align-items: stretch;\n        transition: all 0.3s;\n        position: relative;\n        padding: 15px;\n        box-sizing: border-box;\n\n        &:nth-child(1) {\n            border-right: ${({ theme }) => theme.w_border};\n            border-bottom: ${({ theme }) => theme.w_border};\n        }\n\n        &:nth-child(2) {\n            border-bottom: ${({ theme }) => theme.w_border};\n        }\n\n        &:nth-child(3) {\n            border-right: ${({ theme }) => theme.w_border};\n        }\n\n        &.strawberry_team {\n            background-color: ${({ theme }) => theme.st_bg};\n            \n            .player__name {\n                color: ${({ theme }) => theme.name_st_fg};\n                border: ${({ theme }) => theme.st_border};\n            }\n        }\n\n        &.canele_team {\n            background-color: ${({ theme }) => theme.cl_bg};\n            .player__name {\n                color: ${({ theme }) => theme.name_cl_fg};\n                border: ${({ theme }) => theme.cl_border};\n            }\n        }\n\n        &__name {\n            text-align: center;\n            flex: 0 1 auto;\n            border: 2px solid transparent;\n            border-radius: 20px;\n            font-size: 20px;\n            padding: 7px 10px;\n            margin: 0;\n            position: relative;\n            transition: 0.3s all;\n            background-color: ${({ theme }) => theme.name_bg};\n        }\n    }    \n`\n\ninterface PlayerBoxProperty {\n    order: PlayerOrders.First | PlayerOrders.Second | PlayerOrders.Third | PlayerOrders.Fourth;\n    playerData: PlayerData;\n}\n\nenum PlayerOrders {\n    First,\n    Second,\n    Third,\n    Fourth\n}\nconst PlayerBox = (props: PlayerBoxProperty) => {\n    const { order, playerData } = props;\n    const playerName = playerData ? playerData.name : '';\n\n    const defaultTeam =\n        order === PlayerOrders.First || order === PlayerOrders.Fourth\n            ? TeamTypes.TeamOne\n            : TeamTypes.TeamTwo;\n    const playerTeam = playerData ? playerData.team : defaultTeam\n\n    return (\n        <div\n            className={classnames(\n                'player',\n                `player__${order}`, {\n                'strawberry_team': playerTeam === TeamTypes.TeamOne,\n                'canele_team': playerTeam === TeamTypes.TeamTwo,\n            })}>\n            {playerName &&\n                <p className={classnames('player__name', { 'ready_to_go': playerData.ready })}>\n                    {playerName}\n                </p>\n            }\n        </div>\n    )\n}\n\nconst PlayerWindow = () => {\n    const [theme] = useRecoilState(themeState);\n    const playerList = useRecoilValue(playersData);\n    const playersOrder = [PlayerOrders.First, PlayerOrders.Second, PlayerOrders.Third, PlayerOrders.Fourth];\n    return (\n        <Window\n            theme={themeData[theme]}\n            className=\"player_window\">\n            {playersOrder.map((order, index) => (\n                <PlayerBox \n                    key={order} \n                    order={order}\n                    playerData={playerList[index]} \n                />))}\n        </Window >\n    )\n};\n\nexport default PlayerWindow;","import React from 'react';\nimport styled from 'styled-components';\n\nconst Icon = styled.span<ShareIconProperty>`\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n    border-radius: 10px;\n    background-color: ${props=>props.backgroundColor};\n\n    .outer {\n        display: flex;\n        justify-content: center;\n        width: 14px;\n        height: 7px;\n        box-sizing: border-box;\n        border-radius: 7px;\n        border: 1px solid ${props=>props.iconColor};\n        position: relative;\n\n        &::before {\n            content: '';\n            display: block;\n            height: calc(100% + 4px);\n            width: 3px;\n            background-color: ${props=>props.backgroundColor};\n            position: absolute;\n            top: -2px;\n            left: 50%;\n            transform: translateX(-50%);\n        }\n\n        .inner {\n            width: 6px;\n            height: 1px;\n            margin: auto;\n            background-color: ${props=>props.iconColor};\n            z-index: 2;\n        }\n    }\n\n`\n\ninterface ShareIconProperty {\n    backgroundColor?: string;\n    iconColor?: string;\n}\n\nconst ShareIcon = (props: ShareIconProperty) => {\n    const { backgroundColor = 'white', iconColor = 'black' } = props;\n    return (\n        <Icon\n            backgroundColor={backgroundColor}\n            iconColor={iconColor}\n        >\n            <span className=\"outer\">\n                <span className=\"inner\" />\n            </span>\n        </Icon>\n    )\n};\n\nexport default ShareIcon;\n","const sleep = (ms: number) => {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport default sleep;","import React from \"react\";\nimport { useTransition, animated } from \"react-spring\";\nimport styled from 'styled-components';\nimport { useRecoilValue } from 'recoil';\n\nimport { themeState } from 'store/theme';\nimport { userRoomState } from 'store/user';\nimport ShareIcon from \"components/Global/atoms/ShareIcon\";\nimport Button from \"components/Global/atoms/Button\";\nimport { color } from 'style/theme';\nimport { useState } from \"react\";\nimport { ThemeTypes } from \"types/theme\";\nimport sleep from \"util/sleep\";\n\nconst themeData = {\n    light: {\n        button_color: '#F0E7CF',\n        icon_color: color.$brown_color,\n        fg: color.$brown_color,\n        modal_color: '#D4EFA8',\n    },\n    dark: {\n        button_color: color.$highlight_color,\n        icon_color: color.$highlight_color,\n        fg: color.$highlight_color,\n        modal_color: color.$fluorescent_green_color,\n    },\n}\n\nconst Toast = styled(animated.div)`\n    z-index: 20;\n    position: absolute;\n    top: 50%;\n    left: 0;\n    transform: translateY(-50%);\n    width: 100%;\n    text-align: center;\n    padding: 10px 0;\n    background-color: ${({ theme }) => theme.modal_color};\n    color: white;\n    font-weight: 600;\n    letter-spacing: 1px;\n`\n\ninterface SuccessToastProperty {\n    active: boolean;\n    theme: ThemeTypes;\n}\n\nconst SuccessToast = (props: SuccessToastProperty) => {\n    const { active, theme } = props;\n    const transitions = useTransition(active, {\n        from: { opacity: 0 },\n        enter: { opacity: 1 },\n        leave: { opacity: 0 }\n    });\n\n    return (\n        <>\n            {transitions((props, item) => item && (\n                <Toast\n                    style={props}\n                    theme={themeData[theme]}\n                >\n                    COPIED!\n                </Toast>))\n            }\n        </>\n    )\n}\n\nconst Content = styled.span`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    span:first-child {\n        margin-right: 2px;\n    }\n\n    span:last-child {\n        font-size: 12px;\n        color: ${({ theme }) => theme.fg}\n    }\n`\n\ninterface SendInviteLinkButtonProperty {\n    className: string;\n}\n\nconst SendInviteLinkButton = (props: SendInviteLinkButtonProperty) => {\n    const { className } = props;\n    const theme = useRecoilValue(themeState);\n    const roomId = useRecoilValue(userRoomState);\n    const [isCopied, setIsCopied] = useState(false);\n\n    const copyInviteLink = (id: string) => {\n        const inviteLink = `https://jyun1desu.github.io/cake-and-bridge-for-life/#/i/${id}`\n        navigator.clipboard.writeText(inviteLink).then(async () => {\n            setIsCopied(true);\n            await sleep(2000);\n            setIsCopied(false);\n        })\n    }\n\n    return (\n        <>\n            <SuccessToast theme={theme} active={isCopied} />\n            <Button\n                className={className}\n                size=\"small\"\n                onClick={() => copyInviteLink(roomId)}\n                color={themeData[theme].button_color}\n            >\n                <Content\n                    theme={themeData[theme]}\n                    className=\"button_content\"\n                >\n                    <ShareIcon\n                        backgroundColor={theme === ThemeTypes.Light ? themeData[theme].button_color : color.$dark_bg_color}\n                        iconColor={themeData[theme].icon_color}\n                    />\n                    <span>複製邀請連結</span>\n                </Content>\n            </Button>\n        </>\n    )\n}\n\nexport default SendInviteLinkButton","import React from \"react\";\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        border: '#dcdcdc',\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        border: color.$dark_dim_border_color,\n    },\n}\n\nconst StyledRadio = styled.span<RadioProperty>`\n    vertical-align: middle;\n    display: inline-block;\n    cursor: pointer;\n    position: relative;\n    display: inline-block;\n    border-radius: 100%;\n    width: ${(props) => (`${props.size}px`)};\n    height: ${(props) => (`${props.size}px`)};\n    margin-right: ${(props) => (`${props.marginRight}px`)};\n    transition: 0.3s all;\n    background-color: ${({ theme }) => theme.bg};\n    border: ${({ border }) => border};\n\n    &::after {\n        content: \"\";\n        display: block;\n        width: 70%;\n        height: 70%;\n        border-radius: 50%;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n    }\n`\n\ninterface RadioProperty {\n    className?: string;\n    size: number;\n    marginRight: number;\n    border: string;\n}\n\nconst Radio = (props: RadioProperty) => {\n    const { className, size, marginRight, border } = props;\n    const [theme] = useRecoilState(themeState);\n    return (\n        <StyledRadio\n            theme={themeData[theme]}\n            border={border}\n            size={size}\n            marginRight={marginRight}\n            className={className}\n        ></StyledRadio>\n    )\n}\n\nexport default Radio;","import React from \"react\";\nimport classnames from 'classnames'\nimport styled from 'styled-components';\nimport db from \"database\";\nimport { useRecoilValue, useRecoilState } from 'recoil';\n\nimport { Team, TeamTypes } from 'types/player';\nimport { themeState } from 'store/theme';\nimport { userTeamState } from 'store/user';\nimport { color } from 'style/theme';\nimport Radio from 'components/Global/atoms/Radio'\n\nconst themeData = {\n    light: {\n        default_f: '#A7A7A7',\n        st_fg: color.$pink_color,\n        cl_fg: color.$brown_color,\n    },\n    dark: {\n        default_f: '#787878',\n        st_fg: color.$fluorescent_pink_color,\n        cl_fg: color.$fluorescent_yellow_color,\n    },\n}\n\nconst StyledRadio = styled.div`\n    display: flex;\n    align-items: center;\n    font-size: 18px;\n    letter-spacing: 1px;\n    transition: 0.3s all;\n    color: ${({ theme }) => theme.default_f};\n\n    &.chosen {\n        &.team1 {\n            color: ${({ theme }) => theme.st_fg};\n\n            .radio::after {\n                transition: 0.3s all;\n                background-color: ${({ theme }) => theme.st_fg};\n            }\n        }\n\n        &.team2 {\n            color: ${({ theme }) => theme.cl_fg};\n\n            .radio::after {\n                transition: 0.3s all;\n                background-color: ${({ theme }) => theme.cl_fg};\n            }\n        }\n    }\n`\nconst RadioArea = styled.div`\n    align-self: flex-start;\n    width: 100%;\n\n    .options {\n        display: flex;\n        width: 100%;\n        justify-content: space-around;\n        font-size: 0;\n    }\n`\n\ninterface TeamOptionProperty {\n    team: '草莓糕' | '可麗露';\n    isChosen: boolean;\n    teamIndex: Team;\n    onClick: () => void;\n}\n\nconst TeamOption = (props: TeamOptionProperty) => {\n    const { team, isChosen, onClick = () => { }, teamIndex } = props;\n    const [theme] = useRecoilState(themeState);\n    const getBorder = () => {\n        switch (theme) {\n            case 'light':\n            default:\n                return 'none'\n            case 'dark':\n                if (isChosen) {\n                    return `1px solid ${teamIndex === TeamTypes.TeamOne \n                        ? themeData[theme].st_fg \n                        : themeData[theme].cl_fg}`\n                } else {\n                    return `1px solid ${color.$dark_dim_border_color}`\n                }\n        }\n    }\n    return (\n        <StyledRadio\n            theme={themeData[theme]}\n            onClick={onClick}\n            className={classnames('option', teamIndex, {\n                'chosen': isChosen,\n            })}>\n            <Radio\n                border={getBorder()}\n                className=\"radio\"\n                size={15}\n                marginRight={8} />\n            <span>{team}</span>\n        </StyledRadio>\n    )\n}\n\ninterface TeamRadiosProperty {\n    roomName: string;\n    userID: string;\n}\n\nconst TeamRadios = (props: TeamRadiosProperty) => {\n    const { roomName, userID } = props;\n    const userTeam = useRecoilValue(userTeamState);\n    const team = ['草莓糕', '可麗露'] as ['草莓糕', '可麗露'];\n\n    const handleChooseTeam = (team: Team) => {\n        const roomRef = db.database().ref(`/${roomName}`);\n        const userInfo = roomRef.child('playersInfo').child(`${userID}`);\n        userInfo.update({ team });\n    };\n\n    return (\n        <RadioArea className=\"choose_team\">\n            <div className=\"options\">\n                {team.map((team, index) => {\n                    const teamIndex = `team${index + 1}` as Team;\n                    return (\n                        <TeamOption\n                            onClick={() => handleChooseTeam(teamIndex)}\n                            isChosen={userTeam === teamIndex}\n                            key={index}\n                            team={team}\n                            teamIndex={teamIndex}\n                        />\n                    )\n                })}\n            </div >\n        </RadioArea >\n    )\n}\n\nexport default TeamRadios","const generateArray = (number: number) => {\n    if(!number) return [];\n    return Array.from(Array(number), (_, x) => x);\n}\n\nexport default generateArray;","import React, { useEffect, useState } from 'react';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport { useRecoilState } from \"recoil\";\nimport Modal from \"components/Global/atoms/Modal\";\nimport Button from 'components/Global/atoms/Button';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\nimport { ThemeData } from 'types/theme';\nimport generateArray from 'util/generateArray';\n\nconst themeData: ThemeData = {\n    light: {\n        bg: 'white',\n        border: 'none',\n        fg: color.$title_font_color,\n        dot: color.$pink_color,\n        button_color: color.$green_color\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        border: '1px solid' + color.$dark_border_color,\n        fg: color.$dark_default_font_color,\n        dot: color.$fluorescent_pink_color,\n        button_color: color.$dark_border_color\n    },\n}\n\n\nconst LoadingModal = styled.div`\n    width: 50vw;\n    min-height: 50vw;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    align-items: center;\n    border-radius: 10px;\n    padding: 20px;\n    background-color: ${({ theme }) => theme.bg};\n    border: ${({ theme }) => theme.border};\n\n    .text,\n    .countdown {\n        margin: 0;\n        font-size: 15px;\n        letter-spacing: 1px;\n        color: ${({ theme }) => theme.fg};\n    }\n\n    .text {\n        margin: 12px 0;\n    }\n\n    .lds-default {\n        display: inline-block;\n        position: relative;\n        width: 80px;\n        height: 80px;\n\n        &>div {\n            position: absolute;\n            width: 6px;\n            height: 6px;\n            border-radius: 50%;\n            animation: lds-default 1.3s linear infinite;\n            background: ${({ theme }) => theme.dot};\n\n            &:nth-child(1) {\n                animation-delay: 0s;\n                top: 37px;\n                left: 66px;\n            }\n\n            &:nth-child(2) {\n                animation-delay: -0.1s;\n                top: 22px;\n                left: 62px;\n            }\n\n            &:nth-child(3) {\n                animation-delay: -0.3s;\n                top: 11px;\n                left: 52px;\n            }\n\n            &:nth-child(4) {\n                animation-delay: -0.3s;\n                top: 7px;\n                left: 37px;\n            }\n\n            &:nth-child(5) {\n                animation-delay: -0.4s;\n                top: 11px;\n                left: 22px;\n            }\n\n            &:nth-child(6) {\n                animation-delay: -0.3s;\n                top: 22px;\n                left: 11px;\n            }\n\n            &:nth-child(7) {\n                animation-delay: -0.6s;\n                top: 37px;\n                left: 7px;\n            }\n\n            &:nth-child(8) {\n                animation-delay: -0.7s;\n                top: 52px;\n                left: 11px;\n            }\n\n            &:nth-child(9) {\n                animation-delay: -0.8s;\n                top: 62px;\n                left: 22px;\n            }\n\n            &:nth-child(10) {\n                animation-delay: -0.9s;\n                top: 66px;\n                left: 37px;\n            }\n\n            &:nth-child(11) {\n                animation-delay: -1s;\n                top: 62px;\n                left: 52px;\n            }\n\n            &:nth-child(12) {\n                animation-delay: -1.1s;\n                top: 52px;\n                left: 62px;\n            }\n        }\n    }\n\n    @keyframes lds-default {\n        0%,\n        20%,\n        80%,\n        100% {\n            transform: scale(1);\n        }\n\n        50% {\n            transform: scale(1.5);\n        }\n    }\n`\ninterface LoadingProperty {\n    active: Boolean;\n    type?: string | null;\n    cancelReady?: ()=>void;\n    actionText?: string;\n    countdown?: number;\n    noOpacity?: Boolean;\n    action?: ()=>void;\n    text?: string;\n    className?: string;\n}\n\nconst Loading = (props: LoadingProperty) => {\n    const {\n        active,\n        type = 'ready',\n        text = '等待其他玩家開始',\n        actionText,\n        countdown = 0,\n        noOpacity = false,\n        action = () => {},\n        cancelReady = () => {},\n    } = props;\n\n    const [theme] = useRecoilState(themeState);\n    const [timeLeft, setTimeLeft] = useState(countdown);\n    const dots = generateArray(12);\n\n    useEffect(() => {\n        if(!active) return;\n\n        if (!timeLeft) {\n            action();\n            return;\n        };\n\n        const countdownInterval = setInterval(() => {\n            setTimeLeft(timeLeft - 1);\n        }, 1000);\n\n        return () => clearInterval(countdownInterval);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [timeLeft, active])\n\n    return (\n        <Modal \n            active={active}\n            className={classnames('loading-modal',{\n                'no-opacity': noOpacity,\n            })}\n        >\n            <LoadingModal\n                theme={themeData[theme]}\n                className=\"loading\">\n                <div className=\"lds-default\">\n                    {dots.map((dot)=>(<div key={`dot${dot}`}></div>))}\n                </div>\n                <p className=\"text\">{text}</p>\n                {type && type.includes('countdown') &&\n                    <p className=\"countdown\">{timeLeft} 秒後{actionText}</p>\n                }\n                {type === 'ready' &&\n                    <Button\n                        color={themeData[theme].button_color}\n                        onClick={cancelReady}\n                        className=\"cancel_ready\"\n                    >取消</Button>\n                }\n            </LoadingModal>\n        </Modal>\n    )\n};\n\nexport default Loading;","import db from \"database\";\nimport { useEffect, useState } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport { userNameState, userRoomState, userIDState } from \"store/user\";\nimport { PlayerData } from 'types/player';\nimport { ReadyTypes } from 'types/types';\n\ntype Values = {\n    userReadyStatus: boolean\n}\n\ntype Handlers = {\n    setReadyStatus: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst useUserReadyStatus = (type: ReadyTypes): [Values, Handlers] => {\n    const [readyStatus, setReadyStatus] = useState(false);\n    const userId = useRecoilValue(userIDState);\n    const userName = useRecoilValue(userNameState);\n    const roomId = useRecoilValue(userRoomState);\n\n    useEffect(()=>{\n        const setReady = async (isReady: boolean, type: ReadyTypes) => {\n            const roomRef = db.database().ref(`/${roomId}`);\n            const userInfo = roomRef.child('playersInfo').child(userId);\n            await userInfo.update({ ready: isReady });\n    \n            if (isReady) {\n                await roomRef.child('playersInfo').once(\"value\", async (data) => {\n                    const playersData = Object.values(data.val()) as PlayerData[];\n                    const allReady = playersData.filter(data => data.ready).length === 4;\n                    if (allReady) {\n                        await roomRef.child('currentPlayer').set(userName);\n                        await roomRef.child(type).set(true);\n                        roomRef.child('playersInfo').off();\n                    }\n                })\n            }\n        }\n\n        setReady(readyStatus, type)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[readyStatus, type])\n\n    return [\n        { userReadyStatus: readyStatus},\n        { setReadyStatus }\n    ]\n}\n\nexport default useUserReadyStatus;\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport db from \"database\";\nimport { useHistory } from \"react-router-dom\";\nimport { color } from 'style/theme'\nimport styled from 'styled-components';\n\nimport { playersData, teamArray } from \"store/players\";\nimport { userIDState, userRoomState, userTeamState } from \"store/user\";\nimport { themeState } from 'store/theme';\nimport { useRecoilValue, useSetRecoilState, useRecoilState } from \"recoil\";\n\nimport { TeamTypes, PlayerData } from 'types/player';\nimport { ReadyTypes } from 'types/types';\n\nimport PlayerWindow from 'components/WaitRoom/PlayerWindow';\nimport SendInviteLinkButton from 'components/WaitRoom/SendInviteLinkButton';\nimport TeamRadios from 'components/WaitRoom/TeamRadios';\nimport Button from 'components/Global/atoms/Button';\nimport Loading from 'components/Global/molecules/Loading';\nimport useUserReadyStatus from 'util/hook/useUserReadyStatus';\n\nconst themeData = {\n    light: {\n        bg: color.$theme_background,\n    },\n    dark: {\n        bg: color.$dark_bg_color,\n    },\n}\n\nconst Room = styled.div`\n        padding: 5vw;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: space-around;\n        transition: .3s background-color;\n        background-color: ${({ theme }) => theme.bg};\n        position: relative;\n\n        .start_game {\n            letter-spacing: 2px;\n            font-size: 16px;\n        }\n\n        .copy_link_button {\n            margin-left: auto;\n        }\n`\ninterface ReadyButtonProperty {\n    className: string;\n    buttonMessage: string;\n    onClick: () => void;\n}\nconst ReadyButton = (props: ReadyButtonProperty) => {\n    const { onClick, className, buttonMessage } = props;\n    const [theme] = useRecoilState(themeState);\n\n    const getButtonColor = () => {\n        switch (theme) {\n            case 'light':\n            default:\n                return buttonMessage === '開打！'\n                    ? `${color.$pink_color}`\n                    : `${color.$unable_color}`;\n            case 'dark':\n                return buttonMessage === '開打！'\n                    ? `${color.$fluorescent_pink_color}`\n                    : `${color.$dark_dim_border_color}`;\n        }\n    }\n\n    return (\n        <Button\n            className={className}\n            onClick={onClick}\n            color={getButtonColor()}\n        >\n            {buttonMessage}\n        </Button>\n    )\n}\n\nconst WaitRoom = () => {\n    const history = useHistory();\n    const [theme] = useRecoilState(themeState);\n    const [buttonMessage, setButtonMessage] = useState('');\n    const setPlayerData = useSetRecoilState(playersData);\n    const userID = useRecoilValue(userIDState);\n    const userTeam = useRecoilValue(userTeamState);\n    const roomName = useRecoilValue(userRoomState);\n    const team = useRecoilValue(teamArray);\n    const [{ userReadyStatus }, { setReadyStatus }] = useUserReadyStatus(ReadyTypes.EnterGame);\n    const roomRef = db.database().ref(`/${roomName}`);\n    const playersInfo = roomRef.child('playersInfo');\n    const isAllReady = roomRef.child('enterGame');\n\n    useEffect(() => {\n        const prepareWaitRoom = async () => {\n            await initWaitRoomData();\n            detectUserDisConnect();\n            await playersInfo.once(\"value\", (data) => {\n                const playersData = Object.values(data.val()) as PlayerData[];\n                const sortedByTimestamp = playersData.sort((a, b) => a.timestamp - b.timestamp);\n                const userOrder = sortedByTimestamp.findIndex(data => data.id === userID);\n                const userDefaultTeam = userOrder === 0 || userOrder === 3\n                    ? TeamTypes.TeamOne\n                    : TeamTypes.TeamTwo;\n\n                let userData: { ready: boolean; team: TeamTypes } = {\n                    ready: false,\n                    team: userTeam || userDefaultTeam\n                };\n\n                playersInfo.child(userID).update(userData)\n            });\n\n            playersInfo.on(\"value\", async (data) => {\n                if (!data.val()) return;\n                const playersData = Object.values(data.val()) as PlayerData[];\n                const sortedByTimestamp = playersData.sort((a, b) => a.timestamp - b.timestamp);\n                setPlayerData(sortedByTimestamp);\n            });\n\n            // 監聽四人都ready時進入遊戲\n            isAllReady.on(\"value\", async data => {\n                if (data.val()) {\n                    await enterGame();\n                    isAllReady.remove();\n                }\n            });\n        }\n\n        prepareWaitRoom();\n\n        return () => {\n            setReadyStatus(false);\n            playersInfo.off();\n            roomRef\n                .child('playersInfo')\n                .child(userID)\n                .onDisconnect()\n                .cancel();\n        }\n    }, []);\n\n    useEffect(() => {\n        if (team.length < 4) {\n            return setButtonMessage('人數不足⋯⋯');;\n        };\n        const teamOneAmount = team.filter(team => team === TeamTypes.TeamOne).length;\n        const teamTwoAmount = team.filter(team => team === TeamTypes.TeamTwo).length;\n        if (teamOneAmount !== teamTwoAmount) {\n            return setButtonMessage('人數不一樣怎麼打！');\n        }\n        return setButtonMessage('開打！');\n    }, [team])\n\n    const detectUserDisConnect = () => {\n        roomRef\n            .child('playersInfo')\n            .child(userID)\n            .onDisconnect()\n            .remove();\n    };\n\n    const initWaitRoomData = async () => {\n        const playersInfo = roomRef.child('playersInfo');\n        await playersInfo.child(userID).update({ ready: false })\n    }\n\n    const enterGame = async () => {\n        await initWaitRoomData();\n        history.push(`/g/${roomName}/${userID}`);\n    }\n\n    return (\n        <Room\n            theme={themeData[theme]}>\n            <SendInviteLinkButton className=\"copy_link_button\" />\n            <PlayerWindow />\n            <TeamRadios roomName={roomName} userID={userID} />\n            <ReadyButton\n                className=\"start_game\"\n                buttonMessage={buttonMessage}\n                onClick={() => {\n                    if (buttonMessage !== '開打！') return;\n                    setReadyStatus(true);\n                }}\n            />\n            <Loading\n                active={userReadyStatus}\n                cancelReady={() => setReadyStatus(false)}\n            />\n        </Room>\n    )\n}\n\nexport default WaitRoom;","import { CardSuitType, Card} from 'types/card';\nconst buildNewDeck = () => {\n    const suit = [CardSuitType.Spade, CardSuitType.Heart, CardSuitType.Diamond, CardSuitType.Club];\n    const number = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13];\n    const deck: Card[] = [];\n    for (let i = 0; i < suit.length; i++) {\n        let card: Card;\n        for (let j = 0; j < number.length; j++) {\n            card = {\n                suit: suit[i],\n                number: number[j],\n            };\n            deck.push(card);\n        }\n    }\n    return deck;\n};\n\nconst shuffle = (deck: Card[]) => {\n    let i = deck.length;\n    while (i > 1) {\n        let index = Math.floor(Math.random() * i--);\n        [deck[i], deck[index]] = [deck[index], deck[i]];\n    }\n    return deck;\n};\n\nconst sortCards = (cards: Card[]) => {\n    const sorted = cards.sort((a: Card, b: Card) => {\n        const order = [CardSuitType.Spade, CardSuitType.Heart, CardSuitType.Club, CardSuitType.Diamond];\n        const cardAPoint = 100 * (4 - order.indexOf(a.suit)) + 13 - a.number;\n        const cardBPoint = 100 * (4 - order.indexOf(b.suit)) + 13 - b.number;\n        return cardBPoint - cardAPoint;\n    });\n    return sorted;\n};\n\nconst dealCards = (playerAmount: number, deck: Card[]) => {\n    const players: Array<Card[]> = [];\n    for (let i = 0; i < playerAmount; i++) {\n        const eachPlayer: [] = [];\n        players.push(eachPlayer);\n    }\n\n    for (let i = 0; i < deck.length; i++) {\n        const playerIndex = i % playerAmount;\n        players[playerIndex].push(deck[i]);\n    }\n    const sorted = players.map((cards) => sortCards(cards));\n    return sorted;\n};\n\nconst shuffledDeck = () => shuffle(buildNewDeck());\n\nexport const generateNewDeck = () => {\n    return dealCards(4, shuffledDeck());\n};\n","import { CardSuitType, SuitColorType } from 'types/card';\nexport const suitColor = (suit: CardSuitType | undefined | null) => {\n    switch (suit) {\n        case CardSuitType.Spade:\n        case CardSuitType.Club:\n        default:\n            return SuitColorType.Black;\n        case CardSuitType.Heart:\n        case CardSuitType.Diamond:\n            return SuitColorType.Red;\n    }\n}\n\nexport const suitInPoker = (suit: CardSuitType | undefined) => {\n    switch (suit) {\n        case CardSuitType.Spade:\n            return \"♠\";\n        case CardSuitType.Heart:\n            return \"♥\";\n        case CardSuitType.Diamond:\n            return \"♦\";\n        case CardSuitType.Club:\n        default:\n            return \"♣\";\n    }\n}","import React from 'react';\nimport { CardSuitType } from 'types/card';\n\nconst getSuitHtmlCode = (suit: CardSuitType | null | undefined) => {\n    switch (suit) {\n        case null:\n            return (<></>)\n        case CardSuitType.Spade:\n            return (<>&#9824;&#xFE0E;</>)\n        case CardSuitType.Heart:\n            return (<>&#9829;&#xFE0E;</>)\n        case CardSuitType.Diamond:\n            return (<>&#9830;&#xFE0E;</>)\n        case CardSuitType.Club:\n        default:\n            return (<>&#9827;&#xFE0E;</>);\n    }\n}\n\ninterface SuitProperty {\n    suit: CardSuitType | null | undefined;\n    className?: string;\n}\n\nconst Suit = (props: SuitProperty) => {\n    const { suit, className } = props;\n    const suitCode = getSuitHtmlCode(suit);\n    return (\n        <span className={className}>\n            {suitCode}\n        </span>\n    )\n};\n\nexport default Suit;","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/theme';\n\nconst Icon = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: #fff;\n    border-radius: 3px;\n    padding: 8px;\n    filter: drop-shadow(0px 0px 2px rgb(170, 170, 170));\n    z-index: 1;\n    &::after {\n        content: \"\";\n        position: absolute;\n        display: block;\n        background-color: #fff;\n        width: 6px;\n        height: 6px;\n        transform-origin: top right;\n        transform: rotate(45deg);\n        top: 100%;\n    }\n    &.on_table {\n        position: absolute;\n        transform: translate(-50%, -150%);\n        left: 50%;\n        top: 0;\n    }\n    &.on_bind_list {\n        position: absolute;\n        transform: translate(-50%);\n        left: 50%;\n        bottom: 99%;\n        z-index: 500;\n    }\n\n    .dots {\n        display: flex;\n\n        .dot {\n            height: 4px;\n            width: 4px;\n            border-radius: 50%;\n            background-color: ${color.$black_suit_color};\n\n            animation: animateDot 2s cubic-bezier(0.69, 0.76, 0.58, 1);\n            animation-iteration-count: infinite;\n\n            &:nth-child(1) {\n                animation-delay: 0s;\n            }\n\n            &:nth-child(2) {\n                margin: 0 4px;\n                animation-delay: 0.3s;\n            }\n\n            &:nth-child(3) {\n                animation-delay: 0.3s;\n            }\n        }\n    }\n\n    @keyframes animateDot {\n        0% {\n            transform: translate3d(0);\n        }\n\n        25% {\n            transform: translate3d(0, -1.5px, 0);\n        }\n\n        50% {\n            transform: translate3d(0, 0.5px, 0);\n        }\n\n        65%,\n        100% {\n            transform: translate3d(0, 0, 0);\n        }\n    }\n`\ninterface ThinkingIconProperty {\n    className: string;\n}\n\nconst ThinkingIcon = (props: ThinkingIconProperty) => {\n    const { className } = props;\n    return (\n        <Icon className={`thinking ${className}`}>\n            <div className=\"dots\">\n                <div className=\"dot\"></div>\n                <div className=\"dot\"></div>\n                <div className=\"dot\"></div>\n            </div>\n        </Icon>\n    )\n};\n\nexport default ThinkingIcon","import React, { useEffect } from 'react';\nimport classnames from 'classnames';\nimport db from \"database\";\nimport styled from 'styled-components';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\nimport { suitColor } from 'util/suit';\nimport { OrderedStartFromTeamOne } from 'store/players';\nimport { currentPlayerName } from 'store/game';\nimport { playersCalledListState } from 'store/bind';\nimport { userRoomState } from 'store/user';\nimport Suit from 'components/Global/atoms/Suit';\nimport ThinkingIcon from 'components/GameRoom/ThinkingIcon';\nimport { TeamTypes } from 'types/player';\nimport { CalledBind } from 'types/bind';\nimport { ThemeTypes } from 'types/theme';\nimport { CardSuitType } from 'types/card';\n\nconst themeData = {\n    light: {\n        t1_name_fg: 'white',\n        t2_name_fg: 'white',\n        t1_name_bg: color.$pink_color,\n        t2_name_bg: color.$brown_color,\n        binds_bg: 'white',\n        border: 'none',\n        red_suit_color: color.$red_suit_color,\n        black_suit_color: color.$black_suit_color,\n        pass_color: color.$pass_color\n    },\n    dark: {\n        t1_name_fg: color.$fluorescent_pink_color,\n        t2_name_fg: color.$fluorescent_yellow_color,\n        t1_name_bg: color.$dark_dim_bg_color,\n        t2_name_bg: color.$dark_dim_bg_color,\n        binds_bg: color.$dark_dim_bg_color,\n        border: \"1px solid\" + color.$dark_dim_border_color,\n        red_suit_color: color.$dark_red_suit_color,\n        black_suit_color: 'white',\n        pass_color: color.$fluorescent_green_color\n    },\n}\n\ninterface getUserTurnEffectProperty {\n    team: TeamTypes;\n    theme: ThemeTypes;\n}\n\nconst getUserTurnEffect = (props: getUserTurnEffectProperty) => {\n    const { theme, team } = props\n    switch (theme) {\n        case 'light':\n        default:\n            return `box-shadow: 0px 0px 0px 2px ${color.$highlight_color};`\n        case 'dark':\n            const teamColor = team === TeamTypes.TeamOne\n                ? color.$fluorescent_pink_color\n                : color.$fluorescent_yellow_color\n            return `\n            border: none;\n            box-shadow: 0 0 2px 1px ${teamColor};\n            `\n    }\n}\n\ninterface PlayIProperty {\n    team: TeamTypes;\n}\n\nconst Player = styled.div<PlayIProperty>`\n    position: relative;\n    flex:  0 1 25%;\n    font-size: 13px;\n    border-radius: 4px;\n    background-color: ${({ theme }) => theme.binds_bg};\n    border: ${({ theme }) => theme.border};\n\n    &.is_player_turn {\n        ${({ theme, team }) => getUserTurnEffect({ theme, team })};\n    }\n\n    & + div {\n        margin-left: 6px;\n    }\n\n    .name {\n        position: relative;\n        border-radius: 4px 4px 0 0;\n        max-width: calc(85vw/4 - 38px/4);\n        text-align: center;\n        line-height: 20px;\n        padding: 6px;\n        box-sizing: border-box;\n        letter-spacing: 1px;\n        transition: 0.3s all;\n        border-bottom: ${({ theme }) => theme.border};\n\n        &  > p {\n            overflow: hidden;\n            white-space: nowrap;\n        }\n    }\n\n    &:nth-child(2n+1) {\n        .name {\n            background-color: ${({ theme }) => theme.t1_name_bg};\n            color: ${({ theme }) => theme.t1_name_fg};\n        }   \n    }\n\n    &:nth-child(2n+2) {\n        .name {\n            background-color: ${({ theme }) => theme.t2_name_bg};\n            color: ${({ theme }) => theme.t2_name_fg};\n        }   \n    }\n\n\n    .called_bind {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        padding: 5px;\n        box-sizing: border-box;\n        min-height: 8vh;\n        .bind {\n            & + .bind {\n                margin-top: 3px;\n            }\n            &.red {\n                color: ${({ theme }) => theme.red_suit_color};\n            }\n            &.black {\n                color: ${({ theme }) => theme.black_suit_color};\n            }\n            &.pass {\n                letter-spacing: 1px;\n                color: ${({ theme }) => theme.pass_color};\n            }\n        }\n    }\n`\n\ninterface PlayInfoProperty {\n    name: string;\n    team: TeamTypes;\n    calledList: CalledBind[];\n}\nconst PlayInfo = (props: PlayInfoProperty) => {\n    const { name, team, calledList } = props;\n    const [theme] = useRecoilState(themeState);\n    const nowPlayer = useRecoilValue(currentPlayerName);\n    const isPlayerTurn = nowPlayer === name;\n\n    return (\n        <Player\n            theme={themeData[theme]}\n            team={team}\n            className={classnames(\"player\", { is_player_turn: isPlayerTurn })}\n        >\n            {isPlayerTurn && <ThinkingIcon className=\"on_bind_list\" />}\n            <div className=\"name\">\n                <p>{name}</p>\n            </div>\n            <div className=\"called_bind\">\n                {calledList.map((called, index) => {\n                    const isPassed = called === 'pass';\n                    const bind = called === 'pass' ? { number: 0, suit: CardSuitType.Club } : called;\n                    if (isPassed) {\n                        return (<span key={'pass' + index} className={classnames(\"bind\", \"pass\")}>PASS</span>)\n                    }\n                    return (\n                        <span\n                            key={'called' + index}\n                            className={classnames(\"bind\", suitColor(bind.suit))}\n                        >\n                            <span>{bind.number}</span> \n                            <Suit suit={bind.suit} />\n                        </span>\n                    )\n                })\n                }\n            </div>\n        </Player>\n    )\n};\n\ninterface PlayerListProperty {\n    className: string;\n}\nconst PlayerList = (props: PlayerListProperty) => {\n    const { className } = props;\n    const playerList = useRecoilValue(OrderedStartFromTeamOne);\n    const roomId = useRecoilValue(userRoomState);\n    const [calledList, setCalledList] = useRecoilState(playersCalledListState);\n\n    useEffect(() => {\n        const calledBindsRef = db.database().ref(`/${roomId}`)\n            .child('gameInfo')\n            .child('calledBinds');\n        calledBindsRef.on(\"value\", (data) => {\n            const allCalledBinds = data.val();\n            setCalledList(allCalledBinds || {});\n        })\n        return () => {\n            calledBindsRef.off();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    return (\n        <div className={className}>\n            {playerList.map((player, index) => {\n                const team = 'team' + (index % 2) + 1 as TeamTypes;\n                return (\n                    <PlayInfo\n                        key={player + index}\n                        name={player}\n                        team={team}\n                        calledList={calledList[player] || []} />\n                )\n            })}\n        </div>\n    )\n}\n\nexport default PlayerList;","type Object = { [key: string]: any };\n\nconst isObjectEquivalent = (a: Object | null, b: Object | null) => {\n    if(!a || !b) return false;\n    const aKeys = Object.keys(a);\n    const bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) return false;\n\n    return aKeys.every(key => {\n        return a[key] === b[key]\n    })\n}\n\nexport default isObjectEquivalent","import React from 'react';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport Suit from 'components/Global/atoms/Suit';\nimport { themeState } from 'store/theme';\nimport { ThemeTypes } from 'types/theme';\nimport { color } from 'style/theme';\nimport { suitColor } from 'util/suit';\nimport Radio from 'components/Global/atoms/Radio';\nimport { CardSuitType } from 'types/card';\n\nconst themeData = {\n    light: {\n        red_suit_color: color.$red_suit_color,\n        black_suit_color: color.$black_suit_color,\n        unable_color: color.$unable_color,\n    },\n    dark: {\n        red_suit_color: color.$dark_red_suit_color,\n        black_suit_color: 'white',\n        unable_color: color.$dark_unable_color\n    },\n}\n\nconst Button = styled.div`\n    display: flex;\n    align-items: center;\n\n    .pattern {\n        font-size: 16px;\n        line-height: 16px;\n\n        &.red {\n            color: ${({ theme }) => theme.red_suit_color};\n        }\n\n        &.black {\n            color: ${({ theme }) => theme.black_suit_color};\n        }\n    }\n\n    &.is_unable {\n        .pattern {\n            color: ${({ theme }) => theme.unable_color};\n        }\n    }\n\n    &.chosen {\n        .radio {\n            &::after {\n                background-color: #dcdcdc;\n            }\n        }\n    }\n`\n\ninterface OptionButtonProperty {\n    isUnableBind: boolean;\n    trickNumber: number;\n    suit: CardSuitType;\n    onClick: () => void;\n    isPicked: boolean;\n}\n\nconst OptionButton = (props: OptionButtonProperty) => {\n    const {\n        isUnableBind,\n        trickNumber,\n        suit,\n        onClick = () => { },\n        isPicked\n    } = props;\n    const [theme] = useRecoilState(themeState);\n    const getBorder = () => {\n        switch (theme) {\n            case ThemeTypes.Light:\n            default:\n                return `1px solid ${color.$under_line_color}`;\n            case ThemeTypes.Dark:\n                return `1px solid ${color.$dark_dim_border_color}`;\n        }\n    }\n    return (\n        <Button\n            theme={themeData[theme]}\n            key={trickNumber + suit}\n            className={classnames(\"option\", { \"chosen\": isPicked, \"is_unable\": isUnableBind })}\n            onClick={onClick}>\n            <Radio\n                className=\"radio\"\n                border={getBorder()}\n                size={12}\n                marginRight={5}\n            />\n            <Suit \n                className={classnames(\"pattern\", suitColor(suit))}\n                suit={suit}\n            />\n        </Button>\n    )\n}\n\nexport default OptionButton;","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport { color } from 'style/theme';\nimport { ThemeTypes } from 'types/theme';\nimport { userPickBindState, nowBindState  } from 'store/bind';\nimport isObjectEquivalent from 'util/isObjectEquivalent';\nimport OptionButton from './OptionButton';\nimport { Card, CardSuitType } from 'types/card';\n\nconst themeData = {\n    light: { \n        number_c: color.$default_font_color,\n        border: color.$under_line_color\n    },\n    dark: {\n        number_c: 'white',\n        border: color.$dark_dim_border_color\n    },\n}\n\nconst OptionRow = styled.div`\n    display: flex;\n    justify-content: space-between;\n    padding: 10px;\n\n    &:not(:last-child) {\n        transition: 0.3s all;\n        border-bottom: 1px solid ${({theme}) => theme.border };\n    }\n\n    .number {\n        flex: 0 1 25%;\n        margin-right: 15px;\n        transition: 0.3s all;\n        color: ${({theme}) => theme.number_c };\n    }\n    .suits {\n        display: flex;\n        justify-content: space-between;\n        flex: 1 0 auto;\n    }\n`\n\ninterface OptionsProperty  {\n    trickNumber: number;\n    isUserTurn: boolean;\n    theme: ThemeTypes;\n}\n\nconst Options = (props: OptionsProperty) => {\n    const { trickNumber, isUserTurn, theme } = props;\n    const suits = [CardSuitType.Club, CardSuitType.Diamond, CardSuitType.Heart, CardSuitType.Spade];\n    const [pickBindState,setPickBindState] = useRecoilState(userPickBindState);\n    const nowBind = useRecoilValue(nowBindState);\n\n    const isUnableBind = (card: Card) => {\n        const {suit, number} = card;\n        if(nowBind.number > number) return true;\n        if(nowBind.number === number) {\n            return !(suits.indexOf(suit) > suits.indexOf(nowBind.suit))\n        }\n        return false;\n    }\n\n    const handlePickBind = (bindData: Card) => {\n        if(!isUserTurn) return;\n        if(isUnableBind(bindData)) return;\n        if(isObjectEquivalent(bindData, pickBindState as Card)){\n            setPickBindState(null);\n        } else {\n            setPickBindState(bindData);\n        }\n    }\n\n    return (\n        <OptionRow \n            theme={themeData[theme]}\n            className=\"option_row\">\n            <span className=\"number\">{trickNumber}</span>\n            <div className=\"suits\">\n                {suits.map((suit)=>{\n                    const called = {suit, number: trickNumber} as Card;\n                    return(\n                    <OptionButton \n                        key={trickNumber+suit}\n                        onClick={()=>handlePickBind(called)}\n                        trickNumber={trickNumber}\n                        isUnableBind={isUnableBind(called)}\n                        isPicked={isObjectEquivalent(called,pickBindState as Card)}\n                        suit={suit}\n                    />\n                )})}\n            </div>\n        </OptionRow>\n    )\n}\n\nconst List = styled.div`\n    max-height: 25vh;\n    padding: 0 10px;\n    overflow-y: scroll;\n`\n\ninterface OptionListProperty  {\n    tricks: number[];\n    isUserTurn: boolean;\n    theme: ThemeTypes;\n}\n\nconst OptionList = (props: OptionListProperty) => {\n    const { tricks = [], isUserTurn, theme }  = props;\n    \n    return (\n    <List \n        theme={themeData[theme]}\n        className=\"bind_options\">\n        {tricks.map(trickNumber => (\n            <Options         \n                theme={theme}\n                key={'trick'+trickNumber}\n                trickNumber={trickNumber}\n                isUserTurn={isUserTurn}\n            />\n        ))}\n    </List>\n)};\n\nexport default OptionList;","import React, { useEffect, useMemo } from 'react';\nimport db from \"database\";\nimport classnames from 'classnames';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport styled from 'styled-components';\nimport Suit from 'components/Global/atoms/Suit';\nimport { color } from 'style/theme';\nimport { ThemeTypes } from 'types/theme';\nimport { CalledBind } from 'types/bind';\nimport { userPickBindState, nowBindState, availibleTricksState, userPassState } from 'store/bind';\nimport { isUserTurnState, trumpState } from 'store/game';\nimport { relationWithUser, OrderedStartFromTeamOne } from 'store/players';\nimport { userNameState, userRoomState } from 'store/user';\nimport OptionList from './OptionList';\n\ninterface BoxProperty {\n    themeType: ThemeTypes;\n}\n\nconst Box = styled.div<BoxProperty>`\n    border-radius: 4px;\n    margin-top: 8px;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    transition: 0.3s all;\n    background-color: ${({ theme }) => theme.bg};\n    border-width: ${({ themeType }) => themeType === ThemeTypes.Light ? 0 : '1px'};\n    border-style: solid;\n    border-color: ${({ theme }) => theme.border};\n\n    & > p {\n        padding: 8px 0;\n        font-size: 16px;\n        text-align: center;\n        letter-spacing: 1px;\n        margin-bottom: 5px;\n        transition: 0.3s all;\n        border-bottom: 1px solid ${({ theme }) => theme.border};\n        background-color: ${({ theme }) => theme.status_unable_bg};\n        color: ${({ theme }) => theme.status_unable_fg};\n    }\n\n    & > button {\n        padding: 8px 0;\n        margin-top: 5px;\n        font-size: 16px;\n        line-height: 16px;\n        letter-spacing: 2px;\n        transition: 0.3s all;\n        border-top: 1px solid ${({ theme }) => theme.border};\n        background-color: ${({ theme }) => theme.call_unable_bg};\n        color: ${({ theme }) => theme.call_unable_fg};\n    }\n\n    &.is_user_turn{\n        & > p {\n            background-color: ${({ theme }) => theme.status_active_bg};\n            color: ${({ theme }) => theme.status_active_fg};\n        }\n        & > button {\n            background-color: ${({ theme }) => theme.call_pass_bg};\n            color: ${({ theme }) => theme.call_pass_fg};;\n\n            &.has_pick_bind {\n                background-color: ${({ theme }) => theme.call_active_bg};\n                color: ${({ theme }) => theme.call_active_fg};\n            }\n        }\n    }\n`\n\nconst Hint = styled.p`\n    text-align: center;\n    margin-top: 4px;\n    letter-spacing: 1px;\n    font-size: 12px;\n    transition: 0.3s all;\n    color: ${({ theme }) => theme.hint};\n`\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        status_unable_bg: color.$unable_color,\n        status_active_bg: color.$highlight_color,\n        status_unable_fg: color.$unable_font_color,\n        status_active_fg: color.$title_font_color,\n        call_unable_bg: color.$unable_color,\n        call_unable_fg: color.$unable_font_color,\n        call_pass_bg: color.$pass_color,\n        call_pass_fg: 'white',\n        call_active_bg: color.$pink_color,\n        call_active_fg: 'white',\n        border: 'transparent',\n        hint: color.$default_font_color,\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        status_unable_bg: color.$dark_dim_bg_color,\n        status_unable_fg: color.$unable_font_color,\n        status_active_bg: color.$dark_dim_bg_color,\n        status_active_fg: color.$fluorescent_yellow_color,\n        call_unable_bg: color.$dark_dim_bg_color,\n        call_unable_fg: '#7B7B7B',\n        call_pass_bg: color.$dark_dim_bg_color,\n        call_pass_fg: color.$fluorescent_green_color,\n        call_active_bg: color.$dark_dim_bg_color,\n        call_active_fg: color.$fluorescent_pink_color,\n        border: color.$dark_dim_border_color,\n        hint: 'white',\n    },\n}\n\ninterface BindListProperty  {\n    theme: ThemeTypes;\n}\n\nconst BindList = (props: BindListProperty) => {\n    const { theme } = props;\n    const [userPickBind, setUserPickBind] = useRecoilState(userPickBindState);\n    const [isUserPass, setUserPass] = useRecoilState(userPassState);\n    const [nowBind, setNowBind] = useRecoilState(nowBindState);\n    const playerList = useRecoilValue(OrderedStartFromTeamOne);\n    const [trump, setTrump] = useRecoilState(trumpState);\n    const { nextPlayer } = useRecoilValue(relationWithUser);\n    const availibleTricks = useRecoilValue(availibleTricksState);\n    const isUserTurn = useRecoilValue(isUserTurnState);\n    const roomId = useRecoilValue(userRoomState);\n    const userName = useRecoilValue(userNameState);\n    const roomRef = db.database().ref(`/${roomId}`);\n\n    useEffect(() => {\n        const nowBindRef = roomRef.child('gameInfo').child('nowBind');\n        nowBindRef.on(\"value\", (data) => {\n            const nowBindData = data.val();\n            if (nowBindData) {\n                setNowBind(nowBindData);\n            }\n        });\n        detectTrumpDecided();\n        return () => {\n            nowBindRef.off();\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[]);\n\n    useEffect(() => {\n        if (isUserTurn && isUserPass && !trump) {\n            roomRef.child('currentPlayer').set(nextPlayer);\n        }\n    }, [isUserTurn, isUserPass, nextPlayer, roomRef, trump]);\n\n    const buttonMessage = useMemo(() => {\n        const noBind = nowBind.number === 0;\n        if (isUserTurn) {\n            if (noBind && !userPickBind) return '不能PASS!';\n            if (userPickBind) {\n                return (\n                    <>\n                    {`喊${userPickBind.number}`}\n                    <Suit suit={userPickBind.suit} />\n                    </>\n                )\n            } else {\n                return 'PASS';\n            }\n        } else {\n            return 'PASS';\n        }\n    }, [isUserTurn, userPickBind, nowBind])\n\n    const callBind = async () => {\n        if (!isUserTurn || buttonMessage === '不能PASS!') return;\n        const bindRef = roomRef.child('gameInfo').child('nowBind');\n        const userBindListRef = roomRef.child('gameInfo').child('calledBinds').child(userName);\n        const nextPlayerRef = roomRef.child('currentPlayer');\n\n        await userBindListRef.once(\"value\", (data) => {\n            const userCalledBinds = data.val() || [];\n            const calledBind = userPickBind || 'pass';\n            const newUserBinds = [...userCalledBinds, calledBind];\n            userBindListRef.set(newUserBinds);\n\n            if (userPickBind) {\n                bindRef.set({ ...userPickBind , player: userName });\n            } else {\n                setUserPass(true);\n            }\n        });\n\n        await nextPlayerRef.set(nextPlayer);\n        setUserPickBind(null);\n    };\n\n    const detectTrumpDecided = () => {\n        const bindListRef = roomRef.child('gameInfo').child('calledBinds');\n        const nextPlayerRef = roomRef.child('currentPlayer');\n        bindListRef.on(\"value\", (data) => {\n            const binds = data.val();\n            if(!binds) return;\n            const playersCalledList =  Object.values(binds) as CalledBind[][]\n            const passAmount = playersCalledList\n                .filter(playerCalledList => {\n                    return playerCalledList.some(bind => bind === 'pass');\n                }).length;\n\n            if(passAmount === 3) {\n                const nowBindRef = roomRef.child('gameInfo').child('nowBind');\n                nowBindRef.once(\"value\", (data) => {\n                    const { suit, number, player } = data.val();\n                    setTrump({suit, number});\n                    nextPlayerRef.set(getNextPlayer(player));\n                });\n                bindListRef.off();\n            }\n        });\n    }\n\n    const getNextPlayer = (playerName: string) => {\n        const playerIndex = playerList.indexOf(playerName);\n        const nextPlayerIndex = playerIndex + 1 > 3 ? playerIndex - 3 : playerIndex + 1;\n        return playerList[nextPlayerIndex];\n    }\n\n    return (\n        <>\n            <Box\n                theme={themeData[theme]}\n                themeType={theme}\n                className={classnames(\"bind_list\", { \"is_user_turn\": isUserTurn })}>\n                <p>{isUserTurn ? '' : 'NOT '}YOUR TURN</p>\n                <OptionList\n                    theme={theme}\n                    isUserTurn={isUserTurn}\n                    tricks={availibleTricks} />\n                <button\n                    onClick={callBind}\n                    className={classnames({ \"has_pick_bind\": userPickBind })}>\n                        {buttonMessage}\n                </button>\n            </Box>\n            { userPickBind && <Hint theme={themeData[theme]}>再次點擊相同選項可以取消選擇</Hint>}\n        </>\n    )\n}\n\nexport default BindList;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/theme';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\n\nimport Modal from 'components/Global/atoms/Modal';\nimport PlayerList from './PlayerList'\nimport BindList from './BindList'\n\n\nconst Box = styled.div`\n    width: 85vw;\n    align-self: flex-start;\n    margin-top: 5vh;\n    display: flex;\n    flex-direction: column;\n    justify-content: stretch;\n    border-radius: 6px;\n    overflow: hidden;\n    transition: 0.3s all;\n    border: ${({theme}) => theme.border };\n\n    .title {\n        margin: 0;\n        padding: 10px 0;\n        text-align: center;\n        font-size: 18px;\n        letter-spacing: 2px;\n        color: white;\n        transition: 0.3s all;\n        border-bottom: ${({theme}) => theme.border };\n        background-color: ${({theme}) => theme.title_bg };\n    }\n\n    .content {\n        padding: 10px;\n        transition: 0.3s all;\n        background-color: ${({theme}) => theme.content_bg };\n\n        .player_list {\n            display: flex;\n        }\n    }\n`\n\nconst themeData = {\n    light: { \n        title_bg: color.$green_color, \n        content_bg: color.$theme_background,\n        border: `1px solid transparent`,\n    },\n    dark: { \n        title_bg: color.$dark_bg_color, \n        content_bg: color.$dark_dim_bg_color,\n        border: `1px solid ${color.$dark_dim_border_color}`,\n    },\n}\n\nconst BindingBox = () => {\n    const [theme] = useRecoilState(themeState);\n    return (\n        <Box\n            theme={themeData[theme]}\n            className=\"box\">\n            <p className=\"title\">BINDING</p>\n            <div className=\"content\">\n                <PlayerList className=\"player_list\" />\n                <BindList theme={theme} />\n            </div>\n        </Box>\n    )\n}\n\ninterface ModalBindingProperty {\n    active: boolean\n}\n\nconst ModalBinding = (props: ModalBindingProperty) => {\n    const { active } = props;\n    return (\n        <Modal\n            active={active}\n            className=\"binding_modal\">\n            <BindingBox />\n        </Modal>\n    )\n}\n\nexport default ModalBinding;","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\nimport Modal from 'components/Global/atoms/Modal';\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        border: 'none',\n        fg: color.$default_font_color,\n        yes_button_fg: 'white',\n        yes_button_bg: color.$pink_color,\n        no_button_fg: 'white',\n        no_button_bg: color.$green_color,\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        border: `1px solid ${color.$dark_dim_border_color}`,\n        fg: color.$dark_default_font_color,\n        yes_button_fg: color.$fluorescent_pink_color,\n        yes_button_bg: 'transparent',\n        no_button_fg: color.$fluorescent_green_color,\n        no_button_bg: 'transparent',\n    },\n}\n\nconst AskBox = styled.div`\n    display:  flex;\n    flex-direction: column;\n    justify-content: center;\n    border-radius: 5px;\n    overflow: hidden;\n    transition: .3s all;\n    background-color: ${({ theme }) => theme.bg};\n    border: ${({ theme }) => theme.border};\n\n    .content {\n        display:  flex;\n        flex-direction: column;\n        align-items: center;\n        padding: 25px 15px 15px;\n\n        img {\n        width: 80px;\n        margin-bottom: 20px;\n        }\n\n        p {\n            letter-spacing: 1px;\n            transition: .3s all;\n            color: ${({ theme }) => theme.fg};\n        }\n    }\n\n    .button_area {\n        display: flex;\n        & > button {\n            padding: 8px 0;\n            font-size: 15px;\n            letter-spacing: 2px;\n            flex: 1 1 50%;\n            transition: .3s all;\n\n            &:first-child {\n                background-color: ${({ theme }) => theme.yes_button_bg};\n                color: ${({ theme }) => theme.yes_button_fg};\n                border-top: ${({ theme }) => theme.border};\n                border-right: ${({ theme }) => theme.border};\n            }\n\n            &:last-child {\n                background-color: ${({ theme }) => theme.no_button_bg};\n                color: ${({ theme }) => theme.no_button_fg};\n                border-top: ${({ theme }) => theme.border};\n            }\n        }\n    }\n`\n\ninterface ContentProperty {\n    imageUrl: string;\n    description: string;\n    onConfirmText: string;\n    onCancelText: string;\n    onConfirm: () => void;\n    onCancel: () => void;\n}\n\n\nconst Content = (props: ContentProperty) => {\n    const { imageUrl, description, onConfirm, onCancel, onConfirmText, onCancelText } = props;\n    const [theme] = useRecoilState(themeState);\n\n    return (\n        <AskBox theme={themeData[theme]} >\n            <div className=\"content\">\n                <img alt=\"icon\" className=\"icon\" src={imageUrl}></img>\n                <p>{description}</p>\n            </div >\n            <div className=\"button_area\">\n                <button onClick={onConfirm}>{onConfirmText}</button>\n                <button onClick={onCancel}>{onCancelText}</button>\n            </div>\n        </AskBox >\n    )\n}\n\ninterface ModalConfirmProperty extends ContentProperty  {\n    className: string;\n    active: boolean;\n}\n\nconst ModalConfirm = (props: ModalConfirmProperty) => {\n    const { \n        active,\n        className,\n        imageUrl,\n        description,\n        onConfirm,\n        onCancel,\n        onConfirmText = \"確定\",\n        onCancelText = \"取消\"\n    } = props;\n    return (\n        <Modal\n            active={active}\n            className={className}>\n            <Content\n                imageUrl={imageUrl}\n                description={description}\n                onConfirmText={onConfirmText}\n                onCancelText={onCancelText}\n                onConfirm={onConfirm}\n                onCancel={onCancel}\n            />\n        </Modal >\n    );\n}\n\nexport default ModalConfirm","export default __webpack_public_path__ + \"static/media/kanaheiclap.23b0e19f.gif\";","import React from 'react';\nimport db from \"database\";\nimport { useSetRecoilState, useRecoilValue } from 'recoil';\nimport { userRoomState } from 'store/user';\nimport { responseToBadDeck } from 'store/deck';\nimport ModalConfirm from 'components/Global/molecules/ModalConfirm';\nimport Kanahei from 'assets/kanaheiclap.gif';\n\ninterface ModalGiveUpProperty  {\n    active: boolean;\n}\n\nconst ModalGiveUp = (props: ModalGiveUpProperty) => {\n    const {active} = props;\n    const roomId = useRecoilValue(userRoomState);\n    const setResponseToBadDeck = useSetRecoilState(responseToBadDeck);\n\n    const restartGame = () => {\n        const roomRef = db.database().ref(`/${roomId}`);\n        roomRef.child('restart').set(true);\n    }\n    return (\n        <ModalConfirm\n            active={active}\n            className=\"give_up_modal\"\n            description=\"好像可以倒牌捏\"\n            imageUrl={Kanahei}\n            onConfirmText=\"倒爆\"\n            onCancelText=\"不倒\"\n            onConfirm={restartGame}\n            onCancel={()=>setResponseToBadDeck(true)}\n        />\n    );\n}\n\nexport default ModalGiveUp","import React, { useEffect, useState } from 'react';\nimport db from \"database\";\nimport Lottie from 'react-lottie';\nimport styled from 'styled-components';\nimport { useHistory } from \"react-router-dom\";\nimport { useRecoilValue, useResetRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { modalState } from 'store/modal';\nimport { userTeamState, userRoomState, userIDState } from 'store/user';\nimport { color } from 'style/theme';\nimport { TeamTypes } from 'types/player';\nimport Modal from 'components/Global/atoms/Modal';\nimport Button from 'components/Global/atoms/Button';\nimport mainFireWork from 'assets/fireworks/16764-firework-animaiton.json';\nimport subFireWork from 'assets/fireworks/14438-fireworks.json';\nimport thirdFireWork from 'assets/fireworks/lf30_editor_he0cup9w.json';\nimport sleep from 'util/sleep';\n\nconst AninimationBox = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n\n    & > div {\n        &:nth-child(1) {\n            position: absolute;\n            left: -30px;\n            top: -100px;\n        }\n        &:nth-child(2) {\n            position: absolute;\n            left: 30px;\n            top: 300px;\n        }\n        &:nth-child(3) {\n            position: absolute;\n            left: -10px;\n            top: 20px;\n        }\n        &:nth-child(4) {\n            position: absolute;\n            left: 100px;\n            top: 20px;\n        }\n        &:nth-child(5) {\n            position: absolute;\n            left: 50px;\n            top: 400px;\n        }\n        &:nth-child(6) {\n            position: absolute;\n            left: -80px;\n            top: -20px;\n        }\n        &:nth-child(7) {\n            position: absolute;\n            left: -50%;\n            top: 25%;\n        }\n        &:nth-child(8) {\n            position: absolute;\n            left: 20%;\n            top: 60%;\n        }\n        &:nth-child(9) {\n            position: absolute;\n            left: -30%;\n            bottom: 10%;\n        }\n        &:nth-child(10) {\n            position: absolute;\n            left: 0;\n            bottom: 10%;\n        }\n        &:nth-child(11) {\n            position: absolute;\n            left: -30%;\n            top: 10%;\n        }\n        &:nth-child(12) {\n            position: absolute;\n            left: -50%;\n            top: 60%;\n        }\n    }\n`\n\nconst Animations = () => {\n    const [delay, toggleDelay] = useState(false);\n\n    const setDelay = async () => {\n        await sleep(600);\n        toggleDelay(true)\n    }\n\n    useEffect(() => {\n        setDelay()\n    }, [])\n\n    const mainFireWorkData = {\n        loop: true,\n        autoplay: true,\n        animationData: mainFireWork,\n        rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n        }\n    };\n\n    const subFireWorkData = {\n        loop: true,\n        autoplay: true,\n        animationData: subFireWork,\n        rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n        }\n    };\n\n    const thirdFireWorkData = {\n        loop: true,\n        autoplay: true,\n        animationData: thirdFireWork,\n        rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n        }\n    };\n\n    return (\n        <AninimationBox>\n            {delay && <Lottie options={thirdFireWork}\n                height={500}\n                width={500}\n            />}\n            {delay && <Lottie options={mainFireWorkData}\n                height={600}\n                width={600}\n            />}\n            {delay && <Lottie options={thirdFireWork}\n                height={500}\n                width={500}\n            />}\n            <Lottie options={mainFireWorkData}\n                height={300}\n                width={300}\n            />\n            {delay && <Lottie options={thirdFireWork}\n                height={250}\n                width={300}\n            />}\n            <Lottie options={subFireWorkData}\n                height={300}\n                width={300}\n            />\n            <Lottie options={thirdFireWorkData}\n                height={300}\n                width={300}\n            />\n            {delay && <Lottie options={thirdFireWorkData}\n                height={300}\n                width={300}\n            />}\n            <Lottie options={subFireWorkData}\n                height={200}\n                width={500}\n            />\n            <Lottie options={subFireWorkData}\n                height={400}\n                width={400}\n            />\n            <Lottie options={mainFireWorkData}\n                height={500}\n                width={500}\n            />\n            <Lottie options={thirdFireWorkData}\n                height={400}\n                width={400}\n            />\n        </AninimationBox>\n    )\n};\n\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        title_bg: color.$pink_color,\n        border: 'none',\n        title_fg: 'white',\n        win_fg: color.$default_font_color,\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        title_bg: 'transparent',\n        border: `1px solid ${color.$fluorescent_pink_color}`,\n        title_fg: color.$fluorescent_pink_color,\n        win_fg: color.$fluorescent_yellow_color,\n    },\n}\n\nconst ResultBox = styled.div`\n    z-index: 100;\n    display:  flex;\n    flex-direction: column;\n    justify-content: center;\n    background-color: white;\n    border-radius: 5px;\n    overflow: hidden;\n    background-color: ${({ theme }) => theme.bg};\n    border: ${({ theme }) => theme.border};\n\n    .title {\n        font-size: 20px;\n        letter-spacing: 5px;\n        text-align: center;\n        color: white;\n        padding: 5px 0;\n        color: ${({ theme }) => theme.title_fg};\n        background-color: ${({ theme }) => theme.title_bg};\n        border-bottom: ${({ theme }) => theme.border};\n    }\n\n    .content {\n        box-sizing: border-box;\n        padding: 15px;\n\n        .text {\n            text-align: center;\n            letter-spacing: 3px;\n            margin-bottom: 25px;\n            color: ${({ theme }) => theme.win_fg};\n\n            .hint {\n                margin-top: 5px;\n                letter-spacing: 1px;\n                font-size: 12px;\n                color: ${color.$unable_font_color};\n            }\n        }\n    }\n\n    .button_area {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        z-index: 100;\n\n        & > button {\n            width: 80%;\n            & + button {\n                margin-top: 10px;\n            }\n        }\n    }\n`\n\ninterface ContentProperty {\n    isUserWin: boolean;\n    refreshGame: () => void;\n    winTeam: TeamTypes | null;\n    openConfirmLeaveModal: () => void;\n    setReadyStatus: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst Content = (props: ContentProperty) => {\n    const {\n        winTeam,\n        isUserWin,\n        openConfirmLeaveModal,\n        refreshGame,\n        setReadyStatus\n    } = props;\n\n    const theme = useRecoilValue(themeState);\n    const userID = useRecoilValue(userIDState);\n    const roomId = useRecoilValue(userRoomState);\n    const teamName = winTeam === TeamTypes.TeamOne ? '草莓糕' : '可麗露';\n    const initModalType = useResetRecoilState(modalState);\n    const history = useHistory();\n    const roomRef = db.database().ref(`/${roomId}`);\n    const buttonColor = {\n        light: {\n            yellow_button: color.$highlight_color,\n            orange_button: color.$orange_color,\n            green_button: color.$green_color,\n        },\n        dark: {\n            yellow_button: color.$fluorescent_orange_color,\n            orange_button: color.$fluorescent_yellow_color,\n            green_button: color.$fluorescent_green_color,\n        }\n    }\n\n    useEffect(() => {\n        listenOnOneMoreGame();\n        return () => removeOneMoreGameListener();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const startNewGame = () => {\n        refreshGame();\n        setReadyStatus(false);\n    }\n\n    const listenOnOneMoreGame = () => {\n        const oneMoreGameRef = roomRef.child('oneMoreGame');\n\n        oneMoreGameRef.on(\"value\", async data => {\n            const isTrigger = data.val();\n            if (isTrigger) {\n                startNewGame();\n            }\n        });\n    }\n\n    const removeOneMoreGameListener = () => {\n        const oneMoreGameRef = roomRef.child('oneMoreGame');\n        oneMoreGameRef.off();\n    }\n\n    const backToWaitRoom = () => {\n        const toPath = `/w/${roomId}/${userID}`;\n        history.push(toPath);\n        initModalType();\n        roomRef.child('changeMate').set(true);\n    }\n\n    return (\n        <ResultBox\n            theme={themeData[theme]}\n            className=\"result_box\">\n            <p className=\"title\">勝負揭曉</p>\n            <div className=\"content\">\n                <div className=\"text\">\n                    {isUserWin\n                        ? (\n                            <>\n                                <p>🎉恭喜<span>{teamName}</span>贏惹🎉</p>\n                                <p className=\"hint\">(請享受贏家才有的煙火)</p>\n                            </>\n                        )\n                        : (\n                            <>\n                                <p>🥲NO～<span>{teamName}</span>贏惹🥲</p>\n                                <p className=\"hint\">(別氣餒！努力獲勝就能看煙火！)</p>\n                            </>\n                        )\n                    }\n                </div>\n                <div className=\"button_area\">\n                    <Button\n                        onClick={backToWaitRoom}\n                        color={buttonColor[theme].yellow_button}>更換隊友</Button>\n                    <Button\n                        onClick={() => { setReadyStatus(true) }}\n                        color={buttonColor[theme].orange_button}>再玩一局</Button>\n                    <Button\n                        onClick={openConfirmLeaveModal}\n                        color={buttonColor[theme].green_button}>翻桌不玩</Button>\n                </div>\n            </div >\n        </ResultBox >\n    )\n};\n\ninterface ModalResultProperty {\n    active: boolean;\n    winTeam: TeamTypes | null;\n    refreshGame: () => void;\n    openConfirmLeaveModal: () => void;\n    setReadyStatus: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst ModalResult = (props: ModalResultProperty) => {\n    const {\n        active,\n        winTeam,\n        openConfirmLeaveModal,\n        refreshGame,\n        setReadyStatus\n    } = props;\n    const userTeam = useRecoilValue(userTeamState);\n    const isUserWin = winTeam === userTeam;\n\n    return (\n        <Modal\n            active={active}\n            className=\"result_modal\">\n            <Content\n                setReadyStatus={setReadyStatus}\n                winTeam={winTeam}\n                isUserWin={isUserWin}\n                refreshGame={refreshGame}\n                openConfirmLeaveModal={openConfirmLeaveModal}\n            />\n            {isUserWin && <Animations />}\n        </Modal >\n    );\n}\n\nexport default ModalResult","export default __webpack_public_path__ + \"static/media/bumpintowindow.fd5eab02.gif\";","import React from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport db from \"database\";\nimport { useRecoilState, useRecoilValue, useResetRecoilState } from 'recoil';\nimport ModalBinding from 'components/GameRoom/Modal/ModalBinding';\nimport ModalGiveUp from 'components/GameRoom/Modal/ModalGiveUp';\nimport ModalResult from 'components/GameRoom/Modal/ModalResult';\nimport ModalConfirm from 'components/Global/molecules/ModalConfirm';\nimport Loading from 'components/Global/molecules/Loading';\nimport { trumpState, isGameEndState } from 'store/game';\nimport { userRoomState, userIDState } from 'store/user';\nimport { modalState } from 'store/modal';\nimport { OKtoPlay } from 'store/deck';\nimport { ReadyTypes, GameStatusTypes, RefreshGameTypes } from 'types/types';\nimport useUserReadyStatus from 'util/hook/useUserReadyStatus';\n\nimport Kanahei from 'assets/bumpintowindow.gif';\n\ninterface ModalRootProperty {\n    initGameData: () => Promise<void>;\n}\n\nconst ModalRoot = (props: ModalRootProperty) => {\n    const { initGameData } = props;\n    const history = useHistory();\n    const trump = useRecoilValue(trumpState);\n    const userID = useRecoilValue(userIDState);\n    const roomId = useRecoilValue(userRoomState);\n    const isOKtoPlay = useRecoilValue(OKtoPlay);\n    const isGotWinner = useRecoilValue(isGameEndState);\n    const [modalType, setModalType] = useRecoilState(modalState);\n    const initModalType = useResetRecoilState(modalState);\n    const [{ userReadyStatus } ,{ setReadyStatus }] = useUserReadyStatus(ReadyTypes.OneMoreGame);\n    const roomRef = db.database().ref(`/${roomId}`);\n    \n\n    const backToWaitRoom = () => {\n        const toPath = `/w/${roomId}/${userID}`;\n        history.push(toPath);\n        initGameData();\n        initModalType();\n        roomRef.child(GameStatusTypes.ChangeMate).remove();\n        roomRef.child(GameStatusTypes.SomeoneLeaveGame).remove();\n    }\n\n    const leaveGame = async() => {\n        await roomRef.child('playersInfo').child(userID).remove();\n        await roomRef.child('someoneLeaveGame').set(true);\n        history.push('/');\n    }\n\n    const refreshGame = async (type: RefreshGameTypes = GameStatusTypes.Restart) => {\n        await initGameData();\n        roomRef.child(type).remove();\n    }\n\n    const closeModal = () => initModalType();\n\n    return (\n        <div className=\"modal_root\">\n            <ModalBinding active={!trump && isOKtoPlay} />\n            <ModalGiveUp active={!isOKtoPlay} />\n            <ModalResult\n                setReadyStatus={setReadyStatus}\n                active={!!isGotWinner}\n                refreshGame={()=>refreshGame(GameStatusTypes.OneMoreGame)}\n                openConfirmLeaveModal={()=>setModalType('cofirm-leave')}\n                winTeam={isGotWinner}\n            />\n            <ModalConfirm \n                active={modalType === 'cofirm-leave'}\n                className=\"confirm_leave_modal\"\n                description=\"確定要離開嗎？\"\n                onConfirmText=\"確定\"\n                onCancelText=\"繼續玩\"\n                imageUrl={Kanahei}\n                onConfirm={leaveGame}\n                onCancel={closeModal}\n            />\n            <Loading\n                active={modalType === 'countdown-leave'}\n                type={modalType}\n                countdown={3}\n                action={backToWaitRoom}\n                actionText=\"回到等待室\"\n                text=\"有人離開嚕！\"\n                noOpacity\n            />\n            <Loading\n                active={modalType === 'countdown-change-mate'}\n                type={modalType}\n                countdown={3}\n                action={backToWaitRoom}\n                actionText=\"回到等待室\"\n                text=\"有人要換隊友唷！\"\n                noOpacity\n            />\n            <Loading\n                active={modalType === 'countdown-restart'}\n                type={modalType}\n                countdown={3}\n                action={()=>refreshGame(GameStatusTypes.Restart)}\n                actionText=\"重新牌局\"\n                text=\"倒牌啦！\"\n                noOpacity\n            />\n            <Loading\n                active={userReadyStatus}\n                cancelReady={() => setReadyStatus(false)}\n            />\n        </div>\n    )\n}\n\nexport default ModalRoot;\n","import React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport Suit from 'components/Global/atoms/Suit';\nimport { suitColor } from 'util/suit'\nimport { SuitColor, CardSuitType } from 'types/card';\nimport { color } from \"style/theme\";\nimport { themeState } from 'store/theme';\n\nfunction numberInPoker(number: number) {\n    const poker = [\n        \"2\",\n        \"3\",\n        \"4\",\n        \"5\",\n        \"6\",\n        \"7\",\n        \"8\",\n        \"9\",\n        \"10\",\n        \"J\",\n        \"Q\",\n        \"K\",\n        \"A\",\n    ];\n    return poker[number - 1];\n};\n\ninterface PokerCardProperty {\n    suitColor: SuitColor;\n}\n\nconst themeData = {\n    light: {\n        front_bg: '#FAF9F8',\n        back_bg: '#eaeaea',\n        border: 'white',\n        suit_red: color.$red_suit_color,\n        suit_black: color.$black_suit_color,\n        pattern: 'white',\n        shadow: color.$shadow,\n    },\n    dark: {\n        front_bg: color.$dark_bg_color,\n        back_bg: '#312D28',\n        border: color.$dark_dim_border_color,\n        suit_red: color.$dark_red_suit_color,\n        suit_black: color.$dark_black_suit_color,\n        pattern: color.$dark_dim_bg_color,\n        shadow: 'transparent',\n    },\n}\n\nconst PokerCard = styled.div<PokerCardProperty>`\n    z-index: 1;\n    display: flex;\n    justify-content: space-between;\n    border-radius: 3px;\n    box-sizing: border-box;\n    padding: 2px;\n    transition: all .3s;\n    border: 1px solid ${({ theme }) => theme.border};\n    background-color: ${({ theme }) => theme.front_bg};\n\n    .card_info {\n        display: flex;\n        flex: 0 1 auto;\n        flex-direction: column;\n\n        &.reverse {\n            transform: rotate(180deg);\n        }\n\n        .number,\n        .suit {\n            font-size: 12px;\n            text-align: center;\n            transition: all .3s;\n            color: ${({ suitColor, theme }) => theme[`suit_${suitColor}`]};\n\n            &.suit {\n                margin-top: 1px;\n            }\n        }\n    }\n\n    .pattern {\n        flex: 1 1 100%;\n        margin: 10px 4px;\n        transition: all .3s;\n        background-color: ${({ theme }) => theme.pattern};\n    }\n\n    &.group {\n        width: 16vw;\n        height: 23vw;\n        & + .group {\n            margin-left: -11vw;\n        }\n\n        &.other_player_card{\n            background-color: ${({ theme }) => theme.back_bg};;\n        }\n    }\n\n    &.played_card {\n        width: 12.5vw;\n        height: 15.5vw;\n        box-shadow: 1px 1px 2px 1px ${({ theme }) => theme.shadow};\n    }\n\n    &.isPicked{\n        flex: 0 0 auto;\n        transform: translateY(-30%) scale(1.1);\n\n        &:not(:first-child){\n            margin-left: -7vw !important;\n        }\n    }\n\n    &.isNotPicked{\n        &:last-child {\n            flex: 0 0 auto;\n        }\n    }\n`\n\nexport interface CardProperty {\n    number?: number;\n    suit?: CardSuitType;\n    className?: string;\n    onClick?: (e: React.MouseEvent<HTMLElement>) => void;\n    hasDetail?: Boolean;\n    nowPickSuit?: CardSuitType | null;\n}\n\nconst Card = (props: CardProperty) => {\n    const { number, suit, className, hasDetail = false, onClick = () => { }, nowPickSuit } = props;\n    const theme = useRecoilValue(themeState);\n    const numberOnCard = number ? numberInPoker(number) : null;\n    const sameSuit = nowPickSuit && (suit === nowPickSuit);\n    const isNotPicked = nowPickSuit && (suit !== nowPickSuit);\n\n    return (\n        <PokerCard\n            theme={themeData[theme]}\n            onClick={onClick}\n            className={classnames(className, \"poker_card\",\n                {\n                    'isPicked': sameSuit,\n                    'isNotPicked': isNotPicked,\n                })}\n            suitColor={suitColor(suit)}\n        >\n            {hasDetail && (\n                <>\n                    <div className=\"card_info\">\n                        <span className=\"number\">{numberOnCard}</span>\n                        <Suit className=\"suit\" suit={suit} />\n                    </div>\n                    <div className=\"pattern\"></div>\n                    <div className=\"card_info reverse\">\n                        <span className=\"number\">{numberOnCard}</span>\n                        <Suit className=\"suit\" suit={suit} />\n                    </div>\n                </>\n            )}\n        </PokerCard>\n    )\n\n}\n\nexport default Card","import React from 'react';\nimport db from \"database\";\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport { userDeckState } from 'store/deck';\nimport { isUserTurnState, thisRoundSuitState, isUserLastPlayerState } from 'store/game';\nimport { userNameState, userRoomState } from 'store/user';\nimport { relationWithUser } from 'store/players';\nimport { Card, CardSuitType } from 'types/card';\nimport CardLayout from '../../Card'\n\ninterface UserHandCardsProperty {\n    className: string;\n}\nconst UserHandCards = (props: UserHandCardsProperty) => {\n    const { className } = props;\n    const roomId = useRecoilValue(userRoomState);\n    const userName = useRecoilValue(userNameState);\n    const isUserTurn = useRecoilValue(isUserTurnState);\n    const thisRoundSuit = useRecoilValue(thisRoundSuitState);\n    const isUserLastPlayer = useRecoilValue(isUserLastPlayerState);\n    const { nextPlayer } = useRecoilValue(relationWithUser);\n    const [userDeck, setUserDeck] = useRecoilState(userDeckState);\n    const [nowPickSuit, setNowPickSuit] = React.useState<CardSuitType | null>(null);\n    const roomRef = db.database().ref(`/${roomId}`);\n    const gameInfoRef = roomRef.child('gameInfo');\n\n    const handlePickCard = async (e: React.MouseEvent<HTMLElement>, card: Card) => {\n        e.stopPropagation();\n        const { suit, number } = card\n        if (!isUserTurn) return;\n        if (!isValidCard(suit)) return setNowPickSuit(null);\n        if (suit === nowPickSuit) {\n            // 出牌\n            await playCard({ number, suit });\n            removeCardFromDeck({ number, suit });\n            setNowPickSuit(null);\n            if (!isUserLastPlayer) {\n                await switchToNextPlayer();\n            }\n        } else {\n            setNowPickSuit(suit);\n        }\n    }\n\n    const isValidCard = (pickedSuit: CardSuitType) => {\n        if (!thisRoundSuit) return true;\n        if (thisRoundSuit && pickedSuit !== thisRoundSuit) {\n            if (userDeck.some(card => card.suit === thisRoundSuit)) {\n                return false\n            } else {\n                return true\n            }\n        } else {\n            return true\n        }\n    }\n\n    const playCard = async (card: Card) => {\n        const { suit, number } = card;\n        const cardsRef = gameInfoRef.child('thisRoundCards');\n        const suitRef = gameInfoRef.child('thisRoundSuit');\n        const userPlayData = {\n            player: userName,\n            card: { number, suit },\n        }\n        await cardsRef.once(\"value\", d => {\n            const cards = d.val() || [];\n            if (!cards.length) {\n                suitRef.set(suit);\n            }\n            cardsRef.set([...cards, userPlayData]);\n        });\n    }\n\n    const removeCardFromDeck = (card: Card) => {\n        const { suit, number } = card;\n        const newDeck = userDeck.filter(card => {\n            const isCard = card.number === number && card.suit === suit;\n            return !isCard;\n        })\n        setUserDeck(newDeck);\n    };\n\n    const switchToNextPlayer = async () => {\n        const nextPlayerRef = roomRef.child('currentPlayer');\n        await nextPlayerRef.set(nextPlayer);\n    }\n\n    return (\n        <div className={className}>\n            {userDeck.map(({ number, suit }) => (\n            <CardLayout\n                nowPickSuit={nowPickSuit}\n                onClick={(e) => handlePickCard(e, { number, suit })}\n                className=\"group user_card\"\n                key={number + suit}\n                number={number}\n                suit={suit}\n                hasDetail\n            />))}\n        </div>\n    )\n\n}\n\nexport default UserHandCards","import React from 'react';\nimport Card from '../../Card';\nimport generateArray from 'util/generateArray';\n\ninterface OtherUserHandCardsProperty  {\n    className: string;\n    cardAmount: number;\n}\nconst OtherUserHandCards = (props: OtherUserHandCardsProperty) => {\n    const { className, cardAmount } = props;\n    const cardArray = generateArray(cardAmount);\n    return (\n        <div className={className}>\n            {cardArray.map(card=>(\n                <Card key={card} className=\"group other_player_card\" />\n            ))}\n        </div>\n    )\n}\n\nexport default OtherUserHandCards;","import React from 'react';\nimport classnames from 'classnames';\nimport { useRecoilValue } from 'recoil';\nimport styled from 'styled-components';\nimport { relationWithUser } from 'store/players';\nimport { otherPlayerDeckState } from 'store/deck';\nimport UserHandCards from './UserHandCards';\nimport OtherUserHandCards from './OtherUserHandCards';\n\nconst CardGroup = styled.div`\n\tposition: absolute;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\twidth: 100%;\n\theight: 100%;\n\n\t.cards {\n\t\tdisplay: flex;\n\n\t\t&__user {\n\t\t\tmargin-top: auto;\n\t\t\tmargin-bottom: 10px;\n\t\t\tmax-width: 90vw;\n\t\t}\n\n\t\t&__left {\n\t\t\tposition: absolute;\n\t\t\ttransform-origin: left top;\n\t\t\ttransform: rotate(90deg) translate(-50%, -50%);\n\t\t\ttop: 50%;\n\t\t\tleft: 0;\n\t\t}\n\n\t\t&__right {\n\t\t\tposition: absolute;\n\t\t\ttransform-origin: right top;\n\t\t\ttransform: rotate(-90deg) translate(50%, -50%);\n\t\t\ttop: 50%;\n\t\t\tright: 0;\n\t\t}\n\n\t\t&__cross {\n\t\t\tmargin-top: -15px;\n\t\t}\n\n\t}\n`\n\nconst Cards = () => {\n\tconst order = ['cross', 'left', 'right', 'user'];\n\tconst { teammate, nextPlayer, previousPlayer} = useRecoilValue(relationWithUser);\n\tconst otherPlayerDeck = useRecoilValue(otherPlayerDeckState);\n\tconst orderedPlayers = [teammate, nextPlayer, previousPlayer];\n\n\treturn (\n\t\t<CardGroup className=\"card_group\">\n\t\t\t{order.map((order, index) => (\n\t\t\t\torder === 'user'\n\t\t\t\t\t? <UserHandCards key={order} className={classnames(\"cards\", `cards__${order}`)} />\n\t\t\t\t\t: <OtherUserHandCards \n\t\t\t\t\t\tkey={order} \n\t\t\t\t\t\tclassName={classnames(\"cards\", `cards__${order}`)} \n\t\t\t\t\t\tcardAmount={otherPlayerDeck[orderedPlayers[index]]}/>\n\t\t\t))}\n\t\t</CardGroup >\n\t)\n}\n\nexport default Cards;","import React from 'react';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport { useRecoilValue } from 'recoil';\nimport { TeamTypes } from 'types/player';\nimport { ThemeTypes } from 'types/theme';\nimport { themeState } from 'store/theme';\nimport { relationWithUser } from 'store/players';\nimport { userNameState, userTeamState } from 'store/user';\nimport { currentPlayerName, trumpState } from 'store/game';\nimport ThinkingIcon from 'components/GameRoom/ThinkingIcon';\nimport { color } from 'style/theme'\n\nconst themeData = {\n    light: {\n        name_bg: 'white',\n        fc: color.$title_font_color,\n        bw: '0px',\n        border: 'transparent',\n        team: {\n            team1: color.$pink_color,\n            team2: color.$brown_color,\n        },\n        highlight_color_team: {\n            team1: color.$highlight_color,\n            team2: color.$highlight_color,\n        },\n\n    },\n    dark: {\n        name_bg: color.$dark_dim_bg_color,\n        fc: color.$light_pink_color,\n        bw: '1px',\n        team: {\n            team1: color.$fluorescent_pink_color,\n            team2: color.$fluorescent_yellow_color\n        },\n        highlight_color_team: {\n            team1: color.$fluorescent_pink_color,\n            team2: color.$fluorescent_yellow_color\n        },\n    },\n}\n\ninterface TagProperty {\n    themeType: ThemeTypes;\n    team: TeamTypes;\n}\n\nconst Tag = styled.div<TagProperty>`\n    position: absolute;\n\n    &.is_player_turn {\n        .player_info {\n            border-width: 2px;\n            border-color: ${({ theme, team }) => theme.highlight_color_team[team]};\n        }\n    }\n\n    &.tag {\n        &_cross {\n            top: 0;\n            transform: translate(-50%, -50%);\n            left: 50%;\n        }\n        &_left {\n            transform-origin: left top;\n            transform: rotate(-90deg) translate(-50%, -50%);\n            top: 50%;\n            left: 0;\n        }\n        &_right {\n            transform: rotate(90deg) translate(50%, -50%);\n            transform-origin: right top;\n            top: 50%;\n            right: 0;\n        }\n        &_user {\n            bottom: 0px;\n            left: 50%;\n            transform: translate(-50%, 50%);\n        }\n    }\n\n    .player_info {\n        display: flex;\n        vertical-align: middle;\n        border-radius: 5px;\n        font-size: 14px;\n        line-height: 26px;\n        background-color: white;\n        overflow: hidden;\n        padding-right: 10px;\n        border-style: solid;\n        border-width: ${({ theme }) => theme.bw};\n        border-color: ${({ themeType, theme, team }) => (themeType === ThemeTypes.Light ? 'transparent' : theme.team[team])};\n        background-color: ${({ theme }) => theme.name_bg};\n        color: ${({ theme }) => theme.fc};\n\n        .team {\n            padding: 5px 10px;\n            transition: .3s all;\n            background-color: ${({ theme, team }) => theme.team[team]};\n        }\n\n        .name {\n            max-width: 32vw;\n            letter-spacing: 1px;\n            padding-left: 10px;\n            white-space: nowrap;\n            overflow: hidden;\n        }\n    }\n`\n\ninterface PlayerNameTagProperty {\n    className: string;\n    player: string;\n    team: TeamTypes;\n    isCurrentPlayer: boolean;\n}\n\nconst PlayerNameTag = (props: PlayerNameTagProperty) => {\n    const { className, isCurrentPlayer = false, player, team } = props;\n    const theme = useRecoilValue(themeState);\n    return (\n        <Tag\n            theme={themeData[theme]}\n            themeType={theme}\n            team={team}\n            className={classnames(className, { \"is_player_turn\": isCurrentPlayer })}>\n            {isCurrentPlayer && <ThinkingIcon className=\"on_table\" />}\n            <div className=\"player_info\">\n                <div className=\"team\"></div>\n                <div className=\"name\">{player}</div>\n            </div>\n        </Tag>\n    )\n}\n\nconst Names = styled.div`\n    position: relative;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n`\n\nconst Nameplate = () => {\n    const players = useRecoilValue(relationWithUser);\n    const user = useRecoilValue(userNameState);\n    const currentPlayer = useRecoilValue(currentPlayerName);\n    const trump = useRecoilValue(trumpState);\n    const userTeam = useRecoilValue(userTeamState);\n    const order = ['cross', 'left', 'right', 'user'];\n    const orderedPlayers = [players.teammate, players.nextPlayer, players.previousPlayer, user];\n    const anotherTeam = [TeamTypes.TeamOne, TeamTypes.TeamTwo].find(team => team !== userTeam) as TeamTypes;\n    const teamArray = [userTeam, anotherTeam, anotherTeam, userTeam];\n\n    return (\n        <Names className=\"players_name\">\n            {orderedPlayers.map((player, index) => (\n                <PlayerNameTag\n                    key={order[index]}\n                    className={`tag_${order[index]}`}\n                    player={player}\n                    isCurrentPlayer={!!trump && (currentPlayer === player)}\n                    team={teamArray[index] || TeamTypes.TeamOne}\n                />\n            )\n            )}\n        </Names>\n    )\n}\n\nexport default Nameplate","import React, { useEffect } from 'react';\nimport db from \"database\";\nimport { useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport { Team } from 'types/player';\nimport { Card as CardInterface, CardSuitType } from 'types/card';\nimport { userRoomState, userNameState } from 'store/user';\nimport { teamScoresState } from 'store/score';\nimport { userWinTricksState } from 'store/winTricks';\nimport { otherPlayerDeckState } from 'store/deck';\nimport { thisRoundCardsState, isThisRoundEndState, trumpState, thisRoundSuitState } from 'store/game';\nimport { relationWithUser, OrderedStartFromTeamOne } from 'store/players';\nimport { getBiggestCard } from 'util/game';\nimport sleep from 'util/sleep';\nimport Card from 'components/GameRoom/Card';\n\nconst CardGroup = styled.div`\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 100%;\n\n    .played_card {\n        position: absolute;\n        &.user {\n        left: 50%;\n        bottom: 25px;\n        transform: translateX(-50%);\n        }\n        &.cross {\n            left: 50%;\n            top: 25px;\n            transform: translateX(-50%);\n        }\n        &.left {\n            left: 25px;\n            top: 50%;\n            transform-origin: left top;\n            transform: rotate(90deg) translate(-50%, -100%);\n        }\n        &.right {\n            right: 25px;\n            top: 50%;\n            transform-origin: right top;\n            transform: rotate(90deg) translateX(50%);\n        }\n    }\n`\n\nconst PlayedCard = () => {\n    const roomId = useRecoilValue(userRoomState);\n    const user = useRecoilValue(userNameState);\n    const { teammate, nextPlayer, previousPlayer } = useRecoilValue(relationWithUser);\n    const teamArray = useRecoilValue(OrderedStartFromTeamOne);\n    const trump = useRecoilValue(trumpState);\n    const currentSuit = useRecoilValue(thisRoundSuitState);\n    const [thisRoundCards, updateThisRoundCards] = useRecoilState(thisRoundCardsState);\n    const [teamScores, updateTeamScores] = useRecoilState(teamScoresState);\n    const isThisRoundEnd = useRecoilValue(isThisRoundEndState);\n    const setOtherPlayerDeck = useSetRecoilState(otherPlayerDeckState);\n    const setUserWinTricks = useSetRecoilState(userWinTricksState);\n    const roomRef = db.database().ref(`/${roomId}`);\n\n    useEffect(() => {\n        const cardsRef = db.database().ref(`/${roomId}`)\n            .child('gameInfo')\n            .child('thisRoundCards');\n        cardsRef.on(\"value\", d => {\n            const cards = d.val() || [];\n            updateThisRoundCards(orderCards(cards));\n\n            const playedPlayer = cards[cards.length - 1]?.player;\n            if (playedPlayer && playedPlayer !== user) {\n                setOtherPlayerDeck(pre => ({\n                    ...pre,\n                    [playedPlayer]: pre[playedPlayer] - 1\n                }))\n            }\n        });\n\n        return () => {\n            cardsRef.off();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        if (isThisRoundEnd) {\n            handleRoundEnded();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isThisRoundEnd])\n\n    const handleRoundEnded = async () => {\n        const currentPlayerRef = roomRef.child('currentPlayer');\n        await currentPlayerRef.set(null);\n        await sleep(2000);\n        const winner = getRoundWinner();\n        updatePoints(winner);\n        if (winner === user) {\n            collectThisTrick();\n        }\n        await initRoundData();\n        currentPlayerRef.set(winner);\n    }\n\n    const initRoundData = async () => {\n        const thisRoundSuitRef = roomRef.child('gameInfo').child('thisRoundSuit');\n        const thisRoundCardsRef = roomRef.child('gameInfo').child('thisRoundCards');\n        await Promise.allSettled([\n            thisRoundSuitRef.remove(),\n            thisRoundCardsRef.remove()\n        ]);\n    }\n\n    const getRoundWinner = () => {\n        const winnerIndex = getBiggestCard(\n            trump?.suit as CardSuitType,\n            currentSuit as CardSuitType,\n            thisRoundCards);\n        const playersOrder = [teammate, nextPlayer, previousPlayer, user];\n        return playersOrder[winnerIndex];\n    };\n\n    const updatePoints = (winner: string) => {\n        const winnerTeam = teamArray\n            .map((player, i) => ({ player, team: `team${i % 2 + 1}` }))\n            .find(p => p.player === winner)?.team as Team;\n\n        if (winnerTeam) {\n            updateTeamScores({\n                ...teamScores,\n                [winnerTeam]: teamScores[winnerTeam] + 1\n            })\n        }\n    };\n\n    interface PlayedCard {\n        player: string;\n        card: CardInterface\n    }\n\n    const orderCards = (cards: PlayedCard[]) => {\n        if (!cards.length) return [];\n        const orderedPlayers = [teammate, nextPlayer, previousPlayer, user];\n        const result = orderedPlayers.map(playerName => {\n            const card = cards.find(card => card.player === playerName) as PlayedCard | null;\n            return card?.card;\n        })\n        return result as CardInterface[];\n    }\n\n    const collectThisTrick = () => {\n        setUserWinTricks(pre => ([...pre, thisRoundCards]))\n    };\n\n    return (\n        <CardGroup className=\"played_cards_group\">\n            {thisRoundCards.map((card, index) => {\n                const order = ['cross', 'left', 'right', 'user'];\n                return card && (\n                    <Card\n                        key={order[index]}\n                        className={classnames(\"played_card\", order[index])}\n                        number={card.number}\n                        suit={card.suit}\n                        hasDetail\n                    />\n                )\n            })}\n        </CardGroup>\n    )\n}\n\nexport default PlayedCard","import { Card, CardSuitType } from 'types/card';\n\nconst countPoint = (trump: CardSuitType, currentSuit: CardSuitType, card: Card) => {\n    let point = 0;\n    if (card.suit === trump) {\n        point += 20;\n    }\n    if (card.suit !== trump && card.suit !== currentSuit) {\n        point -= 20;\n    }\n    point += card.number;\n    return point;\n};\n\nexport const getBiggestCard = (trump: CardSuitType, currentSuit: CardSuitType, cards: Card[]) => {\n    const point = cards.map((card) => {\n        const point = countPoint(trump, currentSuit, card);\n        return point;\n    });\n\n    const winnerIndex = point.indexOf(Math.max(...point));\n    return winnerIndex;\n};","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from \"style/theme\";\nimport Nameplate from './Nameplate';\nimport PlayedCard from './PlayedCard';\n\nconst Table = styled.div`\n    width: 60vw;\n    height: 60vw;\n    border-radius: 10px;\n    position: relative;\n    transition: all .3s;\n    border: 1px solid ${({theme}) => theme.border_color };\n    background-color: ${({theme}) => theme.bg };\n`\n\n\nconst themeData = {\n    light: { \n        bg: '#f9f9f9',\n        border_color: 'transparent'\n    },\n    dark: { \n        bg: color.$dark_dim_bg_color,\n        border_color: color.$dark_dim_border_color\n    },\n}\n\nconst CardTable = () => {\n    const [theme] = useRecoilState(themeState);\n    return (\n        <Table theme={themeData[theme]} className=\"card_table\">\n            <PlayedCard />\n            <Nameplate />\n        </Table>\n    )\n}\n\nexport default CardTable","import React from 'react';\nimport styled from 'styled-components';\nimport classnames from 'classnames'\nimport { color } from 'style/theme';\nimport { ThemeTypes } from 'types/theme';\n\nconst Box = styled.div`\n    display: flex;\n    border-radius: 5px;\n    overflow: hidden;\n    transition: .3s all;\n    border: ${({ theme }) => theme.border}; \n\n    .title {\n        flex-grow: 0;\n        text-align: center;\n        padding: 5px 10px;\n        color: white;\n        font-size: 14px;\n        letter-spacing: 2px;\n        writing-mode: vertical-lr;\n        transition: .3s all;\n        color: ${({ theme }) => theme.fc};\n        border-right: ${({ theme }) => theme.border};\n        background-color: ${({ theme }) => theme.title_bg};\n    }\n\n    .content {\n        flex-grow: 1;\n        padding: 8px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        transition: .3s all;\n        background-color: ${({ theme }) => theme.bg};\n    }\n`\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        fc: 'white',\n        title_bg: color.$orange_color,\n        border: '1px solid transparent',\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        fc: color.$light_pink_color,\n        title_bg: color.$dark_dim_bg_color,\n        border: '1px solid' + color.$dark_dim_border_color,\n    },\n}\n\ninterface InfoBoxProperty {\n    theme: ThemeTypes;\n    title: string;\n    children: React.ReactNode;\n    className: string;\n}\n\nconst InfoBox = (props: InfoBoxProperty) => {\n    const { theme, title, children, className } = props;\n    return(\n    <Box theme={themeData[theme]} className={classnames(\"info_box\", className)}>\n        <span className=\"title\">{title}</span>\n        <span className=\"content\">{children}</span>\n    </Box>\n)}\n\nexport default InfoBox;","import React from 'react';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport Suit from 'components/Global/atoms/Suit';\nimport { themeState } from 'store/theme';\nimport { trumpState } from 'store/game';\nimport { teamShouldWinState } from 'store/bind';\nimport { teamScoresState } from 'store/score';\nimport { color } from 'style/theme';\nimport { suitColor } from 'util/suit'\nimport { TeamTypes } from 'types/player';\nimport InfoBox from './InfoBox';\n\nconst Board = styled.div`\n    display: flex;\n    justify-content: space-between;\n    width: 60vw;\n    margin-top: 40px;\n\n    & > div {\n        &:first-child {\n            flex: 1 0 auto;\n        }\n        &:last-child {\n            flex: 1.2 0 auto;\n            margin-left: 15px;\n        }\n    }\n`\n\nconst Point = styled.div`\n        &.team1 {\n            .team__name {\n                transition: .3s all;\n                background-color: ${({ theme }) => theme.team1color};\n            }\n        }\n\n        &.team2 {\n            &::before {\n            content: \"\";\n            display: block;\n            width: 100%;\n            border-top: 1px solid ${({ theme }) => theme.border};\n            margin: 5px 0;\n            }\n            .team__name {\n                transition: .3s all;\n                background-color: ${({ theme }) => theme.team2color};\n            }\n        }\n\n        .team__name {\n        display: inline-block;\n        width: 10px;\n        height: 10px;\n        margin-right: 10px;\n        border-radius: 100%;\n        }\n\n        .team__tricks {\n        letter-spacing: 1px;\n        .now_win {\n            font-size: 14px;\n            margin-right: 3px;\n            transition: .3s all;\n            color: ${({theme}) => theme.fc};\n        }\n        .should_win {\n            font-size: 12px;\n            color: #7e7e7e;\n        }\n    }\n`\n\ninterface SuitProperty {\n    suitColor: string;\n}\n\nconst StyledSuit = styled(Suit)<SuitProperty>`\n    font-size: 20px;\n    transition: .3s all;\n    color: ${({suitColor, theme}) => theme.suit[suitColor]};\n`\n\nconst themeData = {\n    light: {\n        border: color.$orange_color,\n        fc: color.$default_font_color,\n        suit: {\n            red: color.$red_suit_color,\n            black: color.$black_suit_color\n        },\n        team1color: color.$pink_color,\n        team2color: color.$brown_color\n    },\n    dark: {\n        border: color.$dark_dim_border_color,\n        fc: color.$light_pink_color,\n        suit: {\n            red: color.$dark_red_suit_color,\n            black: color.$light_pink_color,\n        },\n        team1color:color.$fluorescent_pink_color,\n        team2color: color.$fluorescent_yellow_color\n    },\n}\n\ninterface PointInfoProperty {\n    team: TeamTypes;\n}\nconst PointInfo = (props: PointInfoProperty) => {\n    const { team } = props;\n    const [theme] = useRecoilState(themeState);\n    const teamShouldWin = useRecoilValue(teamShouldWinState);\n    const teamScores = useRecoilValue(teamScoresState);\n    return (\n        <Point theme={themeData[theme]} className={classnames('team', team)}>\n            <span className=\"team__name\"></span>\n            <span className=\"team__tricks\">\n                <span className=\"now_win\">{teamScores[team]}</span>\n                <span className=\"should_win\">/{teamShouldWin[team]}</span>\n            </span>\n        </Point>\n    )\n}\n\nconst MainInfo = () => {\n    const [theme] = useRecoilState(themeState);\n    const trump = useRecoilValue(trumpState);\n    return (\n        <Board theme={themeData[theme]} className=\"main_info\">\n            <InfoBox\n                theme={theme}\n                title=\"王牌\"\n                className=\"trump\">\n                <StyledSuit \n                    theme={themeData[theme]}\n                    suitColor={suitColor(trump?.suit)}\n                    suit={trump?.suit ? trump.suit : null}\n                    className=\"suit\"\n                />\n            </InfoBox>\n            <InfoBox theme={theme} title=\"戰況\" className=\"team\">\n                <PointInfo team={TeamTypes.TeamOne} />\n                <PointInfo team={TeamTypes.TeamTwo} />\n            </InfoBox>\n        </Board>\n    )\n}\n\nexport default MainInfo;","import React from 'react';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { navState } from 'store/user';\nimport { color } from \"style/theme\";\n\ninterface TogglerProperty  {\n    border: string;\n}\n\nconst Toggler = styled.button<TogglerProperty>`\n        transform: translateX(-50%);\n        display: flex;\n        align-items: center;\n        width: 17vw;\n        height: 17vw;\n        padding: 0;\n        border-radius: 50%;\n        transition: 0.4s all;\n        border: 1px solid ${({ border }) => border};\n        background-color: ${({ color }) => color};\n`\n\ninterface SideNavProperty  {\n    height: string;\n}\n\nconst SideNav = styled.div<SideNavProperty>`\n    display: flex;\n    position: absolute;\n    left: 100%;\n    height: ${({ height }) => height};\n    transition: .3s all ease-in-out;\n\n    &.won_tricks {\n        bottom: 7vw;\n        width: 62vw;\n    }\n\n    &.settings {\n        bottom: 15vw;\n        width: 55vw;\n    }\n\n    &.isOpen {\n        transform: translateX(-100%);\n    }\n\n    &.hide {\n        transform: translateX(50%);\n    }\n\n    .content_box {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n        padding: 8px 0;\n        margin-top: -15px;\n        border-bottom-left-radius: 6px;\n        border-top-left-radius: 6px;\n        overflow-y: scroll;\n        transition:  0.3s all;\n        color: ${({ theme }) => theme.fg};\n        border: 1px solid ${({ theme }) => theme.border};\n        border-right: none;\n        background-color: ${({ theme }) => theme.bg};\n        .scroll_box{\n            width: 100%;\n            height: 100%;\n            padding: 0 10px;\n            box-sizing: border-box;\n            overflow-y: scroll;\n        }\n\n        .title {\n            text-align: center;\n            font-size: 14px;\n            letter-spacing: 1px;\n            padding-bottom: 5px;\n            margin-bottom: 5px;\n            border-bottom: 1px solid ${({ color, theme }) => {\n        if (theme === 'light') {\n            return color\n        } else {\n            return theme.border\n        };\n    }\n    }\n        }\n    }\n`\n\nconst themeData = {\n    light: {\n        bg: 'white',\n        fg: color.$default_font_color,\n        border: 'transparent',\n    },\n    dark: {\n        bg: color.$dark_dim_bg_color,\n        fg: 'white',\n        border: color.$dark_border_color,\n    },\n}\n\ninterface SideInfoProperty  {\n    title: string;\n    type: string | null;\n    renderIcon: React.ReactNode;\n    content: React.ReactNode;\n    className: string;\n    color: string;\n    height: string;\n    border: string;\n}\n\nconst SideInfo = (props: SideInfoProperty) => {\n    const { title, type, renderIcon, content, className, color, height, border } = props;\n    const [nowNav, setNowNav] = useRecoilState(navState);\n    const [theme] = useRecoilState(themeState);\n\n    const handleToggle = () => {\n        if (type === nowNav) {\n            setNowNav(null);\n        } else {\n            setNowNav(type);\n        }\n    }\n\n    return (\n        <SideNav\n            theme={themeData[theme]}\n            height={height}\n            color={color}\n            className={classnames(\n                \"side_nav\",\n                className,\n                {\n                    \"isOpen\": type === nowNav,\n                    \"hide\": nowNav && type !== nowNav\n                })}>\n            <Toggler\n                border={border}\n                onClick={handleToggle}\n                color={color}\n                className=\"toggler\">\n                {renderIcon}\n            </Toggler>\n            <div className=\"content_box\">\n                <div className=\"scroll_box\">\n                    <p className=\"title\">{title}</p>\n                    {content}\n                </div>\n            </div>\n        </SideNav>\n    )\n}\n\nexport default SideInfo","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilState, useSetRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { modalState } from 'store/modal';\nimport { navState } from 'store/user';\nimport { color } from 'style/theme';\nimport Button from 'components/Global/atoms/Button';\nimport ThemeToggler from 'components/Global/atoms/ThemeToggler';\n\nconst Item = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-left: 2px;\n    padding: 6px 0;\n    \n    &:not(:last-child) {\n        transition: 0.3s border-bottom; \n        border-bottom: 1px solid ${({ theme }) => theme.b_bottom};\n    }\n\n    & > span {\n        font-size: 13px;\n        margin-left: 5px;\n        margin-right: 10px;\n    }\n`\n\nconst SettingButton = styled(Button)`\n    padding: 5px 8px;\n`\n\nconst themeData = {\n    light: { \n        b_bottom: color.$under_line_color,\n        exit_button: color.$orange_color,\n        mail_button: color.$green_color,\n    },\n    dark: { \n        b_bottom: color.$dark_dim_border_color,\n        exit_button: color.$fluorescent_orange_color,\n        mail_button: color.$fluorescent_green_color,\n    },\n}\n\nconst Content = () => {\n    const [theme] = useRecoilState(themeState);\n    const setModalType = useSetRecoilState(modalState);\n    const setNowNav = useSetRecoilState(navState);\n    return (\n    <>\n        <Item theme={themeData[theme]}>\n            <span>更換主題</span>\n            <ThemeToggler />\n        </Item>\n        <Item theme={themeData[theme]}>\n            <span>離開遊戲</span>\n            <SettingButton \n                onClick={()=>{\n                    setNowNav(null);\n                    setModalType('cofirm-leave')\n                }}\n                color={themeData[theme].exit_button}\n            >EXIT</SettingButton>\n        </Item>\n    </>\n)}\n\nexport default Content;","import React from 'react';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\nimport SideInfo from 'components/GameRoom/SideInfo';\nimport Content from './Content';\nimport { NavigatorTypes } from 'types/types';\n\n\nconst Icon = styled.div`\n    position: relative;\n    margin-left: 8px;\n\n    .cross {\n        display: block;\n        width: 13px;\n        position: absolute;\n        transition: 0.4s all, 0.3s border-top;\n        transform-origin: center;\n        border-top: 1px solid ${({ theme }) => theme.line};\n\n        &.vertical {\n            transform: rotate(90deg);\n        }\n    }\n\n    &.isOpen {\n        .cross {\n                &.vertical {\n                    transform: rotate(45deg);\n                }\n\n                &.horizental {\n                    transform: rotate(-45deg);\n                }\n            }\n    }\n`\n\nconst themeData = {\n    light: { \n        button_bg: color.$green_color,\n        line: 'white',\n        border: 'transparent'\n    },\n    dark: { \n        button_bg: color.$dark_dim_bg_color,\n        line: color.$dark_border_color,\n        border: color.$dark_border_color,\n    },\n}\n\ninterface PlusIconProperty  {\n    isOpen: boolean;\n}\n\nconst PlusIcon = (props: PlusIconProperty) => {\n    const { isOpen } = props;\n    const [theme] = useRecoilState(themeState);\n    return(\n    <Icon theme={themeData[theme]} className={classnames(\"plus_icon\",{\"isOpen\": isOpen})}>\n        <span className=\"cross vertical\"></span>\n        <span className=\"cross horizental\"></span>\n    </Icon>\n)}\n\ninterface SettingsProperty {\n    active: boolean;\n}\nconst Settings = (props: SettingsProperty) => {\n    const { active } = props;\n    const [theme] = useRecoilState(themeState);\n    return (\n        <SideInfo \n            title=\"設定\"\n            type={NavigatorTypes.Settings}\n            height=\"40vw\"\n            border={themeData[theme].border}\n            color={themeData[theme].button_bg}\n            renderIcon={<PlusIcon isOpen={active}/>}\n            content={<Content/>}\n            className=\"settings\"\n        />\n    )\n}\n\nexport default Settings;","import React from 'react';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\n\nconst StyledCardIcon = styled.div`\n    display: flex;\n\n    .card {\n        display: block;\n        width: 9px;\n        height: 13px;\n        border-radius: 2px;\n        transition: 0.4s all;\n        border: 1px solid ${({ theme }) => theme.line};\n        background-color: ${({ theme }) => theme.bg};\n\n        &:nth-child(1) {\n            transform: translate(8px, 0px);\n            z-index: 12;\n        }\n    }\n\n    &.isOpen {\n        .card{\n            &:nth-child(1) {\n                    transform: rotate(-15deg) translate(7px, 1px);\n            }\n\n            &:nth-child(2) {\n                transform: rotate(8deg) translate(1px, -2px);\n            }\n        }\n    }\n`\n\nconst themeData = {\n    light: { \n        bg: color.$orange_color,\n        line: 'white',\n    },\n    dark: { \n        bg: color.$dark_bg_color,\n        line: color.$dark_border_color\n    },\n}\n\ninterface CardIconProperty  {\n    isOpen: boolean;\n}\nconst CardIcon = (props: CardIconProperty) => {\n    const { isOpen } = props;\n    const [theme] = useRecoilState(themeState);\n    return (\n    <StyledCardIcon \n        theme={themeData[theme]}\n        className={classnames(\"card_icon\",{\"isOpen\": isOpen})}>\n        <span className=\"card\"></span>\n        <span className=\"card\"></span>\n    </StyledCardIcon>\n)}\n\nexport default CardIcon;","import React from 'react';\nimport styled from 'styled-components';\nimport { useRecoilValue } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { userWinTricksState } from 'store/winTricks';\nimport { color } from 'style/theme';\nimport Card from 'components/GameRoom/Card';\n\nconst List = styled.div`\n    display: flex;\n    flex-direction: column;\n    margin-left: 2px;\n\n    .trick {\n        display: flex;\n        justify-content: space-between;\n        padding: 6px 0;\n        & + .trick {\n            transition: 0.3s all;\n            border-top: 1px solid ${({ theme }) => theme.b_bottom};\n        }\n\n        .card_in_won_trick {\n            width: 13vw;\n            height: 16vw;\n        }\n    }\n`\n\nconst Empty = styled.p`\n    text-align: center;\n    font-size: 14px;\n    margin-top: 5px;\n    color: ${color.$unable_color};\n`\n\nconst themeData = {\n    light: { \n        b_bottom: color.$under_line_color,\n    },\n    dark: { \n        b_bottom: color.$dark_dim_border_color,\n    },\n}\n\nconst Content = () => {\n    const theme = useRecoilValue(themeState);\n    const userWinTricks = useRecoilValue(userWinTricksState);\n    return (\n        <>\n        {!userWinTricks.length\n        ?<Empty>加把勁！隊友需要你！</Empty>\n        :<List \n            theme={themeData[theme]}\n            className=\"won_trick_list\">\n            {userWinTricks.map((trick, index) => (\n            <div \n                key={'trick'+index} \n                className=\"trick\">\n                {trick.map(card =>\n                (<Card\n                    className=\"card_in_won_trick\"\n                    key={card.number+card.suit}\n                    number={card.number}\n                    suit={card.suit}\n                    hasDetail\n                />))}\n            </div>))}\n        </List>}\n        </>\n    )\n}\n\nexport default Content;","import React from 'react';\nimport { useRecoilState } from 'recoil';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme';\nimport SideInfo from 'components/GameRoom/SideInfo';\nimport Icon from './Icon';\nimport Content from './Content';\nimport { NavigatorTypes } from 'types/types';\n\nconst themeData = {\n    light: { \n        button_bg: color.$orange_color,\n        border: 'transparent'\n    },\n    dark: { \n        button_bg: color.$dark_dim_bg_color,\n        border: color.$dark_border_color,\n    },\n}\n\ninterface WonTricksProperty {\n    active: boolean;\n}\n\nconst WonTricks = (props: WonTricksProperty) => {\n    const { active } = props;\n    const [theme] = useRecoilState(themeState);\n    return(\n        <SideInfo \n            title=\"你贏的墩們\"\n            type={NavigatorTypes.WonTricks}\n            height=\"70vw\"\n            border={themeData[theme].border}\n            color={themeData[theme].button_bg}\n            renderIcon={<Icon isOpen={active}/>}\n            content={<Content/>}\n            className=\"won_tricks\"\n        />\n    )}\n\nexport default WonTricks","import React from 'react';\nimport styled from 'styled-components';\nimport Settings from 'components/GameRoom/Settings';\nimport WonTricks from 'components/GameRoom/WonTricks';\nimport { color } from 'style/theme';\nimport { navState } from 'store/user';\nimport { useRecoilValue } from 'recoil';\nimport { NavigatorTypes } from 'types/types';\n\ninterface BackgroundProperty  {\n    nowNav: string | null;\n}\n\nconst Background = styled.nav<BackgroundProperty>`\n    z-index: ${props => props.nowNav ? 30 : 0};\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: ${props => props.nowNav\n        ? color.$shadow\n        : 'transparent'\n    };\n    transition: .4s all ease-in-out;\n`\n\nconst Navbar = () => {\n    const nowNav = useRecoilValue(navState);\n    return (\n        <Background\n            nowNav={nowNav}\n            className=\"side_navbar\">\n            <WonTricks active={nowNav === NavigatorTypes.WonTricks} />\n            <Settings active={nowNav === NavigatorTypes.Settings} />\n        </Background>\n    )\n};\n\nexport default Navbar;","import React, { useEffect } from 'react';\nimport { useRecoilValue, useSetRecoilState, useRecoilState } from 'recoil';\nimport db from \"database\";\nimport styled from 'styled-components';\nimport { color } from \"style/theme\";\nimport { generateNewDeck } from 'util/deck';\nimport useInitData from \"util/hook/useInitData\";\nimport { userIndexState, userRoomState, userIDState } from 'store/user';\nimport { modalState } from 'store/modal';\nimport { userDeckState, otherPlayerDeckState } from 'store/deck';\nimport { themeState } from 'store/theme';\nimport { relationWithUser } from 'store/players';\nimport { currentPlayerName, thisRoundSuitState } from 'store/game';\nimport ModalRoot from 'components/GameRoom/Modal/ModalRoot';\nimport Cards from 'components/GameRoom/Cards';\nimport CardTable from 'components/GameRoom/CardTable';\nimport MainInfo from 'components/GameRoom/MainInfo';\nimport Navbar from 'components/GameRoom/Navbar';\n\nconst Room = styled.div`\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n\n        transition: .3s background-color;\n        background-color: ${({ theme }) => theme.bg};\n`\n\nconst themeData = {\n    light: { bg: '#f3e9e9' },\n    dark: { bg: color.$dark_bg_color },\n}\n\nconst GameRoom = () => {\n    const [theme] = useRecoilState(themeState);\n    const [{ initGameRoomData }] = useInitData();\n    const userIndex = useRecoilValue(userIndexState);\n    const userID = useRecoilValue(userIDState);\n    const setUserDeck = useSetRecoilState(userDeckState);\n    const setOtherPlayerDeck = useSetRecoilState(otherPlayerDeckState);\n    const { nextPlayer, teammate, previousPlayer } = useRecoilValue(relationWithUser);\n    const setModalType = useSetRecoilState(modalState);\n    const setNowPlayerState = useSetRecoilState(currentPlayerName);\n    const setThisRoundSuit = useSetRecoilState(thisRoundSuitState);\n    const roomId = useRecoilValue(userRoomState);\n    const roomRef = db.database().ref(`/${roomId}`);\n\n    useEffect(() => {\n        initGameData();\n        listenOnCurrentPlayer();\n        listenOnThisRoundSuit();\n        listenOnChangeRouteEvent();\n        detectUserDisConnect();\n\n        return () => {\n            removeListeners();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const initGameData = async () => {\n        const gameInfoRef = roomRef.child('gameInfo');\n        await gameInfoRef.remove()\n        initGameRoomData();\n        await dealDeck();\n    }\n\n    const dealDeck = async () => {\n        const gameInfoRef = roomRef.child('gameInfo');\n\n        // if (userIndex === 0) {\n            const newDeck = generateNewDeck();\n            await gameInfoRef.update({ deck: newDeck });\n        // }\n\n        gameInfoRef.child('deck').on(\"value\", (data) => {\n            const deck = data.val();\n            setOtherPlayerDeck({\n                [nextPlayer]: 13,\n                [teammate]: 13,\n                [previousPlayer]: 13,\n            })\n            if (deck) {\n                setUserDeck(deck[userIndex]);\n            }\n        })\n    };\n\n    const listenOnCurrentPlayer = () => {\n        const currentPlayerRef = roomRef.child('currentPlayer');\n        currentPlayerRef.on(\"value\", (data) => {\n            const nowPlayerID = data.val();\n            setNowPlayerState(nowPlayerID);\n        })\n    };\n\n    const listenOnThisRoundSuit = () => {\n        const roundSuitRef = roomRef.child('gameInfo').child('thisRoundSuit');\n        roundSuitRef.on(\"value\", (data) => {\n            const roundSuit = data.val();\n            setThisRoundSuit(roundSuit)\n        })\n    };\n\n    const listenOnChangeRouteEvent = () => {\n        const changeMateRef = roomRef.child('changeMate');\n        const leaveRef = roomRef.child('someoneLeaveGame');\n        const restartRef = roomRef.child('restart');\n        const disconnectedRef = roomRef.child('someoneDisconnected')\n\n        changeMateRef.on(\"value\", (data) => {\n            const isTrigger = data.val();\n            if (isTrigger) {\n                setModalType('countdown-change-mate')\n            }\n        });\n        leaveRef.on(\"value\", (data) => {\n            const isTrigger = data.val();\n            if (isTrigger) {\n                setModalType('countdown-leave')\n            }\n        });\n        restartRef.on(\"value\", (data) => {\n            const isTrigger = data.val();\n            if (isTrigger) {\n                setModalType('countdown-restart')\n            }\n        });\n\n        disconnectedRef.on(\"value\", async (data) => {\n            const isTrigger = data.val();\n            if (isTrigger) {\n                setModalType('countdown-destroy');\n            }\n        });\n    }\n\n    const detectUserDisConnect = () => {\n        roomRef.onDisconnect().update({ someoneLeaveGame: true });\n        roomRef\n            .child('playersInfo')\n            .child(userID)\n            .onDisconnect()\n            .remove();\n    };\n\n    const removeListeners = () => {\n        const gameInfoRef = roomRef.child('gameInfo');\n        const deckInfo = gameInfoRef.child('deck');\n        const currentPlayerRef = roomRef.child('currentPlayer');\n        const roundSuitRef = roomRef.child('gameInfo').child('thisRoundSuit');\n        const changeMateRef = roomRef.child('changeMate');\n        const leaveRef = roomRef.child('someoneLeaveGame');\n        const restartRef = roomRef.child('restart');\n        const disconnectedRef = roomRef.child('someoneDisconnected')\n        currentPlayerRef.off();\n        deckInfo.off();\n        roundSuitRef.off();\n        changeMateRef.off();\n        leaveRef.off();\n        restartRef.off();\n        gameInfoRef.remove();\n        disconnectedRef.remove();\n        roomRef.onDisconnect().cancel();\n        roomRef\n            .child('playersInfo')\n            .child(userID)\n            .onDisconnect()\n            .cancel();\n    }\n\n    return (\n        <Room theme={themeData[theme]} className=\"game_room\">\n            <Cards />\n            <CardTable />\n            <MainInfo />\n            <ModalRoot initGameData={initGameData} />\n            <Navbar />\n        </Room>)\n}\n\nexport default GameRoom;","import React, { useEffect, useState } from 'react';\nimport db from \"database\";\nimport { useRecoilValue } from 'recoil';\nimport styled from 'styled-components';\nimport { useHistory } from 'react-router';\nimport { RouteComponentProps } from \"react-router-dom\";\nimport NameFillIn from 'components/Global/molecules/NameFillin';\nimport Button from \"components/Global/atoms/Button\";\nimport { FirebaseRoom } from 'types/room';\nimport { ThemeTypes } from 'types/theme';\nimport { themeState } from 'store/theme';\nimport { color } from 'style/theme'\nimport useFirebaseRoom from \"util/hook/useFirebaseRoom\";\n\ntype Params = { roomId: string };\n\nconst themeData = {\n    light: {\n        stripes_1: '#f7cbca',\n        stripes_2: '#faf7f0',\n        content_bg: '#faf8ece8',\n        decoration_arrows: '#f7cbca',\n        title_block_1: color.$highlight_color,\n        title_block_2: color.$green_color,\n        title_block_3: color.$orange_color,\n        title_fg: 'white',\n        button_color: '#f7cbca',\n        fg: color.$default_font_color,\n    },\n    dark: {\n        stripes_1: '#151615',\n        stripes_2: '#1F211F',\n        content_bg: color.$dark_dim_bg_color,\n        decoration_arrows: color.$fluorescent_yellow_color,\n        title_block_1: color.$fluorescent_orange_color,\n        title_block_2: color.$fluorescent_green_color,\n        title_block_3: color.$fluorescent_yellow_color,\n        title_fg: color.$default_font_color,\n        button_color: color.$fluorescent_pink_color,\n        fg: color.$dark_default_font_color,\n    },\n}\n\ninterface PageProperty {\n    themeType: ThemeTypes;\n}\n\nconst Page = styled.div<PageProperty>`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-image: \n        linear-gradient(39deg, \n            ${({ theme }) => theme.stripes_1} 22.22%, \n            ${({ theme }) => theme.stripes_2} 22.22%, \n            ${({ theme }) => theme.stripes_2} 50%, \n            ${({ theme }) => theme.stripes_1} 50%, \n            ${({ theme }) => theme.stripes_1} 72.22%, \n            ${({ theme }) => theme.stripes_2} 72.22%, \n            ${({ theme }) => theme.stripes_2} 100%);\n    background-size: 42.90px 34.74px;\n\n    .content {\n        display: flex;\n        flex: 1 1 auto;\n        flex-direction: column;\n        align-items: center;\n        padding: 40px 0 20px;\n        box-sizing: border-box;\n        background-color: ${({ theme }) => theme.content_bg};\n        border: 1px solid ${color.$fluorescent_pink_color};\n        border-radius: 10px;\n        position: relative;\n    }\n\n    .invite_content {\n        position: absolute;\n        top: 0;\n        transform: translateY(-50%);\n\n        span {\n            display: inline-block;\n            position: relative;\n            color: ${({ theme }) => theme.title_fg};\n\n            &:first-child {\n                font-size: 16px;\n                padding: 3px;\n                background-color: ${({ theme }) => theme.title_block_1};\n                transform: rotate(-1deg);\n            }\n\n            &:nth-child(2) {\n                z-index: 10;\n                font-size: 26px;\n                padding: 5px;\n                background-color: ${({ theme }) => theme.title_block_2};\n                transform: rotate(-4deg);\n            }\n    \n            &:last-child {\n                font-size: 18px;\n                padding: 2px;\n                background-color: ${({ theme }) => theme.title_block_3};\n                transform: rotate(3deg);\n            }\n        }\n    }\n\n    .decoration {\n        margin-bottom: 20px;\n\n        span {\n            display: block;\n            transform: rotate(90deg);\n            color: ${({ theme }) => theme.decoration_arrows};\n        }\n    }\n\n    .players_amount {\n        font-size: 13px;\n        margin-top: 10px;\n        color: ${({ theme }) => theme.fg};\n    }\n\n    .unable_content {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n\n        p {\n            color: ${({ theme }) => theme.fg};\n        }\n\n        button {\n            margin-top: 10px;\n        }\n    }\n`\nconst InvitePage = ({ match }: RouteComponentProps<Params>) => {\n    const roomId = match.params.roomId;\n    const theme = useRecoilValue(themeState);\n    const { push } = useHistory();\n    const [, { updateDbRoomData }] = useFirebaseRoom();\n    const [roomName, setRoomName] = useState('');\n    const [currentPlayer, setPlayers] = useState<string[]>([]);\n\n    useEffect(() => {\n        const getRoom = () => {\n            const roomRef = db.database().ref(\"/\").child(roomId);\n            roomRef.on('value', d => {\n                const roomData = d.val() as FirebaseRoom | null;\n                if (!roomData) {\n                    push('/');\n                    return;\n                }\n                const currentPlayers = Object.values(roomData.playersInfo).map(p => p.name);\n                setRoomName(roomData.roomName);\n                setPlayers([...currentPlayers])\n            })\n        }\n        getRoom();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [roomId]);\n\n    const enterGame = () => {\n        updateDbRoomData(roomId);\n    };\n\n    return (\n        <Page\n            theme={themeData[theme]}\n            themeType={theme}\n            className=\"invite_page\"\n        >\n            <section className=\"content\">\n                <div className=\"invite_content\">\n                    <span>來自</span>\n                    <span>{roomName}</span>\n                    <span>的橋牌戰帖</span>\n                </div>\n                {currentPlayer.length > 3 ? (\n                    <div className=\"unable_content\">\n                        <p>🤯🤯🤯🤯🤯🤯🤯🤯🤯🤯</p>\n                        <p>遲來一歩！已經客滿了</p>\n                        <p>🤯🤯🤯🤯🤯🤯🤯🤯🤯🤯</p>\n                        <Button\n                            className=\"back_to_home_button\"\n                            color={themeData[theme].button_color}\n                            onClick={() => { push('/') }}\n                            type=\"button\"\n                        >\n                            回到首頁\n                        </Button>\n                    </div>\n                ) : (\n                    <>\n                        <div className=\"decoration\">\n                            <span>&#62;</span>\n                            <span>&#62;</span>\n                            <span>&#62;</span>\n                        </div>\n                        <NameFillIn\n                            actionText=\"立即加入戰局\"\n                            buttonText=\"GO\"\n                            onEnter={enterGame}\n                        />\n                        <p className=\"players_amount\">🍰\n                            {currentPlayer[0]}\n                            {currentPlayer.length > 1 && ` 跟其他 ${currentPlayer.length - 1} 位橋牌友`}\n                            已經加入 🍰\n                        </p>\n                    </>\n                )}\n            </section>\n        </Page>\n    )\n}\n\nexport default InvitePage;","import { useRecoilValue } from 'recoil';\nimport Home from './views/Home';\nimport WaitRoom from './views/WaitRoom';\nimport GameRoom from './views/GameRoom';\nimport InvitePage from './views/InvitePage';\nimport { userRoomState, userNameState } from 'store/user';\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from \"react-router-dom\";\n\nconst App = () => {\n  const roomId = useRecoilValue(userRoomState);\n  const userName = useRecoilValue(userNameState);\n\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/w/:roomId/:userID\">\n          {roomId && userName ? <WaitRoom /> : <Redirect to=\"/\" />}\n        </Route>\n        <Route exact path=\"/g/:roomId/:userID\">\n          {roomId && userName ? <GameRoom /> : <Redirect to=\"/\" />}\n        </Route>\n        <Route exact path=\"/i/:roomId\" component={InvitePage} />\n        <Route path=\"*\">\n          <Redirect to=\"/\" />\n        </Route>\n      </Switch>\n    </Router>\n  )\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { RecoilRoot } from 'recoil';\nimport { GlobalStyle } from './style/globalStyle'\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <RecoilRoot>\n        <App />\n        <GlobalStyle />\n    </RecoilRoot>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}